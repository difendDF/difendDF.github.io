{
    "version": "https://jsonfeed.org/version/1",
    "title": "æ°¸æ’ç»¿æ´²",
    "subtitle": "è™½ç„¶ä¸å®¹æ˜“ï¼Œåªè¦å»åšï¼Œå°±èƒ½æˆåŠŸ",
    "icon": "https://sprenedayf.com/images/favicon.ico",
    "description": "åŠªåŠ›å­¦ä¹ ã€ç”Ÿæ´»",
    "home_page_url": "https://sprenedayf.com",
    "items": [
        {
            "id": "https://sprenedayf.com/2022/05/07/Java/%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%932/",
            "url": "https://sprenedayf.com/2022/05/07/Java/%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%932/",
            "title": "æ“ä½œæ•°æ®åº“æ–¹æ³•æ€»ç»“2",
            "date_published": "2022-05-07T08:24:37.000Z",
            "content_html": "<h1 id=\"å¼•è¨€\"><a class=\"anchor\" href=\"#å¼•è¨€\">#</a> å¼•è¨€</h1>\n<p><a href=\"/2022/05/07/Java/%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%931/\">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ä»‹ç»äº† JDBCã€JDBCTemplate å’Œæ•°æ®åº“è¿æ¥æ± ï¼Œå¤ªåŸå§‹äº†å§ï¼Œæˆ‘ä»¬æƒ³è¦åšå¤§åšå¼ºï¼Œä¸ä¸Š ORM æ¡†æ¶æ€ä¹ˆèƒ½è¡Œï¼Œèµ°èµ·ï¼<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1zxgwcev8j205k05k3yl.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"mybatis\"><a class=\"anchor\" href=\"#mybatis\">#</a> MyBatis</h1>\n<p><code>MyBatis</code>  æ˜¯ä¸€ä¸ªæ”¯æŒæ™®é€š SQL æŸ¥è¯¢ï¼Œå­˜å‚¨è¿‡ç¨‹å’Œé«˜çº§æ˜ å°„çš„ä¼˜ç§€æŒä¹…å±‚ (åŠ) ORM æ¡†æ¶ï¼Œå®ƒæ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„ <code>JDBC</code>  ä»£ç å’Œå‚æ•°çš„æ‰‹å·¥è®¾ç½®ä»¥åŠå¯¹ç»“æœé›†çš„æ£€ç´¢å°è£…ã€‚ <code>MyBatis</code>  å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„ <code>POJO</code> ï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„ Java å¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚<br />\nç»†å¿ƒçš„åŒå­¦ä¸€å®šå‘ç°äº†ï¼Œè¿™é‡Œè¯´çš„æ˜¯åŠ ORM æ¡†æ¶ï¼Œä¸ºä»€ä¹ˆæ˜¯åŠï¼Ÿ <code>ORMï¼ˆObject-Relational Mappingï¼‰</code> å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œç®€å•çš„è¯´ï¼š<strong>ORM å°±æ˜¯å»ºç«‹å®ä½“ç±»å’Œæ•°æ®åº“è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œè¾¾åˆ°æ“ä½œå®ä½“ç±»å°±ç›¸å½“äºæ“ä½œæ•°æ®åº“è¡¨çš„ç›®çš„</strong>ã€‚è€Œæˆ‘ä»¬çš„ MyBatis è¿˜æ˜¯éœ€è¦å†™ sql è¯­å¥çš„å˜›ï¼Œåªä¸è¿‡å®ƒå¸®æˆ‘ä»¬å°è£…äº†æ˜ å°„ï¼Œæ‰€ä»¥åªèƒ½ç®—å¾—ä¸ŠåŠ ORM æ¡†æ¶å•¦ï½</p>\n<h2 id=\"åŸºæœ¬åŸç†\"><a class=\"anchor\" href=\"#åŸºæœ¬åŸç†\">#</a> åŸºæœ¬åŸç†</h2>\n<p>æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰å†™è¿‡ <code>MyBatis</code>  å°è£…ç»“æœé›†çš„åŸç†ï¼Œè¿™é‡Œæˆ‘ä¸æ‰“ç®—å†èµ°æºç äº†ï¼Œè€Œæ˜¯ç®€å•çš„äº†è§£ä¸€ä¸‹æ•´ä½“æ€æƒ³å°±å¯ä»¥å•¦ï½(ä¸»è¦è€ƒè™‘åˆ°å°±è¿™ä¹ˆå¹²çœ‹æºç å¾ˆå®¹æ˜“å°±å¿½ç•¥ä¸€äº›é‡ç‚¹ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨äº†è§£æµç¨‹ï¼Œæ‰€ä»¥å¹²è„†å°±ç›´æ¥äº†è§£æ€æƒ³å§ğŸ¤£)<br />\n é¦–å…ˆæˆ‘ä»¬äº†è§£è¿‡ <code>JDBC</code>  çš„å·¥ä½œæµç¨‹ï¼Œå¹¶çŸ¥é“äº† <code>JDBC</code>  æœ‰å››ä¸ªæ ¸å¿ƒç±»ï¼š</p>\n<ul>\n<li><strong> <code>DriverManager</code> </strong>: ç”¨äºæ³¨å†Œæ•°æ®åº“è¿æ¥</li>\n<li><strong> <code>Connection</code> </strong>: ä¸æ•°æ®åº“è¿æ¥å¯¹è±¡</li>\n<li><strong> <code>Statement/PrepareStatement</code> </strong>: æ“ä½œæ•°æ®åº“ SQL è¯­å¥çš„å¯¹è±¡</li>\n<li><strong> <code>ResultSet</code> </strong>: ç»“æœé›†<br />\nè€Œ <code>MyBatis</code>  ä¹Ÿæœ‰å››å¤§æ ¸å¿ƒå¯¹è±¡ï¼š</li>\n<li><strong> <code>SqlSession</code>  å¯¹è±¡</strong>ï¼šè¯¥å¯¹è±¡ä¸­åŒ…å«äº†æ‰§è¡Œ SQL è¯­å¥çš„æ‰€æœ‰æ–¹æ³•ã€‚ç±»ä¼¼äº <code>JDBC</code>  é‡Œé¢çš„ <code>Connection</code></li>\n<li><strong> <code>Executor</code>  æ¥å£</strong>ï¼šå®ƒå°†æ ¹æ® <code>SqlSession</code>  ä¼ é€’çš„å‚æ•°åŠ¨æ€åœ°ç”Ÿæˆéœ€è¦æ‰§è¡Œçš„ SQL è¯­å¥ï¼ŒåŒæ—¶è´Ÿè´£æŸ¥è¯¢ç¼“å­˜çš„ç»´æŠ¤ã€‚ç±»ä¼¼äº JDBC é‡Œé¢çš„ <code>Statement/PrepareStatement</code></li>\n<li><strong> <code>MappedStatement</code>  å¯¹è±¡</strong>ï¼šè¯¥å¯¹è±¡æ˜¯å¯¹æ˜ å°„ SQL çš„å°è£…ï¼Œç”¨äºå­˜å‚¨è¦æ˜ å°„çš„ SQL è¯­å¥çš„ idã€å‚æ•°ç­‰ä¿¡æ¯</li>\n<li><strong> <code>ResultHandler</code>  å¯¹è±¡</strong>ï¼šç”¨äºå¯¹è¿”å›çš„ç»“æœè¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆå¾—åˆ°è‡ªå·±æƒ³è¦çš„æ•°æ®æ ¼å¼æˆ–ç±»å‹ã€‚å¯ä»¥è‡ªå®šä¹‰è¿”å›ç±»å‹<br />\n MyBatis çš„å…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾å±•ç¤ºï¼š<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h208qx1302j20kd0n3abk.jpg\" alt=\"\" height=\"650px\" /></li>\n</ul>\n<ol>\n<li><strong>è¯»å– MyBatis çš„é…ç½®æ–‡ä»¶</strong>ã€‚ <code>mybatis-config.xml</code>  ä¸º MyBatis çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</li>\n<li><strong>åŠ è½½æ˜ å°„æ–‡ä»¶</strong>ã€‚æ˜ å°„æ–‡ä»¶å³ SQL æ˜ å°„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†æ“ä½œæ•°æ®åº“çš„ SQL è¯­å¥ï¼Œéœ€è¦åœ¨ <code>MyBatis</code>  é…ç½®æ–‡ä»¶ <code>mybatis-config.xml</code>  ä¸­åŠ è½½ã€‚ <code>mybatis-config.xml</code>  æ–‡ä»¶å¯ä»¥åŠ è½½å¤šä¸ªæ˜ å°„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ã€‚</li>\n<li><strong>æ„é€ ä¼šè¯å·¥å‚</strong>ã€‚é€šè¿‡ <code>MyBatis</code>  çš„ç¯å¢ƒé…ç½®ä¿¡æ¯æ„å»ºä¼šè¯å·¥å‚ <code>SqlSessionFactory</code> ã€‚</li>\n<li><strong>åˆ›å»ºä¼šè¯å¯¹è±¡</strong>ã€‚ç”±ä¼šè¯å·¥å‚åˆ›å»º <code>SqlSession</code>  å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†æ‰§è¡Œ SQL è¯­å¥çš„æ‰€æœ‰æ–¹æ³•ã€‚</li>\n<li><strong>Executor æ‰§è¡Œå™¨</strong>ã€‚ <code>MyBatis</code>  åº•å±‚å®šä¹‰äº†ä¸€ä¸ª <code>Executor</code>  æ¥å£æ¥æ“ä½œæ•°æ®åº“ï¼Œå®ƒå°†æ ¹æ® <code>SqlSession</code>  ä¼ é€’çš„å‚æ•°åŠ¨æ€åœ°ç”Ÿæˆéœ€è¦æ‰§è¡Œçš„ SQL è¯­å¥ï¼ŒåŒæ—¶è´Ÿè´£æŸ¥è¯¢ç¼“å­˜çš„ç»´æŠ¤ã€‚</li>\n<li><strong>MappedStatement å¯¹è±¡</strong>ã€‚åœ¨ <code>Executor</code>  æ¥å£çš„æ‰§è¡Œæ–¹æ³•ä¸­æœ‰ä¸€ä¸ª <code>MappedStatement</code>  ç±»å‹çš„å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯å¯¹æ˜ å°„ä¿¡æ¯çš„å°è£…ï¼Œç”¨äºå­˜å‚¨è¦æ˜ å°„çš„ SQL è¯­å¥çš„ idã€å‚æ•°ç­‰ä¿¡æ¯ã€‚</li>\n<li><strong>è¾“å…¥å‚æ•°æ˜ å°„</strong>ã€‚è¾“å…¥å‚æ•°ç±»å‹å¯ä»¥æ˜¯ <code>Map</code> ã€ <code>List</code>  ç­‰é›†åˆç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ <code>POJO</code>  ç±»å‹ã€‚è¾“å…¥å‚æ•°æ˜ å°„è¿‡ç¨‹ç±»ä¼¼äº <code>JDBC</code>  å¯¹ <code>preparedStatement</code>  å¯¹è±¡è®¾ç½®å‚æ•°çš„è¿‡ç¨‹ã€‚</li>\n<li><strong>è¾“å‡ºç»“æœæ˜ å°„</strong>ã€‚è¾“å‡ºç»“æœç±»å‹å¯ä»¥æ˜¯ <code>Map</code> ã€ <code>List</code>  ç­‰é›†åˆç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ <code>POJO</code>  ç±»å‹ã€‚è¾“å‡ºç»“æœæ˜ å°„è¿‡ç¨‹ç±»ä¼¼äº <code>JDBC</code>  å¯¹ç»“æœé›†çš„è§£æè¿‡ç¨‹ã€‚</li>\n</ol>\n<h2 id=\"springå®æˆ˜\"><a class=\"anchor\" href=\"#springå®æˆ˜\">#</a> Spring å®æˆ˜</h2>\n",
            "tags": [
                "Java",
                "åŸºç¡€çŸ¥è¯†",
                "JavaåŸºç¡€",
                "æ•°æ®åº“"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/05/07/Java/%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%931/",
            "url": "https://sprenedayf.com/2022/05/07/Java/%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%931/",
            "title": "æ“ä½œæ•°æ®åº“æ–¹æ³•æ€»ç»“1",
            "date_published": "2022-05-07T03:49:15.000Z",
            "content_html": "<h1 id=\"å¼•è¨€\"><a class=\"anchor\" href=\"#å¼•è¨€\">#</a> å¼•è¨€</h1>\n<p>æœ€è¿‘ä¸€ç›´åœ¨æ“ä½œæ•°æ®åº“ï¼Œç„¶åå°±å‘ç°è‡ªå·±ç«Ÿç„¶åªæ˜¯ä¼šç”¨ Mybatisï¼ŒçŸ¥é“ JDBCTemplateï¼Œå¯¹äºä¸ºä»€ä¹ˆè¦ç”¨å®ƒä»¬ä»¥åŠå®ƒä»¬çš„å‡ºç°éƒ½æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆæƒ…æ™¯åªèƒ½ç£•ç£•å·´å·´çš„è¯´å‡ºä¸ªå¤§æ¦‚ï¼Œæ‰€ä»¥æƒ³ç€æŠŠ Java æ“ä½œæ•°æ®åº“çš„æ–¹æ³•è¿›è¡Œä¸ªç³»ç»Ÿçš„æ¢³ç†ï¼Œåšä¸ªæ€»ç»“ï¼Œå¸Œæœ›ä¸€å¥—ä¸‹æ¥è‡ªå·±èƒ½å¤Ÿæ¸…é†’ä¸€ç‚¹ï½<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1yptgqj1rj209a09lt8w.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"jdbc\"><a class=\"anchor\" href=\"#jdbc\">#</a> JDBC</h1>\n<h2 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h2>\n<p>æ¥è¯´ä¸€ä¸‹åŸå§‹æ–¹æ³•å§ï¼ŒJDBC çš„å…¨ç§°æ˜¯ <code>Java Database Connectivity</code> ï¼Œæ„ä¸º Java å’Œæ•°æ®åº“çš„è¿æ¥ã€‚è®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬çš„ Java ç¨‹åºéœ€è¦è¿æ¥å„ç§å„æ ·çš„æ•°æ®åº“ï¼Œéš¾é“æˆ‘ä»¬è¦ä¸ºæ¯ä¸ªæ•°æ®åº“éƒ½å†™ä¸€å¥—è¿æ¥ç®¡ç†ä»£ç å—ï¼Œç´¯æ­»äº†å¥½å§ã€‚JDBC æ˜¯ SUN å…¬å¸æä¾›çš„ä¸€å¥—æ“ä½œæ•°æ®åº“çš„æ¥å£è§„èŒƒï¼Œå®šä¹‰äº†ç”¨æ¥è®¿é—®æ•°æ®åº“çš„æ ‡å‡† Java ç±»åº“ã€‚ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼ŒSUN å…¬å¸æä¾›äº†ä¸€å¥—æ¥å£ï¼Œè®©æ•°æ®åº“å‚å•†å®ç°è¿™äº›æ¥å£ï¼Œ<strong>ç¨‹åºå‘˜åªéœ€è¦ä½¿ç”¨è¿™ä¸ªæ¥å£å°±å¯ä»¥æ“ä½œä¸åŒçš„æ•°æ®åº“</strong>ï¼Œä¸éœ€è¦å…³æ³¨åº•å±‚æ•°æ®åº“é©±åŠ¨çš„å®‰è£…ï¼Œä»è€Œå¤§å¤§ç®€åŒ–å’ŒåŠ å¿«äº†å¼€å‘è¿‡ç¨‹ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1ypzb0qfmj20fk09uq3g.jpg\" alt=\"\" height=\"400px\" /></p>\n<ul>\n<li><strong> <code>JDBC API</code> </strong>ï¼šå³é¢å‘åº”ç”¨çš„ APIï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œä¾›<strong>åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜</strong>ä½¿ç”¨ï¼Œæä¾›äº†ç¨‹åºåˆ° JDBC ç®¡ç†å™¨çš„è¿æ¥ã€‚</li>\n<li><strong> <code>JDBC Driver API</code> </strong>ï¼šå³é¢å‘æ•°æ®åº“é©±åŠ¨çš„ APIï¼Œéœ€è¦<strong>å¼€å‘å•†</strong>å»å®ç°è¿™ä¸ªæ¥å£ï¼Œæä¾›äº† JDBC ç®¡ç†å™¨åˆ°æ•°æ®åº“é©±åŠ¨ç¨‹åºçš„è¿æ¥ã€‚<br />\næˆ‘ä»¬è¦ä½¿ç”¨çš„ä¸»è¦å°±æ˜¯ä¸‹é¢å››ä¸ªæ ¸å¿ƒç±»ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">DriverManager</span>ç±»<span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>DriverManager</span><span class=\"token punctuation\">)</span>ï¼š ç”¨äºæ³¨å†Œé©±åŠ¨ï¼Œåˆ›å»ºè¿æ¥å¯¹è±¡ã€‚</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Connection</span>æ¥å£<span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>Connection</span><span class=\"token punctuation\">)</span>ï¼š     è¡¨ç¤ºä¸æ•°æ®åº“åˆ›å»ºçš„è¿æ¥ã€‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Statement</span>æ¥å£<span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>Statement</span><span class=\"token punctuation\">)</span>ï¼š       æ‰§è¡Œæ•°æ®åº“SQLè¯­å¥ï¼Œå¹¶è¿”å›ç›¸åº”ç»“æœçš„å¯¹è±¡ã€‚</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">ResultSet</span>æ¥å£<span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>ResultSet</span><span class=\"token punctuation\">)</span>ï¼š       ç»“æœé›†æˆ–ä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œç”¨äºå­˜å‚¨è¡¨æ•°æ®çš„å¯¹è±¡ã€‚</pre></td></tr></table></figure><p>ç„¶å JDBC æ“ä½œæ•°æ®åº“çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åŠ è½½é©±åŠ¨</li>\n<li>åˆ›å»ºæ•°æ®åº“è¿æ¥</li>\n<li>åˆ›å»º sql è¯­å¥å¹¶æ‰§è¡Œ</li>\n<li>å¤„ç†æ‰§è¡Œç»“æœ</li>\n<li>é‡Šæ”¾èµ„æº</li>\n</ol>\n<h2 id=\"å®æ“\"><a class=\"anchor\" href=\"#å®æ“\">#</a> å®æ“</h2>\n<p>è¯´äº†é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬ç®€å•çš„ä¸Šæ‰‹ä¸€ä¸‹ï¼Œè¿™ä¸ªæµç¨‹æˆ‘ç›¸ä¿¡å¤§å®¶è‚¯å®šéƒ½ç°å¸¸ç†Ÿæ‚‰ï½</p>\n<ol>\n<li>æ•°æ®è¡¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„æ•°æ®åº“æ˜¯ <code>database_Learn</code>  åˆ›å»ºä¸€ä¸ªè¡¨ <code>users</code></li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>users<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">INT</span>    <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>age<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">INT</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>gender<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> users<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> gender<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'å¼ ä¸‰'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ç”·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'æå››'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ç”·'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'ç›å¥‡ç›'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'å¥³'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>åˆ›å»ºä¸€ä¸ª maven é¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>mysql<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mysql-connector-java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>8.0.25<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"3\">\n<li>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JDBCTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * ä½¿ç”¨ Jdbc è®¿é—®æ•°æ®åº“éœ€è¦ä»¥ä¸‹å‡ æ­¥:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * 1. åŠ è½½é©±åŠ¨</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * 2. åˆ›å»ºæ•°æ®åº“è¿æ¥</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * 3. åˆ›å»º sql è¯­å¥å¹¶æ‰§è¡Œ</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * 4. å¤„ç†æ‰§è¡Œç»“æœ</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * 5. é‡Šæ”¾èµ„æº</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">String</span> URL <span class=\"token operator\">=</span> <span class=\"token string\">\"jdbc:mysql://127.0.0.1:3306/database_Learn?characterEncoding=utf-8\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">String</span> USER <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">String</span> PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">Connection</span> conn <span class=\"token operator\">=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">PreparedStatement</span> statement <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">ResultSet</span> rs <span class=\"token operator\">=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token comment\">// 1. åŠ è½½é©±åŠ¨ç¨‹åº</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.cj.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token comment\">// 2. è·å¾—æ•°æ®åº“é“¾æ¥</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            conn <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>URL<span class=\"token punctuation\">,</span> USER<span class=\"token punctuation\">,</span> PASSWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">// 3. é€šè¿‡æ•°æ®åº“çš„è¿æ¥æ“ä½œæ•°æ®åº“ï¼Œå®ç°å¢åˆ æ”¹æŸ¥ï¼ˆä½¿ç”¨ Statement ç±»ï¼‰</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token class-name\">String</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"ç›å¥‡ç›\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token class-name\">String</span> sql<span class=\"token operator\">=</span><span class=\"token string\">\"select * from users where name=?\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            statement <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">prepareStatement</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            statement<span class=\"token punctuation\">.</span><span class=\"token function\">setString</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            rs <span class=\"token operator\">=</span> statement<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token comment\">// 4. å¤„ç†æ•°æ®åº“çš„è¿”å›ç»“æœ (ä½¿ç”¨ ResultSet ç±»)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassNotFoundException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">finally</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token comment\">// 5. å…³é—­èµ„æº</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>conn<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token keyword\">try</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                    conn<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                    rs<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                    statement<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">chageUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token class-name\">String</span> URL <span class=\"token operator\">=</span> <span class=\"token string\">\"jdbc:mysql://127.0.0.1:3306/database_Learn?characterEncoding=utf-8\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token class-name\">String</span> USER <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token class-name\">String</span> PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token class-name\">Connection</span> conn <span class=\"token operator\">=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token class-name\">PreparedStatement</span> statement <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>            <span class=\"token comment\">// 1. åŠ è½½é©±åŠ¨ç¨‹åº</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.cj.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token comment\">// 2. è·å¾—æ•°æ®åº“é“¾æ¥</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            conn <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>URL<span class=\"token punctuation\">,</span> USER<span class=\"token punctuation\">,</span> PASSWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>            <span class=\"token comment\">// 3. é€šè¿‡æ•°æ®åº“çš„è¿æ¥æ“ä½œæ•°æ®åº“ï¼Œå®ç°å¢åˆ æ”¹æŸ¥ï¼ˆä½¿ç”¨ Statement ç±»ï¼‰</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>            <span class=\"token class-name\">String</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"è•¾å¡\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>            <span class=\"token keyword\">int</span> age <span class=\"token operator\">=</span> <span class=\"token number\">21</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>            <span class=\"token class-name\">String</span> gender <span class=\"token operator\">=</span> <span class=\"token string\">\"å¥³\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token class-name\">String</span> sql<span class=\"token operator\">=</span><span class=\"token string\">\"insert into users(`name`,`age`,`gender`) values(?,?,?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>            statement <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">prepareStatement</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>            statement<span class=\"token punctuation\">.</span><span class=\"token function\">setString</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            statement<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>            statement<span class=\"token punctuation\">.</span><span class=\"token function\">setString</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>gender<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>            statement<span class=\"token punctuation\">.</span><span class=\"token function\">executeUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassNotFoundException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">finally</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>            <span class=\"token comment\">// 5. å…³é—­èµ„æº</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>conn<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>                <span class=\"token keyword\">try</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>                    conn<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>                    statement<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        <span class=\"token function\">getUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        <span class=\"token function\">chageUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åä½ ç°åœ¨çœ‹åˆ°äº†ï¼Œä½ æ¯æ¬¡æ“ä½œæ•°æ®åº“éƒ½è¦é‡å¤ 1-5 è¿™äº›æ­¥éª¤ï¼Œè€Œæˆ‘ä»¬æ¯æ¬¡å…¶å®åªæœ‰æ­¥éª¤ 3 å’Œæ­¥éª¤ 4 æ˜¯ä¸åŒçš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯é‡å¤æ­¥éª¤ï¼è¿™æ—¶å€™ä½ å¯èƒ½ä¼šè¯´ï¼Œå‘µæˆ‘ç”¨ä¸€ä¸ªå…¬å…±ç±»æˆ–è€…å…¬å…±æ–¹æ³•æŠŠè¿™äº›æ­¥éª¤å°è£…ä¸€ä¸‹ä¸å°±è¡Œäº†ï¼Ÿå¥½ï¼Œé‚£æˆ‘ä»¬æ¥è¯´è¯´ä½ çš„è¿™ä¸ªæ€è·¯å¯èƒ½ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>\n<ol>\n<li>å¦‚æœæˆ‘æŠŠ <code>Connection</code>  è®¾ç½®ä¸ºå…¨å±€å˜é‡ï¼Œæ¯æ¬¡æˆ‘éƒ½ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ï¼Œé‚£ä¹ˆä½ è¿™ä¸ªåº”ç”¨ç¨‹åºæ˜¯æ‰“ç®—æ°¸è¿œéƒ½åªä¼šæœ‰ä¸€ä¸ªäººä½¿ç”¨å—ï¼Ÿå¦‚æœè¯·æ±‚å¤šäº†ï¼Œè€Œè¿™ä¸ª <code>Connection</code>  è¿æ¥è¿˜æ²¡æœ‰å¤„ç†å®Œä¹‹å‰çš„è¯·æ±‚æ˜¯ä¸æ˜¯å°±è¦æ’é˜Ÿç­‰å¾…ï¼Ÿ</li>\n<li><code>ResultSet</code>  è®¾ç½®ä¸ºå…¨å±€æ€»è¡Œäº†å§ï¼Ÿä¸è¡Œã€‚å¦‚æœä½ æ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºä¸åŒçš„ <code>Connection</code> ï¼Œè€Œ <code>ResultSet</code>  ç”¨åŒä¸€ä¸ªï¼Œå°±ä¼šå¯¼è‡´åœ¨å¤šä¸ªè¯·æ±‚çš„æƒ…å†µä¸‹æœ‰çš„è¯·æ±‚çš„ç»“æœä¸¢å¤±ï¼</li>\n<li>è¿™ä¸ªåŸå› å½“ç„¶æ˜¯åè¯äº†ï¼Œå·²ç»æœ‰æ¡†æ¶å¸®æˆ‘ä»¬è§£å†³é‡å¤å»ºç«‹å’Œé‡Šæ”¾è¿æ¥çš„é—®é¢˜äº†ï¼Œä½ èƒ½ä¿è¯ä½ è‡ªå·±é€ çš„è½®å­æ¯”äººå®¶çš„å¥½å˜›ï¼Ÿ</li>\n</ol>\n<h1 id=\"jdbctemplate\"><a class=\"anchor\" href=\"#jdbctemplate\">#</a> JDBCTemplate</h1>\n<p><code>JDBCTemplate</code>  æ˜¯ <code>Spring</code>  æä¾›è®¿é—® <code>JDBC</code>  çš„ä¸€ä¸ªæ¨¡æ¿ï¼Œç›®çš„æ˜¯ä½¿ <code>JDBC</code>  æ›´åŠ æ˜“äºä½¿ç”¨ã€‚ <code>JDBCTemplate</code>  å¤„ç†äº†èµ„æºçš„å»ºç«‹å’Œé‡Šæ”¾ï¼Œå¸®åŠ©æˆ‘ä»¬é¿å…ä¸€äº›å¸¸è§çš„é”™è¯¯ï¼Œæ¯”å¦‚å¿˜äº†æ€»è¦å…³é—­è¿æ¥ï¼Œç¨‹åºå‘˜åªéœ€è¦æä¾› SQL è¯­å¥å’Œæå–ç»“æœã€‚<br />\nå› ä¸ºæ˜¯ <code>Spring</code>  æä¾›çš„ï¼Œæˆ‘çŸ¥é“å¤§å®¶ç”¨ <code>SpringBoot</code>  å¤šï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³ä» <code>Spring</code>  ä½¿ç”¨ <code>JDBCTemplate</code>  å¼€å§‹è¯´èµ·ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™æ ·ä¼šç†è§£çš„æ›´æ·±åˆ»ä¸€äº›ã€‚<br />\né‚£ä¹ˆæˆ‘ä»¬å…ˆåœ¨ maven é¡¹ç›®ä¸­å¯¼å…¥ä»¥ä¸‹ä¾èµ–:</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-context<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.0.7.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.0.7.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-tx<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.0.7.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>mysql<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mysql-connector-java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>8.0.25<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"åˆè¯•\"><a class=\"anchor\" href=\"#åˆè¯•\">#</a> åˆè¯•</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>* JDBCTemplate æœ€åŸºç¡€çš„ç”¨æ³•</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>*/</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Demo1</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// å‡†å¤‡æ•°æ®æºï¼šspring çš„å†…ç½®æ•°æ®æº</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">DriverManagerDataSource</span> ds <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DriverManagerDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        ds<span class=\"token punctuation\">.</span><span class=\"token function\">setDriverClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.cj.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        ds<span class=\"token punctuation\">.</span><span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc:mysql://127.0.0.1:3306/database_Learn?characterEncoding=utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        ds<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        ds<span class=\"token punctuation\">.</span><span class=\"token function\">setPassword</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cljcljclj215\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»º JdbcTemplate å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">JdbcTemplate</span> jt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// ç»™ jt è®¾ç½®æ•°æ®æº</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        jt<span class=\"token punctuation\">.</span><span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span>ds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// 2. æ‰§è¡Œæ“ä½œ</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> jt<span class=\"token punctuation\">.</span><span class=\"token function\">queryForList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM users;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// è¾“å‡ºæŸ¥è¯¢ç»“æœ</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">:</span> list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰ä¹‹å‰ä½¿ç”¨ <code>JDBC</code>  çš„æ—¶å€™é‚£ä¹ˆå¤šçš„ä»£ç ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»º <code>JDBCTemplate</code>  ç„¶åç»™ä»–ä¸ª sql è¯­å¥å°±è¡Œäº†ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1z00f0v69j20de05eweh.jpg\" alt=\"\" height=\"200px\" /></p>\n<h2 id=\"jdbctemplateåœ¨springä¸­çš„ä½¿ç”¨\"><a class=\"anchor\" href=\"#jdbctemplateåœ¨springä¸­çš„ä½¿ç”¨\">#</a> JDBCTemplate åœ¨ Spring ä¸­çš„ä½¿ç”¨</h2>\n<h3 id=\"åŸºç¡€ä½¿ç”¨\"><a class=\"anchor\" href=\"#åŸºç¡€ä½¿ç”¨\">#</a> åŸºç¡€ä½¿ç”¨</h3>\n<p>é¦–å…ˆæˆ‘ä»¬è¦åœ¨ <code>resources</code>  ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª <code>testBean.xml</code>  æ–‡ä»¶æ¥é…ç½®ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/database_Learn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½® JdbcTemplate --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.core.JdbcTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å‘ dataSource æ³¨å…¥æ•°æ®æº --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥è¿™æ ·:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Demo2</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// 1. è·å–å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testBean.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// 2. è·å–å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">JdbcTemplate</span> jt <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">)</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbcTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// 3. æ‰§è¡Œæ“ä½œ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> maps <span class=\"token operator\">=</span> jt<span class=\"token punctuation\">.</span><span class=\"token function\">queryForList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM `users`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// è¾“å‡º</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">:</span> maps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åº”è¯¥ä¸éš¾ç†è§£å§ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“ Spring æœ‰ IOC æ§åˆ¶åè½¬ï¼Œå°±æ˜¯æŠŠ bean çš„åˆ›å»ºè¿‡ç¨‹äº¤ç»™ Spring å®¹å™¨æ¥å¤„ç†ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥è·Ÿ Spring å®¹å™¨æ‹¿å°±è¡Œäº†ã€‚</p>\n<h3 id=\"è¿›é˜¶\"><a class=\"anchor\" href=\"#è¿›é˜¶\">#</a> è¿›é˜¶</h3>\n<p>ä¸Šé¢çš„ç¤ºä¾‹æˆ‘ä»¬æ˜¯åˆ©ç”¨äº†ä¸€ä¸ª Map æ¥æ¥æ”¶æ•°æ®ï¼Œä½†æ˜¯å…¶å®æˆ‘ä»¬æ›´å¤šçš„éƒ½æ˜¯ç”¨å®ä½“æ¥æ¥æ”¶æ•°æ®çš„å§ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å°†æ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®å’Œå®ä½“ç±»ä¹‹é—´åˆ›å»ºä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚</p>\n<ol>\n<li>åˆ›å»ºå®ä½“ç±» Users</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Users</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> gender<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Users</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Users</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> gender<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> gender<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> age<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> gender<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setGender</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> gender<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> gender<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>åˆ›å»ºæ•°æ®åº“åˆ°å®ä½“ç±»çš„æ˜ å°„å…³ç³»</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UsersRowMapper</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">RowMapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Users</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Users</span> <span class=\"token function\">mapRow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSet</span> resultSet<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">Users</span> u <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Users</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        u<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>resultSet<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        u<span class=\"token punctuation\">.</span><span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span>resultSet<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        u<span class=\"token punctuation\">.</span><span class=\"token function\">setGender</span><span class=\"token punctuation\">(</span>resultSet<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> u<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>åˆ›å»ºä¸šåŠ¡æ¥å£å¹¶å®ç°å¯¹åº”çš„å®ç°ç±»</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">addUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Users</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ–°å¢ç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Users</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// è·å–æ‰€æœ‰ç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">JdbcTemplate</span> jdbcTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setJdbcTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jdbcTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Users</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"INSERT INTO `users`(`name`,`age`,`gender`) VALUES(?,?,?)\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span><span class=\"token class-name\">Types</span><span class=\"token punctuation\">.</span>VARCHAR<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Types</span><span class=\"token punctuation\">.</span>INTEGER<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Types</span><span class=\"token punctuation\">.</span>VARCHAR<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Users</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Users</span><span class=\"token punctuation\">></span></span> res <span class=\"token operator\">=</span> jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM `users`\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsersRowMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"4\">\n<li>åœ¨ <code>resources</code>  ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª <code>bean.xml</code></li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/database_Learn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½®ä¸šåŠ¡ bean --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.sprenedayf.service.impl.UserServiceImpl<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å‘ dataSource æ³¨å…¥æ•°æ®æº --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"5\">\n<li>ä½¿ç”¨</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Demo3</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// 1. è·å–å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bean.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// 2. è·å–å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">UserService</span> service <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UserService</span><span class=\"token punctuation\">)</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UserService\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// 3. æ‰§è¡Œæ“ä½œ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Users</span><span class=\"token punctuation\">></span></span> users <span class=\"token operator\">=</span> service<span class=\"token punctuation\">.</span><span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Users</span> user <span class=\"token operator\">:</span> users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"åŸç†\"><a class=\"anchor\" href=\"#åŸç†\">#</a> åŸç†</h2>\n<h3 id=\"æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ä¸å›è°ƒæœºåˆ¶\"><a class=\"anchor\" href=\"#æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ä¸å›è°ƒæœºåˆ¶\">#</a> æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ä¸å›è°ƒæœºåˆ¶</h3>\n<p>åœ¨æˆ‘ä»¬çœ‹ <code>JDBCTemplate</code>  æºç ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹æ¨¡æ¿è®¾è®¡æ¨¡å¼ã€‚åœ¨ JDBC ä¸­ä¸å˜çš„éƒ¨åˆ†æ˜¯åˆ›å»ºè¿æ¥å’Œé”€æ¯è¿æ¥çš„éƒ¨åˆ†ï¼Œæ”¹å˜çš„éƒ¨åˆ†æ˜¯ä¸­é—´çš„ sql æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å¯ä»¥å°†ä¸å˜çš„éƒ¨åˆ†ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œåªéœ€è¦å…³æ³¨å…¶ä¸­è¦å˜çš„éƒ¨åˆ†ã€‚æ¨¡æ¿è®¾è®¡æ¨¡å¼å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h4 id=\"æ¨¡æ¿è®¾è®¡æ¨¡å¼\"><a class=\"anchor\" href=\"#æ¨¡æ¿è®¾è®¡æ¨¡å¼\">#</a> æ¨¡æ¿è®¾è®¡æ¨¡å¼</h4>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1z3k6fidtj20b808174s.jpg\" alt=\"\" height=\"400px\" /><br />\næ¨¡æ¿è®¾è®¡æ¨¡å¼æ˜¯æŒ‡åœ¨ä¸€ä¸ªçˆ¶ç±»æ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œå°†æŸäº›æ­¥éª¤æ¨è¿Ÿåˆ°å­ç±»ä¸­å®ç°ï¼Œè¿™æ ·å¯ä»¥<span class=\"yellow\">è®©å­ç±»åœ¨ä¸æ”¹å˜ç®—æ³•æ•´ä½“çš„ç»“æ„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤</span>ã€‚<br />\næœ‰ç‚¹æŠ½è±¡ï¼Œä¸æ˜ç™½ï¼Ÿæˆ‘ä»¬æ¥ä¸¾ä¸ªç®€å•çš„ä¾‹å­ç«‹é©¬å°±æ¸…æ¥šäº†ï½æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸ªæ¸¸æˆæœ‰ä¸¤ä¸ªç»“å±€ï¼Œä¸€ä¸ªæ˜¯ HE ä¸€ä¸ªæ˜¯ BEï¼Œå¥³ä¸»å’Œæˆ‘ä»¬è¯´çš„è¯æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ ¹æ®æˆ‘ä»¬çš„é€‰æ‹©ä¼šäº§ç”Ÿä¸åŒçš„ç»“å±€ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æŠŠé€šç”¨çš„å‰§æƒ…ç”¨ä¸€ä¸ªç±» <code>NormalDraft</code>  æ¥ä¿å­˜ï¼Œç„¶åä¸åŒçš„ç»“å±€å°±ç»§æ‰¿è¿™ä¸ª <code>NormalDraft</code>  ç±»æ¥åˆ†åˆ«å®ç°ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span>  <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NormalDraft</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å¸¸è§„é€šç”¨å‰§æƒ…  </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">templateDraft</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// å¥³ä¸»ï¼šä¸å¯ä»¥ç•™ä¸‹æ¥å—ï¼Ÿ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token function\">method1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// å¥³ä¸»ï¼šæˆ‘çŸ¥é“</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token function\">method2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HappyEnding</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">NormalDraft</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æˆ‘æƒ³æˆ‘ä»¬å¯ä»¥å›å®¶äº†ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å½“ç„¶ï¼Œæˆ‘æ‰€åšçš„è¿™ä¸€åˆ‡å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿç•™åœ¨è¿™é‡Œï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BadEnding</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">NormalDraft</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æˆ–è®¸å½“è¿™ä¸ªä¸–ç•Œä¸Šæ²¡æœ‰å°æ€ªå…½çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šå›æ¥äº†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸è¡Œï¼Œä½œä¸ºå…‰çš„åŒ–èº«ï¼Œæˆ‘è¦å»æ‹¯æ•‘å…¨ä¸–ç•Œï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> game <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">// æœ¬äººå”¯çˆ± BEï¼Œæ‰€ä»¥å½“ç„¶è¦èµ° BE çº¿äº†ï¼ï¼ï¼</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">NormalDraft</span> draft <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BadEnding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        draft<span class=\"token punctuation\">.</span><span class=\"token function\">templateDraft</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š<span class=\"yellow\">æŠ½è±¡æ¨¡æ¿ç±»å®šä¹‰äº†ä¸€å¥—å·¥ä½œæµç¨‹ï¼Œè€Œå…·ä½“å®ç°ç±»å¯¹å·¥ä½œæµç¨‹ä¸­çš„æŸäº›ç‰¹å®šæ­¥éª¤è¿›è¡Œäº†å®ç°</span></p>\n<h4 id=\"å›è°ƒæœºåˆ¶\"><a class=\"anchor\" href=\"#å›è°ƒæœºåˆ¶\">#</a> å›è°ƒæœºåˆ¶</h4>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1zn2wu3gyj20fc06o0sz.jpg\" alt=\"\" height=\"350px\" /><br />\nä»€ä¹ˆæ˜¯å›è°ƒï¼Ÿç°åœ¨æœ‰ä¸¤ä¸ªç±» A å’Œ B ï¼ŒA è°ƒç”¨ Bï¼ŒB åè¿‡æ¥åˆè°ƒç”¨ Aï¼Œè¿™ç§è°ƒç”¨æœºåˆ¶å°±å«ä½œ â€œå›è°ƒâ€ã€‚åœ¨ Java ä¸­éœ€è¦ä½¿ç”¨å›è°ƒå‡½æ•°çš„ç±»å¯¹è±¡æ¥å®ç°ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ICallback</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">methodToCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BClass</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ICallback</span> callback<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// å‰ç½®é€šç”¨ä»£ç </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        callback<span class=\"token punctuation\">.</span><span class=\"token function\">methodToCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç›¸å½“äºæ˜¯æ‰§è¡Œäº† AClass ä¸­å®šä¹‰çš„ä»£ç é€»è¾‘</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// åç½®é€šç”¨ä»£ç </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AClass</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">BClass</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        b<span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ICallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  <span class=\"token comment\">// å›è°ƒå¯¹è±¡</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">methodToCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Call back me.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token comment\">// ç»§ç»­æ‰§è¡Œ AClass çš„åç»­ä»£ç </span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"æ¨¡æ¿æ¨¡å¼-vs-å›è°ƒ\"><a class=\"anchor\" href=\"#æ¨¡æ¿æ¨¡å¼-vs-å›è°ƒ\">#</a> æ¨¡æ¿æ¨¡å¼ VS å›è°ƒ</h4>\n<ul>\n<li>ä»åº”ç”¨åœºæ™¯ä¸Šæ¥çœ‹ï¼Œ<strong>åŒæ­¥å›è°ƒè·Ÿæ¨¡æ¿æ¨¡å¼å‡ ä¹ä¸€è‡´</strong>ã€‚å®ƒä»¬éƒ½æ˜¯åœ¨ä¸€ä¸ªå¤§çš„ç®—æ³•éª¨æ¶ä¸­ï¼Œè‡ªç”±æ›¿æ¢å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ï¼Œèµ·åˆ°ä»£ç å¤ç”¨å’Œæ‰©å±•çš„ç›®çš„ã€‚è€Œå¼‚æ­¥å›è°ƒè·Ÿæ¨¡æ¿æ¨¡å¼æœ‰è¾ƒå¤§å·®åˆ«ï¼Œæ›´åƒæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚</li>\n<li>ä»ä»£ç å®ç°ä¸Šæ¥çœ‹ï¼Œå›è°ƒå’Œæ¨¡æ¿æ¨¡å¼å®Œå…¨ä¸åŒã€‚<strong>å›è°ƒåŸºäºç»„åˆå…³ç³»</strong>æ¥å®ç°ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ç§å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼›<strong>æ¨¡æ¿æ¨¡å¼åŸºäºç»§æ‰¿å…³ç³»</strong>æ¥å®ç°ï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç±»ä¹‹é—´çš„å…³ç³»ã€‚</li>\n<li>å›è°ƒç›¸å¯¹äºæ¨¡æ¿æ¨¡å¼ä¼šæ›´åŠ çµæ´»ï¼š\n<ul>\n<li>åƒ Java è¿™ç§åªæ”¯æŒå•ç»§æ‰¿çš„è¯­è¨€ï¼ŒåŸºäºæ¨¡æ¿æ¨¡å¼ç¼–å†™çš„å­ç±»ï¼Œå·²ç»ç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸å†å…·æœ‰ç»§æ‰¿çš„èƒ½åŠ›ã€‚</li>\n<li>å›è°ƒå¯ä»¥ä½¿ç”¨åŒ¿åç±»æ¥åˆ›å»ºå›è°ƒå¯¹è±¡ï¼Œå¯ä»¥ä¸ç”¨äº‹å…ˆå®šä¹‰ç±»ï¼›è€Œæ¨¡æ¿æ¨¡å¼é’ˆå¯¹ä¸åŒçš„å®ç°éƒ½è¦å®šä¹‰ä¸åŒçš„å­ç±»ã€‚</li>\n<li>å¦‚æœæŸä¸ªç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰å¯¹åº”çš„æŠ½è±¡æ–¹æ³•ï¼Œé‚£å³ä¾¿æˆ‘ä»¬åªç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»ä¹Ÿå¿…é¡»å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"queryæ–¹æ³•\"><a class=\"anchor\" href=\"#queryæ–¹æ³•\">#</a> query æ–¹æ³•</h3>\n<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¤§ä½¬ç”»å¾—æ—¶åºå›¾æˆ‘è§‰å¾—éå¸¸ç›´è§‚ï¼Œå¯ä»¥åœ¨åé¢æˆ‘è¯´å®Œæºç ä¹‹åå›æ¥çœ‹ä¸€ä¸‹ï¼Œåº”è¯¥å¾ˆå¥½ç†è§£ï¼š<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1z2eyvy4ij20xc0or40z.jpg\" alt=\"\" /></p>\n<ol>\n<li><strong>query æ–¹æ³•</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Nullable</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ResultSetExtractor</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> rse<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DataAccessException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token string\">\"SQL must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>rse<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ResultSetExtractor must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Executing SQL query [\"</span> <span class=\"token operator\">+</span> sql <span class=\"token operator\">+</span> <span class=\"token string\">\"]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// å®šä¹‰çš„å›è°ƒç±»ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œç„¶åå°† ResultSet å…³é—­</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">QueryStatementCallback</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">StatementCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SqlProvider</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">QueryStatementCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token annotation punctuation\">@Nullable</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">doInStatement</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token class-name\">ResultSet</span> rs <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token class-name\">Object</span> var3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                rs <span class=\"token operator\">=</span> stmt<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                var3 <span class=\"token operator\">=</span> rse<span class=\"token punctuation\">.</span><span class=\"token function\">extractData</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token class-name\">JdbcUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">closeResultSet</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">return</span> var3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getSql</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">return</span> sql<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">// è¿™é‡Œå°±æ˜¯æ ¹æ®ä¸åŒçš„å›è°ƒæ–¹æ³•æ¥å®ç°ä¸åŒçš„æ“ä½œ</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatementCallback</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryStatementCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>execute æ–¹æ³•</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Nullable</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatementCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> action<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DataAccessException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Callback object must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// è·å– DataSource æ•°æ®åº“è¿æ¥</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Connection</span> con <span class=\"token operator\">=</span> <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">obtainDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">Statement</span> stmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">Object</span> var11<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        stmt <span class=\"token operator\">=</span> con<span class=\"token punctuation\">.</span><span class=\"token function\">createStatement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">applyStatementSettings</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span><span class=\"token function\">doInStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ‰§è¡Œ query ä¸­å®šä¹‰çš„ QueryStatementCallback çš„ doInStatement ä»£ç </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleWarnings</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        var11 <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> var9<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token function\">getSql</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">JdbcUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">closeStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        stmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        con <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">translateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StatementCallback\"</span><span class=\"token punctuation\">,</span> sql<span class=\"token punctuation\">,</span> var9<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span>  <span class=\"token comment\">// å…³é—­ Connection å’Œ Statement</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">JdbcUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">closeStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">return</span> var11<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ‰§è¡Œå®Œè¿™ä¸€å¥åè¿”å›åˆ° query æ–¹æ³•ä¸­ç»§ç»­æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å°±è¿™ä¹ˆç‚¹æ ¸å¿ƒä»£ç äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿæ‹ä¸€ä¸‹å…¶å®å°±æ˜¯ï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢æ“ä½œæœ€ç»ˆéƒ½æ˜¯è¦é€šè¿‡ <code>query</code>  æ–¹æ³•æ¥æ‰§è¡Œï¼Œ <code>query</code>  æ–¹æ³•ä¸­å®šä¹‰äº†ä¸€ä¸ªå›è°ƒç±»ï¼Œè¿™ä¸ªå›è°ƒç±»ä¸»è¦æ“ä½œå°±æ˜¯å®šä¹‰ <code>ResultSet</code> ï¼Œæ‰§è¡Œ <code>sql</code>  æŸ¥è¯¢ï¼Œé‡Šæ”¾ <code>ResultSet</code> ï¼›æˆ‘ä»¬éƒ½çŸ¥é“ <code>JDBC</code>  æ“ä½œä¸­ <code>Connection</code>  å’Œ <code>Statement</code>  éƒ½æ˜¯é‡å¤çš„ï¼Œåªæœ‰ <code>ResultSet</code>  æ˜¯å˜åŒ–çš„ï¼Œæ‰€ä»¥åœ¨ <code>execute</code>  æ–¹æ³•ä¸­å°±æ˜¯æ¥è·å–å’Œé‡Šæ”¾ <code>Connection</code>  å’Œ <code>Statement</code>  çš„ï¼›é€šè¿‡ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå°†è·å–åˆ°çš„ <code>statement</code>  ä¼ å…¥ç„¶åæ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œ <code>execute</code>  æ–¹æ³•å¸®æˆ‘ä»¬å®Œæˆé‡Šæ”¾è¿æ¥çš„æ“ä½œï¼Œç›¸å½“äºæ˜¯æˆ‘ä»¬åªéœ€è¦å…³å¿ƒ <code>sql</code>  é€»è¾‘å³å¯ï¼Œæ˜¯ä¸æ˜¯æ–¹ä¾¿å¾ˆå¤šå•¦ï¼Ÿ<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1zntsdbtbj20b70bs74r.jpg\" alt=\"\" height=\"150px\" /></p>\n<h3 id=\"updateæ–¹æ³•\"><a class=\"anchor\" href=\"#updateæ–¹æ³•\">#</a> update æ–¹æ³•</h3>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1zos42of2j20sg0p3wgw.jpg\" alt=\"\" /></p>\n<ol>\n<li><strong>update æ–¹æ³•</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> sql<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DataAccessException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token string\">\"SQL must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Executing SQL update [\"</span> <span class=\"token operator\">+</span> sql <span class=\"token operator\">+</span> <span class=\"token string\">\"]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// å›è°ƒç±»</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">UpdateStatementCallback</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">StatementCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SqlProvider</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">UpdateStatementCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">doInStatement</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">int</span> rows <span class=\"token operator\">=</span> stmt<span class=\"token punctuation\">.</span><span class=\"token function\">executeUpdate</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ä¿®æ”¹äº†å¤šå°‘æ¡</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">isDebugEnabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SQL update affected \"</span> <span class=\"token operator\">+</span> rows <span class=\"token operator\">+</span> <span class=\"token string\">\" rows\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> rows<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getSql</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">return</span> sql<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">updateCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatementCallback</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UpdateStatementCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>execute æ–¹æ³•</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Nullable</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatementCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> action<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DataAccessException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Assert</span><span class=\"token punctuation\">.</span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Callback object must not be null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// è·å– DataSource æ•°æ®åº“è¿æ¥</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Connection</span> con <span class=\"token operator\">=</span> <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">obtainDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">Statement</span> stmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">Object</span> var11<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        stmt <span class=\"token operator\">=</span> con<span class=\"token punctuation\">.</span><span class=\"token function\">createStatement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">applyStatementSettings</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span><span class=\"token function\">doInStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ‰§è¡Œ update ä¸­å®šä¹‰çš„ UpdateStatementCallback çš„ doInStatement ä»£ç </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleWarnings</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        var11 <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> var9<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token function\">getSql</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">JdbcUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">closeStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        stmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        con <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">translateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StatementCallback\"</span><span class=\"token punctuation\">,</span> sql<span class=\"token punctuation\">,</span> var9<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span>  <span class=\"token comment\">// å…³é—­ Connection å’Œ Statement</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">JdbcUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">closeStatement</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">DataSourceUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">return</span> var11<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ‰§è¡Œå®Œè¿™ä¸€å¥åè¿”å›åˆ° update æ–¹æ³•ä¸­ç»§ç»­æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å‘ç°æ²¡æœ‰ï¼Œå…¶å®è¿™éƒ½æ˜¯åŒä¸€æ®µ <code>execute</code>  ä»£ç å•Šï¼æ­£å¼å› ä¸ºä¼ å…¥çš„ <code>callback</code>  ä¸åŒæ‰€ä»¥æ‰æ‰§è¡Œäº†ä¸åŒçš„æ“ä½œï¼Œå®ç°äº† <code>execute</code>  ä»£ç çš„å¤ç”¨ï¼å¦™å•Šï¼<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1zosqx69mj205i05faa0.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"è¿æ¥æ± \"><a class=\"anchor\" href=\"#è¿æ¥æ± \">#</a> è¿æ¥æ± </h1>\n<p>å¥½çš„ï¼Œ <code>JDBCTemplate</code>  å¸®æˆ‘ä»¬è§£å†³äº†ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜å‘€ï¼Œæˆ‘ä»¬é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥çœŸçš„å¾ˆæ²¡æœ‰å¿…è¦æœ‰æ²¡æœ‰ï¼æ˜æ˜æˆ‘æŸ¥è¯¢ä¸ªæ•°æ®å¯èƒ½åªè¦ 10ms çš„æ—¶é—´ï¼Œä½†æ˜¯æˆ‘åˆ›å»ºå’Œé”€æ¯è¿æ¥å´å¯èƒ½éœ€è¦ 100ms çš„æ—¶é—´ï¼Œå¾—ä¸å¿å¤±å•Šï¼æ‰€ä»¥è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„è¿æ¥æ± äº†ï¼</p>\n<div class=\"note info no-icon\">\n<p>æ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åº<strong>é‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥</strong>ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ªï¼›é‡Šæ”¾ç©ºé—²æ—¶é—´è¶…è¿‡æœ€å¤§ç©ºé—²æ—¶é—´çš„æ•°æ®åº“è¿æ¥æ¥é¿å…å› ä¸ºæ²¡æœ‰é‡Šæ”¾æ•°æ®åº“è¿æ¥è€Œå¼•èµ·çš„æ•°æ®åº“è¿æ¥é—æ¼ã€‚</p>\n</div>\n<h2 id=\"c3p0\"><a class=\"anchor\" href=\"#c3p0\">#</a> C3P0</h2>\n<ol>\n<li>å¯¼å…¥ä¾èµ–</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- c3p0 è¿æ¥æ± ä¾èµ– --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>c3p0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>c3p0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.9.1.2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.mchange<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mchange-commons-java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.2.11<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"2\">\n<li>ç¼–å†™é…ç½® xml æ–‡ä»¶</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mchange.v2.c3p0.ComboPooledDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcUrl<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/database_Learn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½® JdbcTemplate --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.core.JdbcTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å‘ dataSource æ³¨å…¥æ•°æ®æº --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"3\">\n<li>æµ‹è¯•</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Demo4</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// 1. è·å–å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testC3P0.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// 2. è·å–å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">JdbcTemplate</span> jt <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">)</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbcTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// 3. æ‰§è¡Œæ“ä½œ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> maps <span class=\"token operator\">=</span> jt<span class=\"token punctuation\">.</span><span class=\"token function\">queryForList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM `users`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// è¾“å‡º</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">:</span> maps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šçš„è¾“å‡ºæ—¥å¿—ï¼Œé‡Œé¢è¿™äº›å‚æ•°éƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼Œå¯ä»¥è‡ªå·±æ¢ç´¢ä¸€ä¸‹<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1zw1oxsxbj226409mdn6.jpg\" alt=\"\" /></p>\n<h2 id=\"druid\"><a class=\"anchor\" href=\"#druid\">#</a> Druid</h2>\n<p>è¯´èµ·è¿æ¥æ± æ„Ÿè§‰æ›´ç†Ÿæ‚‰çš„è¿˜æ˜¯ Druid å§ï¼Œè¿™é‡Œä¾ç„¶æ˜¯å…ˆç»™ä¸ªç®€å•çš„ä¸Šæ‰‹ç¤ºä¾‹ï¼š</p>\n<ol>\n<li>å¯¼å…¥ä¾èµ–</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.alibaba<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>druid<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"2\">\n<li>é…ç½® xml æ–‡ä»¶</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.alibaba.druid.pool.DruidDataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>init<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>close<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å…¶å® driverClassName å¯é…å¯ä¸é…ï¼Œå¯ä»¥æ ¹æ® url è‡ªåŠ¨åŒ¹é… --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/database_Learn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cljcljclj215<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å±æ€§ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ«åçš„æ–¹å¼é…ç½®æ‰©å±•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ï¼šç›‘æ§ç»Ÿè®¡ç”¨çš„ filter:statã€æ—¥å¿—ç”¨çš„ filter:log4jã€é˜²å¾¡ sql æ³¨å…¥çš„ filter:wall --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>filters<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stat<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">&lt;!-- æœ€å¤§è¿æ¥æ± æ•°é‡ --></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxActive<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">&lt;!-- åˆå§‹åŒ–æ—¶å»ºç«‹ç‰©ç†è¿æ¥çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å‘ç”Ÿåœ¨æ˜¾ç¤ºè°ƒç”¨ init æ–¹æ³•ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡ getConnection () æ—¶ --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>initialSize<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">&lt;!-- è·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxWait<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">&lt;!-- æœ€å°è¿æ¥æ± æ•°é‡ --></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>minIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>timeBetweenEvictionRunsMillis<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>60000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>minEvictableIdleTimeMillis<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>300000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testWhileIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testOnBorrow<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testOnReturn<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">&lt;!-- æ˜¯å¦ç¼“å­˜ preparedStatementï¼Œä¹Ÿå°±æ˜¯ PSCacheã€‚PSCache å¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´ oracleã€‚åœ¨ mysql ä¸‹å»ºè®®å…³é—­ --></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>poolPreparedStatements<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxOpenPreparedStatements<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>asyncInit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½® JdbcTemplate --></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.core.JdbcTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å‘ dataSource æ³¨å…¥æ•°æ®æº --></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"3\">\n<li>æµ‹è¯•</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Demo5</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// 1. è·å–å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testDruid.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// 2. è·å–å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">JdbcTemplate</span> jt <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">)</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbcTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// 3. æ‰§è¡Œæ“ä½œ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> maps <span class=\"token operator\">=</span> jt<span class=\"token punctuation\">.</span><span class=\"token function\">queryForList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM `users`\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// è¾“å‡º</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">:</span> maps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\" \"</span><span class=\"token operator\">+</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åæ¥çœ‹çœ‹è¿æ¥æ± çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆå§ï¼Ÿ<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1zwqm0cfhj21080ommzc.jpg\" alt=\"\" /><br />\næœ¬è´¨ä¸Šå°±æ˜¯å›¾ä¸Šè¿™ä¸ªæµç¨‹ï¼Œå…·ä½“çš„æ€ä¹ˆåˆ›å»ºå’Œæ€ä¹ˆå›æ”¶çš„åœ¨ç°é˜¶æ®µæš‚ä¸åšäº†è§£ï¼Œæ˜ç™½ç°åœ¨è¿™äº›å°±å¯ä»¥å•¦ï½</p>\n<h1 id=\"æ€»ç»“\"><a class=\"anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h1>\n<p>è¿™ç¯‡ä¸»è¦è®²äº†ä¸€äº›ç¨å¾®åŸºç¡€çš„æ•°æ®åº“æ“ä½œæ–¹æ³•ï¼Œå¯èƒ½ç°åœ¨é¡¹ç›®ä¸­æ›´å¤šçš„éƒ½æ˜¯åˆ©ç”¨ ORM æ¡†æ¶ï¼Œä½†æ˜¯åœ¨æˆ‘æ•´ç†æ€»ç»“è¿™ç¯‡æ–‡ç« çš„æ—¶å€™è¿˜æ˜¯æ”¶è·äº†å¾ˆå¤šä¸œè¥¿çš„ï¼Œæ€»ç®—æ˜¯ç†æ¸…äº†è¿™äº›æ•°æ®åº“æ“ä½œæ–¹æ³•ä¹‹é—´çš„å…³ç³»å’ŒåŒºåˆ«ï¼Œè€Œä¸”å¯¹å…¶ä¸­çš„è®¾è®¡æ€æƒ³ä¹Ÿæ¸…æ¥šäº†å¾ˆå¤šï½</p>\n<ul>\n<li>JDBC æ˜¯æˆ‘ä»¬æœ€åŸå§‹çš„æ“ä½œæ•°æ®åº“çš„æ–¹å¼ï¼Œæ¯æ¬¡éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºã€é”€æ¯è¿æ¥</li>\n<li>è¿æ¥æ± æ˜¯ä¸ºäº†è§£å†³é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥å¸¦æ¥çš„æŸè€—ï¼Œå°†æ•°æ®åº“è¿æ¥ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œå…¶å® Java ä¸­çš„å„ç§æ± å­åŸºæœ¬ä¸Šéƒ½æ˜¯å¹²è¿™ä¸ªçš„ï¼Œç»Ÿä¸€ç®¡ç†ï½</li>\n<li>JDBCTemplate æ˜¯ Spring å¸®æˆ‘ä»¬å°† JDBC å°è£…äº†ä¸€ä¸‹ï¼Œä½¿ç”¨äº†æ¨¡æ¿è®¾è®¡æ¨¡å¼æ€æƒ³ï¼Œä½†æ˜¯åœ¨ Java ä¸­æ˜¯åˆ©ç”¨å›è°ƒå‡½æ•°æ¥å®ç°çš„ï¼Œè®©æˆ‘ä»¬å¯ä»¥æŠŠé‡å¿ƒæ”¾åœ¨ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œå¯ä»¥ä¸è¿æ¥æ± ä¸€èµ·ä½¿ç”¨ï½</li>\n</ul>\n<h1 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h1>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yMDJlMmRlOWJjOGE=\">æ¨¡æ¿æ¨¡å¼ VS Callback å›è°ƒ</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTg1Nzg2Njg4MTA2NjU5ODcw\">DruidDataSource åŸç†</span></li>\n</ol>\n",
            "tags": [
                "Java",
                "åŸºç¡€çŸ¥è¯†",
                "JavaåŸºç¡€",
                "æ•°æ®åº“"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/05/04/Java/%E8%AE%B0%E4%B8%80%E6%AC%A1MyBatis%E5%B0%81%E8%A3%85%E7%BB%93%E6%9E%9C%E9%9B%86java-lang-Integer-cannot-be-cast-to-java-lang-String%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/",
            "url": "https://sprenedayf.com/2022/05/04/Java/%E8%AE%B0%E4%B8%80%E6%AC%A1MyBatis%E5%B0%81%E8%A3%85%E7%BB%93%E6%9E%9C%E9%9B%86java-lang-Integer-cannot-be-cast-to-java-lang-String%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/",
            "title": "è®°ä¸€æ¬¡MyBatiså°è£…ç»“æœé›†java.lang.Integer cannot be cast to java.lang.Stringå¼‚å¸¸å¤„ç†",
            "date_published": "2022-05-04T03:31:43.000Z",
            "content_html": "<h1 id=\"é—®é¢˜æè¿°\"><a class=\"anchor\" href=\"#é—®é¢˜æè¿°\">#</a> é—®é¢˜æè¿°</h1>\n<p>é¡¹ç›®ä¸­åˆ©ç”¨ Mybatis æ¥è·å–æ•°æ®ï¼Œä½¿ç”¨ Map æ¥å¯¹ç»“æœè¿›è¡Œå°è£…ï¼Œä½†æ˜¯åœ¨è·å–æŸä¸ªå…·ä½“çš„å€¼æ—¶æŠ›å‡º <code>java.lang.Integer cannot be cast to java.lang.String</code>  å¼‚å¸¸ï¼Œåœ¨ debug è¿‡ç¨‹ä¸­å¯¹ä¸ºä»€ä¹ˆè¦è¿™æ ·è§£å†³äº§ç”Ÿäº†ç–‘æƒ‘ï¼Œæ‰€ä»¥æƒ³è®°å½•ä¸€ä¸‹ï½<br />\n é¡¹ç›®ä»£ç å¦‚ä¸‹ï¼š</p>\n<ol>\n<li><strong>Dao.java</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getEntityByName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> entityName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>Mapper.xml</strong></li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getEntityByName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>java.util.HashMap<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    SELECT entity_id, entity_table FROM entity WHERE entity_name=#&#123;entityName&#125;;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ol start=\"3\">\n<li><strong>ä½¿ç”¨</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> entityInfo <span class=\"token operator\">=</span> DAO<span class=\"token punctuation\">.</span><span class=\"token function\">getEntityByName</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> entityId <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>entityInfo<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entity_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æŠ›å‡ºå¼‚å¸¸</span></pre></td></tr></table></figure><h1 id=\"è§£å†³æ–¹æ³•\"><a class=\"anchor\" href=\"#è§£å†³æ–¹æ³•\">#</a> è§£å†³æ–¹æ³•</h1>\n<p>å…ˆè¯´ç»“è®ºï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œå°†ä½¿ç”¨å¤„ä»£ç ä¿®æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> entityId <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>entityInfo<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entity_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è™½ç„¶è¿™æ—¶å€™ IDEA ä¼šå‘Šè¯‰ä½  <code>String.valueOf()</code>  æ–¹æ³•å¾ˆå¤šä½™ï¼Œä½†æ˜¯ç›¸ä¿¡æˆ‘ï¼ŒçœŸçš„ä¸å¤šä½™...<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1w4epraafj20c80c6t96.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"åŸç†è§£æ\"><a class=\"anchor\" href=\"#åŸç†è§£æ\">#</a> åŸç†è§£æ</h1>\n<h2 id=\"javaä¸­çš„æ³›å‹ä¸ç±»å‹æ“¦é™¤\"><a class=\"anchor\" href=\"#javaä¸­çš„æ³›å‹ä¸ç±»å‹æ“¦é™¤\">#</a> Java ä¸­çš„æ³›å‹ä¸ç±»å‹æ“¦é™¤</h2>\n<p>ä¹‹å‰å¯¹æ³›å‹å¹¶æ²¡æœ‰ç‰¹åˆ«å¤šçš„äº†è§£ï¼Œç±»å‹æ“¦é™¤ä¹Ÿæ˜¯æ²¡æœ‰å¬è¯´è¿‡ï¼Œä½†æ˜¯åœ¨è§£é‡Šè¿™ä¸ªé—®é¢˜ä¸Šè¿˜æ˜¯éœ€è¦äº†è§£ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†çš„ï½</p>\n<h3 id=\"javaæ³›å‹çš„å®ç°æ–¹æ³•ç±»å‹æ“¦é™¤\"><a class=\"anchor\" href=\"#javaæ³›å‹çš„å®ç°æ–¹æ³•ç±»å‹æ“¦é™¤\">#</a> Java æ³›å‹çš„å®ç°æ–¹æ³•ï¼šç±»å‹æ“¦é™¤</h3>\n<p>Java çš„æ³›å‹æ˜¯ä¼ªæ³›å‹ï¼Œè¿™æ˜¯å› ä¸º Java åœ¨ç¼–è¯‘æœŸé—´ï¼Œæ‰€æœ‰çš„æ³›å‹ä¿¡æ¯éƒ½ä¼šè¢«æ“¦æ‰ï¼Œæ­£ç¡®ç†è§£æ³›å‹æ¦‚å¿µçš„é¦–è¦å‰ææ˜¯ç†è§£ç±»å‹æ“¦é™¤ã€‚Java çš„æ³›å‹åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç¼–è¯‘å™¨è¿™ä¸ªå±‚æ¬¡ä¸Šå®ç°çš„ï¼Œåœ¨ç”Ÿæˆçš„å­—èŠ‚ç ä¸­æ˜¯ä¸åŒ…å«æ³›å‹ä¸­çš„ç±»å‹ä¿¡æ¯çš„ï¼Œä½¿ç”¨æ³›å‹çš„æ—¶å€™åŠ ä¸Šç±»å‹å‚æ•°ï¼Œåœ¨ç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶å€™ä¼šå»æ‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>ç±»å‹æ“¦é™¤</strong>ã€‚</p>\n<ol>\n<li><strong>åŸå§‹ç±»å‹ç›¸ç­‰</strong>ï¼šé€šè¿‡ a å¯¹è±¡å’Œ b å¯¹è±¡çš„ <code>getClass()</code>  æ–¹æ³•è·å–ä»–ä»¬çš„ç±»çš„ä¿¡æ¯ï¼Œæœ€åå‘ç°ç»“æœä¸º <code>true</code> ã€‚è¯´æ˜æ³›å‹ç±»å‹ <code>String</code>  å’Œ <code>Integer</code>  éƒ½è¢«æ“¦é™¤æ‰äº†ï¼Œåªå‰©ä¸‹åŸå§‹ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> b<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>é€šè¿‡åå°„æ·»åŠ å…¶ä»–ç±»å‹å…ƒç´ </strong>ï¼šå®šä¹‰äº†ä¸€ä¸ª <code>ArrayList</code>  æ³›å‹ç±»å‹å®ä¾‹åŒ–ä¸º <code>Integer</code>  å¯¹è±¡ï¼Œå¦‚æœç›´æ¥è°ƒç”¨ <code>add()</code>  æ–¹æ³•ï¼Œé‚£ä¹ˆåªèƒ½å­˜å‚¨æ•´æ•°æ•°æ®ï¼Œä¸è¿‡å½“æˆ‘ä»¬åˆ©ç”¨åå°„è°ƒç”¨ <code>add()</code>  æ–¹æ³•çš„æ—¶å€™ï¼Œå´å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¿™è¯´æ˜äº† <code>Integer</code>  æ³›å‹å®ä¾‹åœ¨ç¼–è¯‘ä¹‹åè¢«æ“¦é™¤æ‰äº†ï¼Œåªä¿ç•™äº†åŸå§‹ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// è¿™æ ·è°ƒç”¨ add æ–¹æ³•åªèƒ½å­˜å‚¨æ•´å½¢ï¼Œå› ä¸ºæ³›å‹ç±»å‹çš„å®ä¾‹ä¸º Integer</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">,</span> <span class=\"token string\">\"asd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹\"><a class=\"anchor\" href=\"#ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹\">#</a> ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹</h3>\n<p><strong>åŸå§‹ç±»å‹</strong> å°±æ˜¯æ“¦é™¤å»äº†æ³›å‹ä¿¡æ¯ï¼Œæœ€ååœ¨å­—èŠ‚ç ä¸­çš„ç±»å‹å˜é‡çš„çœŸæ­£ç±»å‹ï¼Œæ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ³›å‹ï¼Œç›¸åº”çš„åŸå§‹ç±»å‹éƒ½ä¼šè¢«è‡ªåŠ¨æä¾›ï¼Œç±»å‹å˜é‡æ“¦é™¤ï¼Œå¹¶ä½¿ç”¨å…¶é™å®šç±»å‹ï¼ˆæ— é™å®šçš„å˜é‡ç”¨ Objectï¼‰æ›¿æ¢ã€‚</p>\n<ol>\n<li><strong>åŸå§‹ç±»å‹ Object</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span>  value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Pair çš„åŸå§‹ç±»å‹ä¸ºï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pair</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span>  value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å› ä¸ºåœ¨ <code>Pair&lt;T&gt;</code>  ä¸­ï¼ŒT æ˜¯ä¸€ä¸ªæ— é™å®šçš„ç±»å‹å˜é‡ï¼Œæ‰€ä»¥ç”¨ <code>Object</code>  æ›¿æ¢ï¼Œå…¶ç»“æœå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå¦‚åŒæ³›å‹åŠ å…¥ Java è¯­è¨€ä¹‹å‰çš„å·²ç»å®ç°çš„æ ·å­ã€‚åœ¨ç¨‹åºä¸­å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„ <code>Pair</code> ï¼Œå¦‚ <code>Pair&lt;String&gt;</code>  æˆ– Pair <code>&lt;Integer&gt;</code> ï¼Œä½†æ˜¯æ“¦é™¤ç±»å‹åä»–ä»¬çš„å°±æˆä¸ºåŸå§‹çš„ <code>Pair</code>  ç±»å‹äº†ï¼ŒåŸå§‹ç±»å‹éƒ½æ˜¯ <code>Object</code> <br />\n<span class=\"yellow\"> æ‰€ä»¥æˆ‘ä»¬çš„é›†åˆç±»ï¼Œå¦‚ ArrayList ç±»å‹æ“¦é™¤åçš„åŸå§‹ç±»å‹ä¸º Objectï¼Œé€šè¿‡åå°„å°±å¯ä»¥å­˜å‚¨å„ç§ç±»å‹</span><br />\nä½†æ˜¯å¦‚æœç”¨è¿™æ ·å£°æ˜çš„è¯é‚£åŸå§‹ç±»å‹å°±æ˜¯ <code>Comparable</code> ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¦åŒºåˆ†<strong>åŸå§‹ç±»å‹</strong>å’Œ<strong>æ³›å‹å˜é‡</strong>çš„ç±»å‹ã€‚åœ¨è°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ³›å‹ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šæ³›å‹ã€‚</p>\n<ul>\n<li>åœ¨ä¸æŒ‡å®šæ³›å‹çš„æƒ…å†µä¸‹ï¼Œæ³›å‹å˜é‡çš„ç±»å‹ä¸ºè¯¥æ–¹æ³•ä¸­çš„å‡ ç§ç±»å‹çš„<strong>åŒä¸€çˆ¶ç±»çš„æœ€å°çº§</strong>ï¼Œç›´åˆ°  <code>Object</code> ã€‚</li>\n<li>åœ¨æŒ‡å®šæ³›å‹çš„æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•çš„å‡ ç§ç±»å‹å¿…é¡»æ˜¯<strong>è¯¥æ³›å‹çš„å®ä¾‹çš„ç±»å‹æˆ–è€…å…¶å­ç±»</strong>ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">/** ä¸æŒ‡å®šæ³›å‹çš„æ—¶å€™ */</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Integerï¼Œæ‰€ä»¥ T ä¸º Integer ç±»å‹  </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">Number</span> f <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªæ˜¯ Integerï¼Œä»¥é£æ ¼æ˜¯ Floatï¼Œæ‰€ä»¥å–åŒä¸€çˆ¶ç±»çš„æœ€å°çº§ï¼Œä¸º Number  </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Object</span> o <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"asd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªæ˜¯ Integerï¼Œä»¥é£æ ¼æ˜¯ Floatï¼Œæ‰€ä»¥å–åŒä¸€çˆ¶ç±»çš„æœ€å°çº§ï¼Œä¸º Object  </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">/** æŒ‡å®šæ³›å‹çš„æ—¶å€™ */</span>  </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æŒ‡å®šäº† Integerï¼Œæ‰€ä»¥åªèƒ½ä¸º Integer ç±»å‹æˆ–è€…å…¶å­ç±»  </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é”™è¯¯ï¼ŒæŒ‡å®šäº† Integerï¼Œä¸èƒ½ä¸º Float  </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Number</span> c <span class=\"token operator\">=</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">.</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æŒ‡å®šä¸º Numberï¼Œæ‰€ä»¥å¯ä»¥ä¸º Integer å’Œ Float  </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ³›å‹æ–¹æ³•  </span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> x<span class=\"token punctuation\">,</span><span class=\"token class-name\">T</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> y<span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>Object æ³›å‹</strong><br />\næ³¨æ„çœ‹è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¿™ä¸ªé—®é¢˜çš„è§£é‡Šä¸»è¦å°±æ˜¯è¦çœ‹æ˜ç™½è¿™ä¸ªä¾‹å­ï¼Œå¦‚æœä¸æŒ‡å®šæ³›å‹ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½èƒ½å­˜</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">ArrayList</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"121\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">viewDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Map</span> map1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map4 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span>map1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span>map2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span>map3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¼–è¯‘é”™è¯¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span>map4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¼–è¯‘é”™è¯¯</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ³›å‹æ˜¯ååŠ å…¥çš„ï¼Œæ—©æœŸçš„ç‰ˆæœ¬æ²¡æœ‰ï¼Œä½†æ˜¯ java çš„å¼€å‘è€…å¸Œæœ›ä¸èƒ½å› ä¸ºåŠ å…¥æ³›å‹å°±è¦ä¿®æ”¹æˆåƒä¸Šä¸‡çš„ç°æœ‰åº”ç”¨ï¼Œæ‰€ä»¥é»˜è®¤ä»–å¯ä»¥é€šèè€ç‰ˆæœ¬ä¸åŠ æ³›å‹çš„å˜é‡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ map1 ä¸ä¼šå‡ºé”™äº†ã€‚å°±æ˜¯è¯´<span class=\"yellow\">å¦‚æœæˆ‘ä»¬çš„æ³›å‹ç±»ä¸æŒ‡å®šæ³›å‹ï¼Œé‚£ä¹ˆå¯ä»¥å’Œä»»ä½•æŒ‡å®šæ³›å‹çš„å˜é‡èµ‹å€¼</span></p>\n<h3 id=\"ç±»å‹æ“¦é™¤çš„é—®é¢˜\"><a class=\"anchor\" href=\"#ç±»å‹æ“¦é™¤çš„é—®é¢˜\">#</a> ç±»å‹æ“¦é™¤çš„é—®é¢˜</h3>\n<div class=\"note info no-icon\">\n<p>Q: æ—¢ç„¶è¯´ç±»å‹å˜é‡ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æ“¦é™¤æ‰ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬å¾€ ArrayList åˆ›å»ºçš„å¯¹è±¡ä¸­æ·»åŠ æ•´æ•°ä¼šæŠ¥é”™å‘¢ï¼Ÿä¸æ˜¯è¯´æ³›å‹å˜é‡ String ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å˜ä¸º Object ç±»å‹å—ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½å­˜åˆ«çš„ç±»å‹å‘¢ï¼Ÿæ—¢ç„¶ç±»å‹æ“¦é™¤äº†ï¼Œå¦‚ä½•ä¿è¯æˆ‘ä»¬åªèƒ½ä½¿ç”¨æ³›å‹å˜é‡é™å®šçš„ç±»å‹å‘¢ï¼Ÿ<br />\nA: Java ç¼–è¯‘å™¨æ˜¯é€šè¿‡å…ˆæ£€æŸ¥ä»£ç ä¸­æ³›å‹çš„ç±»å‹ï¼Œç„¶ååœ¨è¿›è¡Œç±»å‹æ“¦é™¤ï¼Œå†è¿›è¡Œç¼–è¯‘ã€‚</p>\n</div>\n<p>æ¥çœ‹è¿™ä¸¤ç§æƒ…å†µï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> list1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¬¬ä¸€ç§ æƒ…å†µï¼Œä¸å®Œå…¨ä½¿ç”¨æ³›å‹ä¸€æ ·æ•ˆæœ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">ArrayList</span> list2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¬¬äºŒç§ æƒ…å†µï¼Œæ²¡æœ‰æ•ˆæœ</span></pre></td></tr></table></figure><p>å› ä¸ºç±»å‹æ£€æŸ¥å°±æ˜¯ç¼–è¯‘æ—¶å®Œæˆçš„ï¼Œ <code>new ArrayList()</code>  åªæ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿäº†ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹å¯¹è±¡ï¼Œè€Œ<strong>çœŸæ­£è®¾è®¡ç±»å‹æ£€æŸ¥çš„æ˜¯å®ƒçš„å¼•ç”¨</strong>ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä½¿ç”¨å®ƒå¼•ç”¨ <code>list1</code>  æ¥è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´è°ƒç”¨ <code>add</code>  æ–¹æ³•ï¼Œæ‰€ä»¥ <code>list1</code>  å¼•ç”¨èƒ½å®Œæˆæ³›å‹ç±»å‹çš„æ£€æŸ¥ã€‚è€Œå¼•ç”¨ <code>list2</code>  æ²¡æœ‰ä½¿ç”¨æ³›å‹ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> list1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        list1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é€šè¿‡  </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        list1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é”™è¯¯  </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">String</span> str1 <span class=\"token operator\">=</span> list1<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿”å›ç±»å‹å°±æ˜¯ String  </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ArrayList</span> list2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        list2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é€šè¿‡  </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        list2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é€šè¿‡  </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Object</span> object <span class=\"token operator\">=</span> list2<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿”å›ç±»å‹å°±æ˜¯ Object  </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"11\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é€šè¿‡  </span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–è¯‘é”™è¯¯  </span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"mybatisç»“æœé›†å°è£…æºç æµ…æ\"><a class=\"anchor\" href=\"#mybatisç»“æœé›†å°è£…æºç æµ…æ\">#</a> MyBatis ç»“æœé›†å°è£…æºç æµ…æ</h2>\n<p>å‰é¢è¯´äº†é‚£ä¹ˆå¤šï¼Œç»ˆäºå¼€å§‹çœ‹æˆ‘ä»¬çš„ MyBatis æºç äº†ï¼Œç”¨äº† MyBatis é‚£ä¹ˆå¤šæ¬¡ï¼Œç«Ÿç„¶ä»æ¥æ²¡æœ‰å…³å¿ƒè¿‡å®ƒåº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŒçœŸæ˜¯æƒ­æ„§ï¼Œå€Ÿç€è¿™ä¸ªæœºä¼šç®€å•äº†è§£ä¸‹å§ï½</p>\n<ol>\n<li><strong> <code>DefaultResultSetHandler</code>  çš„ <code>handleResultSets</code>  æ–¹æ³•</strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">handleResultSets</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">ErrorContext</span><span class=\"token punctuation\">.</span><span class=\"token function\">instance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">activity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"handling results\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>   <span class=\"token function\">object</span><span class=\"token punctuation\">(</span>mappedStatement<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// è¦è¿”å›çš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> multipleResults <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// è¿­ä»£å˜é‡ï¼Œç»“æœé›†çš„ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">int</span> resultSetCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// è·å–ç¬¬ä¸€ä¸ªç»“æœé›†ï¼Œå¹¶åŒ…è£…æˆ ResultSetWrapper å¯¹è±¡ï¼Œ</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// ResultSetWrapper å¯¹è±¡å«æœ‰å·²æ˜ å°„å’Œæœªæ˜ å°„çš„åˆ—åå’Œå±æ€§çš„å¯¹åº”å…³ç³»</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">ResultSetWrapper</span> rsw <span class=\"token operator\">=</span> <span class=\"token function\">getFirstResultSet</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// è·å–æ‰€æœ‰çš„ ResultMap</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ResultMap</span><span class=\"token punctuation\">></span></span> resultMaps <span class=\"token operator\">=</span> mappedStatement<span class=\"token punctuation\">.</span>getResultMaps    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// ResultMap çš„ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">int</span> resultMapCount <span class=\"token operator\">=</span> resultMaps<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// æ ¡éªŒï¼šå¦‚æœç»“æœé›†æœ‰æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰å®šä¹‰è¿”å›çš„ç»“æœç±»å‹ï¼Œå°±ä¼šæŠ¥é”™</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">validateResultMapsCount</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMapCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>rsw <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> resultMapCount <span class=\"token operator\">></span> resultSetCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token comment\">// ä¾æ¬¡è·å– ResultMap</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token class-name\">ResultMap</span> resultMap <span class=\"token operator\">=</span> resultMaps<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>resultSetCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token comment\">// å¤„ç†ç»“æœé›†ï¼Œè¿™é‡Œæ˜¯é‡ç‚¹</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token function\">handleResultSet</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> multipleResults<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token comment\">// è·å–ä¸‹ä¸€ä¸ªç»“æœé›†</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      rsw <span class=\"token operator\">=</span> <span class=\"token function\">getNextResultSet</span><span class=\"token punctuation\">(</span>stmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token function\">cleanUpAfterHandlingResultSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      resultSetCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\">//...</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">collapseSingleResultList</span><span class=\"token punctuation\">(</span>multipleResults<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong> <code>handleResultSet(rsw, resultMap, multipleResults, null)</code> </strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handleResultSet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSetWrapper</span> rsw<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMap</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> multipleResults<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMapping</span> parentMapping<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parentMapping <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token function\">handleRowValues</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">RowBounds</span><span class=\"token punctuation\">.</span>DEFAULT<span class=\"token punctuation\">,</span> parentMapping<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>resultHandler <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token comment\">// å¦‚æœç»“æœå¤„ç†å™¨ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ç»“æœå¤„ç†å™¨ï¼Œæ²¡æœ‰è‡ªå®šä¹‰çš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯èµ°è¿™ä¸ªæµç¨‹</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token class-name\">DefaultResultHandler</span> defaultResultHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultResultHandler</span><span class=\"token punctuation\">(</span>objectFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token comment\">// å¤„ç†æ¯ä¸€è¡Œçš„å€¼</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token function\">handleRowValues</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> defaultResultHandler<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token comment\">// å°†å¤„ç†ç»“æœæ”¾åˆ° list é›†ä¸­</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                multipleResults<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>defaultResultHandler<span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token function\">handleRowValues</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> resultHandler<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// issue #228 (close resultsets)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token function\">closeResultSet</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">.</span><span class=\"token function\">getResultSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"3\">\n<li><strong> <code>handleRowValues</code> </strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handleRowValues</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSetWrapper</span> rsw<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMap</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultHandler</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> resultHandler<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RowBounds</span> rowBounds<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMapping</span> parentMapping<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å¦‚æœæœ‰åµŒå¥—çš„ ResultMap</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>resultMap<span class=\"token punctuation\">.</span><span class=\"token function\">hasNestedResultMaps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">ensureNoRowBounds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token function\">checkResultHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// å¤„ç†å«æœ‰åµŒå¥— ResultMap çš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token function\">handleRowValuesForNestedResultMap</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> resultHandler<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">,</span> parentMapping<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// å¤„ç†ä¸å«æœ‰åµŒå¥— ResultMap çš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token function\">handleRowValuesForSimpleResultMap</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> resultHandler<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">,</span> parentMapping<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"4\">\n<li><strong> <code>handleRowValuesForSimpleResultMap</code> </strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handleRowValuesForSimpleResultMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSetWrapper</span> rsw<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMap</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultHandler</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> resultHandler<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RowBounds</span> rowBounds<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMapping</span> parentMapping<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">DefaultResultContext</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> resultContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultResultContext</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">ResultSet</span> resultSet <span class=\"token operator\">=</span> rsw<span class=\"token punctuation\">.</span><span class=\"token function\">getResultSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// ç•¥è¿‡åç§»çš„è¡Œæ•°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">skipRows</span><span class=\"token punctuation\">(</span>resultSet<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">shouldProcessMoreRows</span><span class=\"token punctuation\">(</span>resultContext<span class=\"token punctuation\">,</span> rowBounds<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>resultSet<span class=\"token punctuation\">.</span><span class=\"token function\">isClosed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> resultSet<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">ResultMap</span> discriminatedResultMap <span class=\"token operator\">=</span> <span class=\"token function\">resolveDiscriminatedResultMap</span><span class=\"token punctuation\">(</span>resultSet<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// è·å–è¡Œæ•°æ®ï¼Œåº”åœ¨æ­¤æ·±è¿½ï¼Œä» debugger çœ‹ï¼ŒgetRowValue æ˜¯è§£æå±æ€§ mapping çš„å‡½æ•° </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">Object</span> rowValue <span class=\"token operator\">=</span> <span class=\"token function\">getRowValue</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> discriminatedResultMap<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// å­˜å‚¨å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token function\">storeObject</span><span class=\"token punctuation\">(</span>resultHandler<span class=\"token punctuation\">,</span> resultContext<span class=\"token punctuation\">,</span> rowValue<span class=\"token punctuation\">,</span> parentMapping<span class=\"token punctuation\">,</span> resultSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"5\">\n<li><strong> <code>getRowValue</code> </strong></li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getRowValue</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSetWrapper</span> rsw<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultMap</span> resultMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> columnPrefix<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// æ‡’åŠ è½½ç›¸å…³</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">ResultLoaderMap</span> lazyLoader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResultLoaderMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// åˆ›å»ºè¡Œæ•°æ®å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// è¿™é‡Œ java.util.Map å°±ä¼šè¢«å®ä¾‹åŒ–ä¸º new HashMap () æ²¡æœ‰æŒ‡å®šèŒƒå‹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">Object</span> rowValue <span class=\"token operator\">=</span> <span class=\"token function\">createResultObject</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> lazyLoader<span class=\"token punctuation\">,</span> columnPrefix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rowValue <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">hasTypeHandlerForResultObject</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// è·å–å…ƒæ•°æ®ï¼Œä¸ºäº†èµ‹å€¼ mapping å¯¹åº”çš„å€¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">MetaObject</span> metaObject <span class=\"token operator\">=</span> configuration<span class=\"token punctuation\">.</span><span class=\"token function\">newMetaObject</span><span class=\"token punctuation\">(</span>rowValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">boolean</span> foundValues <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>useConstructorMappings<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// åˆ°è¿™é‡Œ ä¹Ÿå°±æ˜¯è¯´ MetaObject è¢«å®ä¾‹åŒ–æˆåŠŸï¼Œ</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// å…¶ä¸­çš„ objectWrapper åˆ™è¢«å®ä¾‹åŒ–æˆäº† MapWrapper</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// MapWrapper ä¸­æœ‰ä¸ª Map&lt;String, Object> map å±æ€§</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">//rowValue åˆ™è¢«èµ‹å€¼ç»™äº† map</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">// è€Œ map åˆ™å¯ä»¥ä½œä¸º rowValue çš„å¼•ç”¨èƒ¡ä½œéä¸º</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">shouldApplyAutomaticMappings</span><span class=\"token punctuation\">(</span>resultMap<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            foundValues <span class=\"token operator\">=</span> <span class=\"token function\">applyAutomaticMappings</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> metaObject<span class=\"token punctuation\">,</span> columnPrefix<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> foundValues<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">//applyPropertyMappings: åº”ç”¨å±æ€§æ˜ å°„</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        foundValues <span class=\"token operator\">=</span> <span class=\"token function\">applyPropertyMappings</span><span class=\"token punctuation\">(</span>rsw<span class=\"token punctuation\">,</span> resultMap<span class=\"token punctuation\">,</span> metaObject<span class=\"token punctuation\">,</span> lazyLoader<span class=\"token punctuation\">,</span> columnPrefix<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> foundValues<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        foundValues <span class=\"token operator\">=</span> lazyLoader<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> foundValues<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        rowValue <span class=\"token operator\">=</span> foundValues <span class=\"token operator\">||</span> configuration<span class=\"token punctuation\">.</span><span class=\"token function\">isReturnInstanceForEmptyRow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> rowValue <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">return</span> rowValue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å®ä¾‹åŒ– MetaObject</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">MetaObject</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ObjectFactory</span> objectFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ObjectWrapperFactory</span> objectWrapperFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ReflectorFactory</span> reflectorFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>originalObject <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectFactory <span class=\"token operator\">=</span> objectFactory<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapperFactory <span class=\"token operator\">=</span> objectWrapperFactory<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reflectorFactory <span class=\"token operator\">=</span> reflectorFactory<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// å„å¼å„æ ·</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>object <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ObjectWrapper</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ObjectWrapper</span><span class=\"token punctuation\">)</span> object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>objectWrapperFactory<span class=\"token punctuation\">.</span><span class=\"token function\">hasWrapperFor</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapper <span class=\"token operator\">=</span> objectWrapperFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWrapperFor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>object <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// Map çš„å®ä¾‹åŒ–</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MapWrapper</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">)</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>object <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Collection</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CollectionWrapper</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token punctuation\">)</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BeanWrapper</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MapWrapper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseWrapper</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// è®¾å®šäº†èŒƒå‹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MapWrapper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MetaObject</span> metaObject<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> map<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>metaObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map <span class=\"token operator\">=</span> map<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ™•äº†ï¼Ÿåˆ«æ…Œæˆ‘ä»¬æ‹ä¸€æ‹ï½<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1w7ry2g7cj20c80c8dg4.jpg\" alt=\"\" height=\"150px\" /><br />\n å…¶å®å°±æ˜¯è¿™ä¹ˆä¸€å›äº‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> myResultMap <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//myResultMap, æˆ‘ MyBatis è¦è¿”å›çš„é‚£ä¸ª Map</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Map</span> rowValue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//rowValue, æ²¡æœ‰ä½¿ç”¨æ³›å‹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> metaObject <span class=\"token operator\">=</span> rowValue<span class=\"token punctuation\">;</span>  <span class=\"token comment\">//metaObject, ä½¿ç”¨æ³›å‹ä½†æ˜¯æ˜¯ Object å¯ä»¥å­˜ä»»ä½•ç±»å‹æ•°æ®</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>metaObject<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entity_id\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>metaObject<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entity_table\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"tableName\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>myResultMap <span class=\"token operator\">=</span> rowValue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> myResultMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entity_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æŠ¥é”™ä¸€è¡Œ</span></pre></td></tr></table></figure><p>è¿™æ ·æ˜¯ä¸æ˜¯å°±æ¸…æ¥šå¤šäº†ï¼Ÿè¯´ç™½äº†å…¶å®å°±æ˜¯<strong>åˆ©ç”¨äº†ä¸€ä¸ªä¸ç”¨æ³›å‹çš„ Map ä½œä¸ºä¸­è½¬ç«™ï¼ŒæŠŠ <code>&lt;String,Object&gt;</code>  çš„ Map èµ‹å€¼ç»™äº† <code>&lt;String,String&gt;</code>  çš„ Map</strong></p>\n<h2 id=\"objectè½¬stringæ–¹æ³•\"><a class=\"anchor\" href=\"#objectè½¬stringæ–¹æ³•\">#</a> Object è½¬ String æ–¹æ³•</h2>\n<p>okkkkï¼Œæ¥åˆ°äº†æˆ‘ä»¬çš„æœ€åä¸€æ­¥äº†ï¼Œæˆ‘çŸ¥é“äº†æˆ‘çš„ myResultMap è·å–çš„æ˜¯å…¶å®æ˜¯ä¸ª <code>Object</code>  å¯¹è±¡äº†ï¼Œé‚£ä¹ˆæ€ä¹ˆè½¬åŒ–æˆ <code>String</code>  å¯¹è±¡å‘¢ï¼Ÿ<br />\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªå°ç¤ºä¾‹å“ˆï½</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å…ˆå®š 3 ä¸ªå˜é‡ : Integer ä¸€ä¸ªï¼ŒString å†…å®¹ä¸ºå­—æ¯çš„ä¸€ä¸ªï¼ŒString å†…å®¹ä¸ºæ•°å­—çš„ä¸€ä¸ª</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Integer</span> integerNumAAA <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">String</span> alphaBBB <span class=\"token operator\">=</span> <span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">String</span> stringNumCCC <span class=\"token operator\">=</span> <span class=\"token string\">\"321\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">Map</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ²¡ç”¨æ³›å‹ï¼Œä»€ä¹ˆéƒ½èƒ½å­˜</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AAA\"</span><span class=\"token punctuation\">,</span> integerNumAAA <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BBB\"</span><span class=\"token punctuation\">,</span> alphaBBB <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CCC\"</span><span class=\"token punctuation\">,</span> stringNumCCC <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// å¡å¥½åæ¥ä¸‹æ¥è¿›è¡Œå–å€¼</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token class-name\">Integer</span> getAAA <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AAA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// å¯ä»¥çœ‹åˆ°å¡è¿›å»çš„æ—¶å€™æ˜¯ Integer ç±»å‹çš„è¯ï¼Œæ‹¿å‡ºæ¥çš„æ—¶å€™ç”¨å¼ºè½¬å¯ä»¥é¡ºåˆ©æ‹¿åˆ°å€¼ï¼›</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token class-name\">Integer</span> getCCC <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CCC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// è¿™ä¸ªä¼šæŠ¥é”™</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// æ„æ€å°±æ˜¯ï¼Œå¦‚æœä½  map.put çš„æ—¶å€™æ˜¯ String ç±»å‹çš„ï¼Œä½†æ˜¯å†…å®¹è¿˜æ˜¯æ•°å­—çš„è¯å°±ä¼šæŠ¥é”™</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// å¤‡æ³¨ï¼šè¿™é‡ŒæŠ¥çš„ Stringâ†’Integer å¼ºè½¬çš„æŠ¥é”™ï¼Œå’Œæœ¬æ–‡çš„éƒ½æ˜¯ ClsasCastException å¼ºè½¬é—®é¢˜</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// è§£å†³</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// ä¹Ÿæ˜¯å…ˆè½¬ä¸º String ç±»å‹åå†ç”¨ Integer.parseInt è½¬å³å¯ï¼Œå¦‚ä¸‹:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stringNumCCC \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è¿™å°±æ˜¯è¯´<span class=\"yellow\">æˆ‘çš„ Map åŸæ¥å­˜çš„ä»€ä¹ˆç±»å‹ï¼Œå¦‚æœæˆ‘ç”¨é‚£ä¸ªç±»å‹æ¥å–æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œå¦‚æœæˆ‘ç”¨åˆ«çš„ç±»å‹æ¥å–ï¼Œå°±ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œå°±å®¹æ˜“å‡ºé”™ï¼</span></p>\n<ol>\n<li><strong>(String)Object</strong><br />\n å°† <code>Object</code>  ç±»å‹çš„å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸º <code>String</code>  ç±»å‹ï¼Œå¯¹äºç©ºæ ¼ã€ç©ºå­—ç¬¦ä¸²ã€null éƒ½å¯ä»¥è½¬æ¢ï¼Œä½†æ˜¯<span class=\"yellow\"> <code>Object</code>  å¯¹è±¡çš„å€¼ç±»å‹ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ <code>Integer</code>  ç±»å‹æ—¶ï¼Œä¼šå­˜åœ¨ç±»å‹è½¬æ¢å¼‚å¸¸é”™è¯¯</span>è¿™ä¹Ÿæ˜¯æˆ‘å¼€å¤´çš„ä»£ç å‡ºé”™çš„åŸå› ï¼ï¼ï¼</li>\n<li><strong>Object.toString()</strong><br />\n å¯¹ç©ºæ ¼ã€ç©ºå­—ç¬¦ä¸²ã€å…¶ä»–æ•°æ®ç±»å‹éƒ½å¯ä»¥è¿›è¡Œè½¬æ¢ï¼Œ<strong>å€¼ä¸º null æ—¶çš„ç©ºæŒ‡é’ˆå¼‚å¸¸</strong></li>\n<li><strong>String.valueOf(Object)</strong><br />\n å¯ä»¥å¯¹ nullã€ç©ºæ ¼ã€ç©ºå­—ç¬¦ä¸²ã€å…¶ä»–æ•°æ®ç±»å‹è¿›è¡Œè½¬æ¢ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®‰å…¨çš„è½¬æ¢æ–¹æ³•ã€‚å½“å€¼ä¸º null çš„æ—¶å€™è¯¥æ–¹æ³•ä¼šè½¬æ¢ä¸º &quot;null&quot;, è¿™ä¸ªå€¼ä¼šå½±å“ä¸šåŠ¡åç»­çš„éç©ºåˆ¤æ–­ã€‚ä»€ä¹ˆæ„æ€ï¼Ÿ</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">String</span> s1 <span class=\"token operator\">=</span> <span class=\"token string\">\"null\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> s2 <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// null</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Strin</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// null</span></pre></td></tr></table></figure><ol start=\"4\">\n<li><strong>Object + &quot;&quot;</strong><br />\n æ­¤æ–¹æ³•æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²çš„æ‹¼æ¥ç‰¹ç‚¹å°†å…¶ä»–ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå®ƒå’Œ <code>Stirng.valueOf(object)</code>  ç±»ä¼¼ä¸ç”¨è€ƒè™‘ç©ºæ ¼ã€ç©ºå­—ç¬¦ä¸²ã€nullã€å’Œå…¶ä»–æ•°æ®ç±»å‹ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„å½“å€¼ä¸º null çš„æ—¶å€™ä¼šè½¬æ¢ä¸º &quot;null&quot;</li>\n</ol>\n<h1 id=\"æ€»ç»“\"><a class=\"anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h1>\n<p>å¥½äº†ï¼Œè¯´å®Œäº†ï¼Œæ‰€æœ‰è¦ç†è§£è¿™ä¸ªé—®é¢˜å‘ç”Ÿçš„åŸå› å’Œè§£å†³æ–¹æ³•çš„ä¸œè¥¿éƒ½è¯´å®Œäº†ï¼Œåœ¨æˆ‘ä¸€å¼€å¤´çš„ç¨‹åºä¸­ï¼Œå¦‚æœä¸ä½¿ç”¨ <code>String.valueOf()</code>  æ–¹æ³•ï¼Œä½ æŸ¥çœ‹ <code>.class</code>  æ–‡ä»¶çš„æ—¶å€™ä¼šçœ‹åˆ°å®ƒè‡ªåŠ¨è°ƒç”¨äº† <code>String(Object)</code>  æ–¹æ³•ï¼Œè€Œæˆ‘ä¹Ÿè¯´è¿‡äº†ï¼Œè¿™ä¸ªè½¬æ¢æ–¹æ³•åœ¨è½¬æ¢ä¸æ˜¯ <code>String</code>  ç±»å‹çš„æ•°æ®çš„æ—¶å€™ä¼šæŠ›å‡ºæ ‡é¢˜æ‰€è¯´çš„å¼‚å¸¸ä¿¡æ¯ï½</p>\n<h1 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h1>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vd3VxaW5nbG9uZy9wLzk0NTYxOTMuaHRtbCMxamF2YSVFNiVCMyU5QiVFNSU5RSU4QiVFNyU5QSU4NCVFNSVBRSU5RSVFNyU4RSVCMCVFNiU5NiVCOSVFNiVCMyU5NSVFRiVCQyU5QSVFNyVCMSVCQiVFNSU5RSU4QiVFNiU5MyVBNiVFOSU5OSVBNA==\">Java æ³›å‹ç±»å‹æ“¦é™¤åŠç±»å‹æ“¦é™¤å¸¦æ¥çš„é—®é¢˜</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNTI0NTYwODc=\">MyBatis ä¸€ä¸ªæœ‰æ„æ€çš„ä¸œè¥¿</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FpdXhpbmZhMTIzL2FydGljbGUvZGV0YWlscy8xMDg1MjE3MzE/c3BtPTEwMDEuMjEwMS4zMDAxLjY2NTAuMyZhbXA7dXRtX21lZGl1bT1kaXN0cmlidXRlLnBjX3JlbGV2YW50Lm5vbmUtdGFzay1ibG9nLTIlN0VkZWZhdWx0JTdFQmxvZ0NvbW1lbmRGcm9tQmFpZHUlN0VSYXRlLTMucGNfcmVsZXZhbnRfcGF5Y29sdW1uX3YzJmFtcDtkZXB0aF8xLXV0bV9zb3VyY2U9ZGlzdHJpYnV0ZS5wY19yZWxldmFudC5ub25lLXRhc2stYmxvZy0yJTdFZGVmYXVsdCU3RUJsb2dDb21tZW5kRnJvbUJhaWR1JTdFUmF0ZS0zLnBjX3JlbGV2YW50X3BheWNvbHVtbl92MyZhbXA7dXRtX3JlbGV2YW50X2luZGV4PTY=\">MyBatis åŸç†ï¼šç»“æœé›†å°è£…è¯¦è§£</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hvbGFPcmFuZ2UvYXJ0aWNsZS9kZXRhaWxzLzEyNDA3MzYwNQ==\">ã€å¼‚å¸¸ã€‘java.lang.Integer cannot be cast to java.lang.String</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuNTFjdG8uY29tL2FydGljbGUvNjYxMzc1Lmh0bWw=\">ä¸€ç¯‡å¸¦ä½  Object è½¬ String</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vemhhbmdjaGVuZzEvcC8xMTQ5NTg0NC5odG1s\">java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer map é‡Œ string è½¬ integer é”™è¯¯</span></li>\n</ol>\n",
            "tags": [
                "Java",
                "ç»éªŒæ€»ç»“",
                "JavaåŸºç¡€",
                "ç»éªŒæ€»ç»“",
                "MyBatis"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/05/01/big-data/clickhouse%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E5%8F%8A%E5%AD%98%E5%82%A8%E6%B5%85%E6%9E%90/",
            "url": "https://sprenedayf.com/2022/05/01/big-data/clickhouse%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E5%8F%8A%E5%AD%98%E5%82%A8%E6%B5%85%E6%9E%90/",
            "title": "clickhouseæ•°æ®å­˜å‚¨åŸç†æµ…æ",
            "date_published": "2022-05-01T06:59:22.000Z",
            "content_html": "<h1 id=\"å¼•è¨€\"><a class=\"anchor\" href=\"#å¼•è¨€\">#</a> å¼•è¨€</h1>\n<p>â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚æœ€è¿‘åšé¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼Œæƒ³å¯¹ clickhouse ä¸­çš„æ•°æ®æ·»åŠ å‡ ä¸ªæ ‡ç­¾ï¼Œä½†æ˜¯æ€»è®°ç€ä¹‹å‰è‰è‰çœ‹è¿‡è¯´ clickhouse è¿™ç§ OLAP å¼•æ“çš„æ›´æ–°å’Œåˆ é™¤æ•°æ®æ“ä½œæ˜¯ç¾éš¾æ€§çš„ï¼Œæ‰€ä»¥å†³å®šçœ‹çœ‹ clickhouse çš„å­˜å‚¨åŸç†ï¼Œç„¶åå†æ–Ÿé…Œä¸€ä¸‹æŠ€æœ¯æ–¹æ¡ˆå§ï½<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t0zy9q7gj206y06wt8l.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h1>\n<p>â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚é¦–å…ˆè¦æ¸…æ¥šä¸€ç‚¹ï¼Œclickhouse æ˜¯åˆ—å¼å­˜å‚¨ï¼Œåˆ—å¼å­˜å‚¨ä¸€èˆ¬æ¥è¯´æ›´é€‚åˆ OLAP åœºæ™¯ï¼ŒæŸ¥è¯¢åˆ†ææ€§èƒ½ä¸Šæ˜¯è¦æ¯”è¡Œå¼å­˜å‚¨è¦å¿«çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œç®€å•çš„è¯´ä¸€ä¸‹å§...</p>\n<ol>\n<li>æˆ‘ä»¬éƒ½çŸ¥é“æ•°æ®åº“é‡Œæ•°æ®å­˜å‚¨æ˜¯æŒ‰é¡µæ¥çš„ï¼Œè¡Œå¼å­˜å‚¨å’Œåˆ—å¼å­˜å‚¨é¡¾åæ€ä¹‰å°±æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€è¡Œä¸€è¡Œæ¥å­˜ï¼Œä¸€ä¸ªæŒ‰ç…§ä¸€åˆ—ä¸€åˆ—æ¥å­˜ï¼Œå¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t1j5ky14j21b40o677x.jpg\" alt=\"\" height=\"500px\" /><br />\nâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ç„¶åä½ æƒ³å•Šï¼Œä½ åšæŸ¥è¯¢åˆ†æçš„æ—¶å€™æ€»ä¸æ˜¯æŠŠæ‰€æœ‰çš„åˆ—éƒ½ä¸€è‚¡è„‘çš„å–å‡ºæ¥å§ï¼Ÿè¿™äº›åˆ—éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œä½ è¦æ‹¿åˆ°å†…å­˜ä¸­çš„é¡µä¹Ÿå°‘äº†ï¼Œå¯»å€æ¬¡æ•°ä¹Ÿå°‘äº†ï¼Œæ•ˆç‡è‡ªç„¶å°±ä¸Šå»äº†ä¸æ˜¯ï½</li>\n<li>å› ä¸ºæˆ‘ä»¬ä¸€åˆ—æ•°æ®çš„æ•°æ®ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·å­˜å‚¨çš„æ—¶å€™å°±æ›´æ–¹ä¾¿åšæ•°æ®çš„å‹ç¼©ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¼ è¾“æ•°æ®çš„æ—¶å€™ç½‘ç»œæ—¶é—´ä¹Ÿå¯ä»¥èŠ‚çº¦å¾ˆå¤šï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€æ–¹é¢çš„ä¼˜åŠ¿</li>\n</ol>\n<h1 id=\"clickhouseè¡¨å¼•æ“ä¸å»ºè¡¨\"><a class=\"anchor\" href=\"#clickhouseè¡¨å¼•æ“ä¸å»ºè¡¨\">#</a> clickhouse è¡¨å¼•æ“ä¸å»ºè¡¨</h1>\n<p>é¦–å…ˆå…ˆæ¥çœ‹ä¸€ä¸‹ clickhouse ä¸­çš„å»ºè¡¨è¯­å¥ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>db<span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>table_name <span class=\"token punctuation\">[</span><span class=\"token keyword\">ON</span> CLUSTER cluster<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    name1 <span class=\"token punctuation\">[</span>type1<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">NULL</span><span class=\"token operator\">|</span><span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">DEFAULT</span><span class=\"token operator\">|</span>MATERIALIZED<span class=\"token operator\">|</span>EPHEMERAL<span class=\"token operator\">|</span>ALIAS expr1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    name2 <span class=\"token punctuation\">[</span>type2<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">NULL</span><span class=\"token operator\">|</span><span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">DEFAULT</span><span class=\"token operator\">|</span>MATERIALIZED<span class=\"token operator\">|</span>EPHEMERAL<span class=\"token operator\">|</span>ALIAS expr2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">engine</span></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå’Œ MySQL å»ºè¡¨ä¸€æ ·å¯¹å§ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„å‡ ä¸ªåœ°æ–¹ï¼š</p>\n<ol>\n<li>åœ¨ clickhouse ä¸­å»ºè¡¨éœ€è¦è®¾å®šè¡¨å¼•æ“ï¼Œclickhouse è®¾å®šäº†åˆå¹¶æ•°ã€å¤–éƒ¨å­˜å‚¨ã€å†…å­˜ã€æ–‡ä»¶ã€æ¥å£å’Œå…¶ä»– 6 å¤§ç±» 20 å¤šç§è¡¨å¼•æ“ï¼Œæ€»æœ‰ä¸€ç§é€‚åˆä½ </li>\n<li>clickhouse ä¸­è®¾å®šé»˜è®¤å€¼æœ‰è¿™ä¹ˆå‡ ç§å…³é”®å­— <code>DEFAULT|MATERIALIZED|EPHEMERAL|ALIAS</code> ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯ DEFAULTã€‚<span class=\"red\">åœ¨æ•°æ®å†™å…¥çš„æ—¶å€™åªæœ‰ DEFAULT ç±»å‹çš„å­—æ®µå¯ä»¥å‡ºç°åœ¨ INSERT ä¸­ï¼Œåœ¨æ•°æ®æŸ¥è¯¢æ—¶åªæœ‰ DEFAULT ç±»å‹çš„å­—æ®µå¯ä»¥é€šè¿‡ SELECT * é€‰æ‹©ï¼Œåœ¨æ•°æ®å­˜å‚¨æ—¶åªæœ‰ DEFAULT å’Œ MATERIALIZED ç±»å‹çš„å­—æ®µå¯ä»¥æŒä¹…åŒ–</span></li>\n</ol>\n<h1 id=\"åˆå¹¶æ ‘å®¶æ—mergetree\"><a class=\"anchor\" href=\"#åˆå¹¶æ ‘å®¶æ—mergetree\">#</a> åˆå¹¶æ ‘å®¶æ— (MergeTree)</h1>\n<p><img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t61v05aaj20lq07mmxn.jpg\" alt=\"\" height=\"250px\" /><br />\nâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨çš„ MergeTree è¡¨å¼•æ“å®¶æ—ï¼š</p>\n<ul>\n<li><strong>åªæœ‰åˆå¹¶æ ‘ç³»åˆ—çš„è¡¨å¼•æ“æ‰æ”¯æŒä¸»é”®ç´¢å¼•ã€æ•°æ®åˆ†åŒºã€æ•°æ®å‰¯æœ¬å’Œæ•°æ®é‡‡æ ·ç­‰ç‰¹æ€§</strong></li>\n<li><strong>åªæœ‰æ­¤ç³»åˆ—çš„è¡¨å¼•æ“æ”¯æŒ ALTER ç›¸å…³æ“ä½œ</strong><br />\nç„¶åæˆ‘ä»¬å°±ä»¥ MergeTree ä¸ºä¾‹è®²ä¸€ä¸‹ clickhouse å­˜å‚¨é‚£äº›äº‹å„¿ï½<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t668ucs9j20c80c8t9j.jpg\" alt=\"\" height=\"150px\" /></li>\n</ul>\n<h2 id=\"mergetreeçš„åˆ›å»ºæ–¹å¼\"><a class=\"anchor\" href=\"#mergetreeçš„åˆ›å»ºæ–¹å¼\">#</a> MergeTree çš„åˆ›å»ºæ–¹å¼</h2>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>db_name<span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>table_name<span class=\"token punctuation\">(</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  name1 <span class=\"token punctuation\">[</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">DEFAULT</span><span class=\"token operator\">|</span>MATERIALIZED<span class=\"token operator\">|</span>ALIAS expr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  name2 <span class=\"token punctuation\">[</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">DEFAULT</span><span class=\"token operator\">|</span>MATERIALIZED<span class=\"token operator\">|</span>ALIAS expr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  çœç•¥<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span> <span class=\"token operator\">=</span> MergeTree<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token keyword\">PARTITION</span> <span class=\"token keyword\">BY</span> expr<span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> expr<span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> expr<span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>SAMPLE <span class=\"token keyword\">BY</span> expr<span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>SETTINGS name<span class=\"token operator\">=</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">,</span> çœç•¥<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹ä¸€äº›ä¸»è¦å‚æ•°ï¼š</p>\n<ol>\n<li>\n<p><strong>PARTITION BY</strong> [é€‰å¡«]<br />\n åˆ†åŒºé”®ï¼Œç”¨äºæŒ‡å®šè¡¨æ•°æ®ä»¥ä½•ç§æ ‡å‡†è¿›è¡Œåˆ†åŒºã€‚åˆ†åŒºé”®æ—¢å¯ä»¥æ˜¯å•ä¸ªåˆ—å­—æ®µï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…ƒç»„çš„å½¢å¼ä½¿ç”¨å¤šä¸ªåˆ—å­—æ®µï¼ŒåŒæ—¶å®ƒä¹Ÿæ”¯æŒä½¿ç”¨åˆ—è¡¨è¾¾å¼ã€‚<span class=\"blue\">å¦‚æœä¸å£°æ˜åˆ†åŒºé”®ï¼Œåˆ™ ClickHouse ä¼šç”Ÿæˆä¸€ä¸ªåä¸º all çš„åˆ†åŒº</span>ã€‚åˆç†ä½¿ç”¨æ•°æ®åˆ†åŒºï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘æŸ¥è¯¢æ—¶æ•°æ®æ–‡ä»¶çš„æ‰«æèŒƒå›´</p>\n</li>\n<li>\n<p><strong>ORDER BY</strong> [å¿…å¡«]<br />\n æ’åºé”®ï¼Œç”¨äºæŒ‡å®šåœ¨ä¸€ä¸ªæ•°æ®ç‰‡æ®µå†…ï¼Œæ•°æ®ä»¥ä½•ç§æ ‡å‡†æ’åºã€‚é»˜è®¤æƒ…å†µä¸‹ä¸»é”®ï¼ˆPRIMARY KEYï¼‰ä¸æ’åºé”®ç›¸åŒã€‚æ’åºé”®æ—¢å¯ä»¥æ˜¯å•ä¸ªåˆ—å­—æ®µï¼Œä¾‹å¦‚ ORDER BY CounterIDï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…ƒç»„çš„å½¢å¼ä½¿ç”¨å¤šä¸ªåˆ—å­—æ®µï¼Œä¾‹å¦‚ ORDER BYï¼ˆCounterID,EventDateï¼‰ã€‚å½“ä½¿ç”¨å¤šä¸ªåˆ—å­—æ®µæ’åºæ—¶ï¼Œä»¥ ORDER BYï¼ˆCounterID,EventDateï¼‰ä¸ºä¾‹ï¼Œåœ¨å•ä¸ªæ•°æ®ç‰‡æ®µå†…ï¼Œæ•°æ®é¦–å…ˆä¼šä»¥ CounterID æ’åºï¼Œç›¸åŒ CounterID çš„æ•°æ®å†æŒ‰ EventDate æ’åºã€‚</p>\n</li>\n<li>\n<p><strong>PRIMARY KEY</strong> [é€‰å¡«]<br />\n ä¸»é”®ï¼Œé¡¾åæ€ä¹‰ï¼Œå£°æ˜åä¼šä¾ç…§ä¸»é”®å­—æ®µç”Ÿæˆä¸€çº§ç´¢å¼•ï¼Œç”¨äºåŠ é€Ÿè¡¨æŸ¥è¯¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»é”®ä¸æ’åºé”®<br />\n (ORDER BY) ç›¸åŒï¼Œæ‰€ä»¥é€šå¸¸ç›´æ¥ä½¿ç”¨ ORDER BY ä»£ä¸ºæŒ‡å®šä¸»é”®ï¼Œæ— é¡»åˆ»æ„é€šè¿‡ PRIMARY KEY å£°æ˜ã€‚æ‰€ä»¥åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨å•ä¸ªæ•°æ®ç‰‡æ®µå†…ï¼Œæ•°æ®ä¸ä¸€çº§ç´¢å¼•ä»¥ç›¸åŒçš„è§„åˆ™å‡åºæ’åˆ—ã€‚ä¸å…¶ä»–æ•°æ®åº“ä¸åŒï¼ŒMergeTree ä¸»é”®å…è®¸å­˜åœ¨é‡å¤æ•°æ®ï¼ˆReplacingMergeTree å¯ä»¥å»é‡ï¼‰</p>\n</li>\n<li>\n<p><strong>SAMPLE BY</strong> [é€‰å¡«]<br />\n æŠ½æ ·è¡¨è¾¾å¼ï¼Œç”¨äºå£°æ˜æ•°æ®ä»¥ä½•ç§æ ‡å‡†è¿›è¡Œé‡‡æ ·ã€‚å¦‚æœä½¿ç”¨äº†æ­¤é…ç½®é¡¹ï¼Œé‚£ä¹ˆåœ¨ä¸»é”®çš„é…ç½®ä¸­ä¹Ÿéœ€è¦å£°æ˜åŒæ ·çš„è¡¨è¾¾å¼</p>\n</li>\n<li>\n<p><strong>SETTINGSï¼šindex_granularity</strong> [é€‰å¡«]<br />\n index_granularity å¯¹äº MergeTree è€Œè¨€æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„å‚æ•°ï¼Œå®ƒè¡¨ç¤ºç´¢å¼•çš„ç²’åº¦ï¼Œé»˜è®¤å€¼ä¸º 8192ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒMergeTree çš„ç´¢å¼•åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯é—´éš” 8192 è¡Œæ•°æ®æ‰ç”Ÿæˆä¸€æ¡ç´¢å¼•</p>\n</li>\n</ol>\n<h2 id=\"mergetreeçš„å­˜å‚¨ç»“æ„\"><a class=\"anchor\" href=\"#mergetreeçš„å­˜å‚¨ç»“æ„\">#</a> MergeTree çš„å­˜å‚¨ç»“æ„</h2>\n<p>MergeTree è¡¨å¼•æ“ä¸­çš„æ•°æ®æ˜¯æ‹¥æœ‰ç‰©ç†å­˜å‚¨çš„ï¼Œæ•°æ®ä¼šæŒ‰ç…§åˆ†åŒºç›®å½•çš„å½¢å¼ä¿å­˜åˆ°ç£ç›˜ä¹‹ä¸Šï¼Œå…¶å®Œæ•´çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾:<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t6eznu0rj20hy0kr3za.jpg\" alt=\"\" height=\"550px\" /><br />\n å¯ä»¥çœ‹å‡ºï¼Œä¸€å¼ æ•°æ®è¡¨çš„å®Œæ•´ç‰©ç†ç»“æ„åˆ†ä¸º 3 ä¸ªå±‚çº§ï¼Œä¾æ¬¡æ˜¯æ•°æ®è¡¨ç›®å½•ã€åˆ†åŒºç›®å½•åŠå„åˆ†åŒºä¸‹å…·ä½“çš„æ•°æ®æ–‡ä»¶:</p>\n<ol>\n<li>\n<p><strong>åˆ†åŒºç›®å½•ï¼špartition</strong><br />\n ä½™ä¸‹å„ç±»æ•°æ®æ–‡ä»¶ï¼ˆprimary.idxã€ [Column].mrkã€[Column].bin ç­‰ï¼‰éƒ½æ˜¯ä»¥åˆ†åŒºç›®å½•çš„å½¢å¼è¢«ç»„ç»‡å­˜æ”¾çš„ï¼Œå±äºç›¸åŒåˆ†åŒºçš„æ•°æ®ï¼Œæœ€ç»ˆä¼šè¢«åˆå¹¶åˆ°åŒä¸€ä¸ªåˆ†åŒºç›®å½•ï¼Œè€Œä¸åŒåˆ†åŒºçš„æ•°æ®ï¼Œæ°¸è¿œä¸ä¼šè¢«åˆå¹¶åœ¨ä¸€èµ·ã€‚</p>\n</li>\n<li>\n<p><strong>æ ¡éªŒæ–‡ä»¶ï¼šchecksums.txt</strong><br />\n ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ã€‚å®ƒä¿å­˜äº†ä½™ä¸‹å„ç±»æ–‡ä»¶ (primary.idxã€count.txt ç­‰) çš„ size å¤§å°åŠ size çš„å“ˆå¸Œå€¼ï¼Œç”¨äºå¿«é€Ÿæ ¡éªŒæ–‡ä»¶çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚</p>\n</li>\n<li>\n<p><strong>åˆ—ä¿¡æ¯æ–‡ä»¶ï¼šcolumns.txt</strong><br />\n ä½¿ç”¨æ˜æ–‡æ ¼å¼å­˜å‚¨ã€‚ç”¨äºä¿å­˜æ­¤æ•°æ®åˆ†åŒºä¸‹çš„åˆ—å­—æ®µä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">cat</span> columns.txt </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>columns <span class=\"token function\">format</span> version: <span class=\"token number\">1</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">4</span> columns: </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token string\">'ID'</span> String </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token string\">'URL'</span> String </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token string\">'Code'</span> String </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token string\">'EventTime'</span> Date</pre></td></tr></table></figure><ol start=\"4\">\n<li><strong>è®¡æ•°æ–‡ä»¶ï¼šcount.txt</strong><br />\n ä½¿ç”¨æ˜æ–‡æ ¼å¼å­˜å‚¨ã€‚ç”¨äºè®°å½•å½“å‰æ•°æ®åˆ†åŒºç›®å½•ä¸‹æ•°æ®çš„æ€»è¡Œæ•°ï¼Œä¾‹å¦‚ï¼š</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">cat</span> count.txt </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">8</span></pre></td></tr></table></figure><ol start=\"5\">\n<li>\n<p><strong>ä¸€çº§ç´¢å¼•æ–‡ä»¶ï¼šprimary.idx</strong><br />\n ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ï¼Œç”¨äºå­˜æ”¾ç¨€ç–ç´¢å¼•ï¼Œä¸€å¼  MergeTree è¡¨åªèƒ½å£°æ˜ä¸€æ¬¡ä¸€çº§ç´¢å¼•ï¼ˆé€šè¿‡ <code>ORDER BY</code>  æˆ–è€… <code>PRIMARY KEY</code> ï¼‰ã€‚å€ŸåŠ©ç¨€ç–ç´¢å¼•ï¼Œåœ¨æ•°æ®æŸ¥è¯¢çš„æ—¶èƒ½å¤Ÿæ’é™¤ä¸»é”®æ¡ä»¶èŒƒå›´ä¹‹å¤–çš„æ•°æ®æ–‡ä»¶ï¼Œä»è€Œæœ‰æ•ˆå‡å°‘æ•°æ®æ‰«æèŒƒå›´ï¼ŒåŠ é€ŸæŸ¥è¯¢é€Ÿåº¦ã€‚</p>\n</li>\n<li>\n<p><strong>æ•°æ®æ–‡ä»¶ï¼š[Column].bin</strong><br />\n ä½¿ç”¨å‹ç¼©æ ¼å¼å­˜å‚¨ï¼Œé»˜è®¤ä¸º LZ4 å‹ç¼©æ ¼å¼ï¼Œç”¨äºå­˜å‚¨æŸä¸€åˆ—çš„æ•°æ®ã€‚ç”±äº MergeTree é‡‡ç”¨åˆ—å¼å­˜å‚¨ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªåˆ—å­—æ®µéƒ½æ‹¥æœ‰ç‹¬ç«‹çš„.bin æ•°æ®æ–‡ä»¶ï¼Œå¹¶ä»¥åˆ—å­—æ®µåç§°å‘½åï¼ˆä¾‹å¦‚ CounterID.binã€EventDate.bin ç­‰ï¼‰ã€‚</p>\n</li>\n<li>\n<p><strong>åˆ—å­—æ®µæ ‡è®°æ–‡ä»¶ï¼š[Column].mrk</strong><br />\n ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ï¼Œæ ‡è®°æ–‡ä»¶ä¸­ä¿å­˜äº†.bin æ–‡ä»¶ä¸­æ•°æ®çš„åç§»é‡ä¿¡æ¯ã€‚æ ‡è®°æ–‡ä»¶ä¸ç¨€ç–ç´¢å¼•å¯¹é½ï¼Œåˆä¸.bin æ–‡ä»¶ä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥ MergeTree é€šè¿‡æ ‡è®°æ–‡ä»¶å»ºç«‹äº† primary.idx ç¨€ç–ç´¢å¼•ä¸.bin æ•°æ®æ–‡ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å³<span class=\"red\">é¦–å…ˆé€šè¿‡ç¨€ç–ç´¢å¼•ï¼ˆprimary.idxï¼‰æ‰¾åˆ°å¯¹åº”æ•°æ®çš„åç§»é‡ä¿¡æ¯ï¼ˆ.mrkï¼‰ï¼Œå†é€šè¿‡åç§»é‡ç›´æ¥ä».bin æ–‡ä»¶ä¸­è¯»å–æ•°æ®</span>ã€‚ç”±äº.mrk æ ‡è®°æ–‡ä»¶ä¸.bin æ–‡ä»¶ä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥ MergeTree ä¸­çš„æ¯ä¸ªåˆ—å­—æ®µéƒ½ä¼šæ‹¥æœ‰ä¸å…¶å¯¹åº”çš„.mrk æ ‡è®°æ–‡ä»¶ï¼ˆä¾‹å¦‚ CounterID.mrkã€EventDate.mrk ç­‰ï¼‰ã€‚</p>\n</li>\n<li>\n<p><strong>[Column].mrk2</strong><br />\n å¦‚æœä½¿ç”¨äº†è‡ªé€‚åº”å¤§å°çš„ç´¢å¼•é—´éš”ï¼Œåˆ™æ ‡è®°æ–‡ä»¶ä¼šä»¥.mrk2 å‘½åã€‚å®ƒçš„å·¥ä½œåŸç†å’Œä½œç”¨ä¸.mrk æ ‡è®°æ–‡ä»¶ç›¸åŒã€‚</p>\n</li>\n<li>\n<p><strong>partition.dat ä¸ minmax_[Column].idx</strong><br />\n å¦‚æœä½¿ç”¨äº†åˆ†åŒºé”®ï¼Œä¾‹å¦‚ <code>PARTITION BY EventTime</code> ï¼Œåˆ™ä¼šé¢å¤–ç”Ÿæˆ <code>partition.dat</code>  ä¸ <code>minmax</code>  ç´¢å¼•æ–‡ä»¶ï¼Œå®ƒä»¬å‡ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ã€‚ <code>partition.dat</code>  ç”¨äºä¿å­˜å½“å‰åˆ†åŒºä¸‹åˆ†åŒºè¡¨è¾¾å¼æœ€ç»ˆç”Ÿæˆçš„å€¼ï¼›è€Œ <code>minmax</code>  ç´¢å¼•ç”¨äºè®°å½•å½“å‰åˆ†åŒºä¸‹åˆ†åŒºå­—æ®µå¯¹åº”åŸå§‹æ•°æ®çš„æœ€å°å’Œæœ€å¤§å€¼ã€‚ä¾‹å¦‚ EventTime å­—æ®µå¯¹åº”çš„åŸå§‹æ•°æ®ä¸º 2019-05-01ã€2019-05-05ï¼Œåˆ†åŒºè¡¨è¾¾å¼ä¸º PARTITION BY toYYYYMM (EventTime)ã€‚ <code>partition.dat</code>  ä¸­ä¿å­˜çš„å€¼å°†æ˜¯ 2019-05ï¼Œè€Œ <code>minmax</code>  ç´¢å¼•ä¸­ä¿å­˜çš„å€¼å°†ä¼šæ˜¯ 2019-05-012019-05-05ã€‚</p>\n</li>\n<li>\n<p><strong>skp_idx_[Column].idx ä¸ skp_idx_[Column].mrk</strong><br />\n å¦‚æœåœ¨å»ºè¡¨è¯­å¥ä¸­å£°æ˜äº†äºŒçº§ç´¢å¼•ï¼Œåˆ™ä¼šé¢å¤–ç”Ÿæˆç›¸åº”çš„äºŒçº§ç´¢å¼•ä¸æ ‡è®°æ–‡ä»¶ï¼Œå®ƒä»¬åŒæ ·ä¹Ÿä½¿ç”¨äºŒè¿›åˆ¶å­˜å‚¨ã€‚äºŒçº§ç´¢å¼•åœ¨ ClickHouse ä¸­åˆç§°è·³æ•°ç´¢å¼•ï¼Œç›®å‰æ‹¥æœ‰ minmaxã€setã€ngrambf_v1 å’Œ tokenbf_v1 å››ç§ç±»å‹ã€‚è¿™äº›ç´¢å¼•çš„<br />\næœ€ç»ˆç›®æ ‡ä¸ä¸€çº§ç¨€ç–ç´¢å¼•ç›¸åŒï¼Œéƒ½æ˜¯ä¸ºäº†è¿›ä¸€æ­¥å‡å°‘æ‰€éœ€æ‰«æçš„æ•°æ®èŒƒå›´ï¼Œä»¥åŠ é€Ÿæ•´ä¸ªæŸ¥è¯¢è¿‡ç¨‹ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t6ocodtbj20k00fz776.jpg\" alt=\"\" height=\"450px\" /></p>\n</li>\n</ol>\n<h2 id=\"æ•°æ®åˆ†åŒº\"><a class=\"anchor\" href=\"#æ•°æ®åˆ†åŒº\">#</a> æ•°æ®åˆ†åŒº</h2>\n<h3 id=\"æ•°æ®çš„åˆ†åŒºè§„åˆ™\"><a class=\"anchor\" href=\"#æ•°æ®çš„åˆ†åŒºè§„åˆ™\">#</a> æ•°æ®çš„åˆ†åŒºè§„åˆ™</h3>\n<p>é’ˆå¯¹å–å€¼æ•°æ®ç±»å‹çš„ä¸åŒï¼Œåˆ†åŒº ID çš„ç”Ÿæˆé€»è¾‘ç›®å‰æ‹¥æœ‰å››ç§è§„åˆ™ï¼š</p>\n<ol>\n<li>\n<p>ä¸æŒ‡å®šåˆ†åŒºé”®<br />\nå¦‚æœä¸ä½¿ç”¨åˆ†åŒºé”®ï¼Œå³ä¸ä½¿ç”¨ <code>PARTITION BY</code>  å£°æ˜ä»»ä½•åˆ†åŒºè¡¨è¾¾å¼ï¼Œåˆ™åˆ†åŒº ID é»˜è®¤å–åä¸º allï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ä¼šè¢«å†™å…¥è¿™ä¸ª all åˆ†åŒºã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨æ•´å‹<br />\nå¦‚æœåˆ†åŒºé”®å–å€¼å±äºæ•´å‹ï¼ˆå…¼å®¹ UInt64ï¼ŒåŒ…æ‹¬æœ‰ç¬¦å·æ•´å‹å’Œæ— ç¬¦å·æ•´å‹ï¼‰ï¼Œä¸”æ— æ³•è½¬æ¢ä¸ºæ—¥æœŸç±»å‹ YYYYMMDD æ ¼å¼ï¼Œåˆ™ç›´æ¥æŒ‰ç…§è¯¥æ•´å‹çš„<strong>å­—ç¬¦å½¢å¼</strong>è¾“å‡ºï¼Œä½œä¸ºåˆ†åŒº ID çš„å–å€¼ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨æ—¥æœŸç±»å‹<br />\nå¦‚æœåˆ†åŒºé”®å–å€¼å±äºæ—¥æœŸç±»å‹ï¼Œæˆ–è€…æ˜¯èƒ½å¤Ÿè½¬æ¢ä¸º YYYYMMDD æ ¼å¼çš„æ•´å‹ï¼Œåˆ™ä½¿ç”¨<strong>æŒ‰ç…§ YYYYMMDD è¿›è¡Œæ ¼å¼åŒ–</strong>åçš„å­—ç¬¦å½¢å¼è¾“å‡ºï¼Œå¹¶ä½œä¸ºåˆ†åŒº ID çš„å–å€¼ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨å…¶ä»–ç±»å‹<br />\nå¦‚æœåˆ†åŒºé”®å–å€¼æ—¢ä¸å±äºæ•´å‹ï¼Œä¹Ÿä¸å±äºæ—¥æœŸç±»å‹ï¼Œä¾‹å¦‚ Stringã€Float ç­‰ï¼Œåˆ™é€šè¿‡ 128 ä½<strong> Hash ç®—æ³•</strong>å–å…¶ Hash å€¼ä½œä¸ºåˆ†åŒº ID çš„å–å€¼<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t7749dn3j20gk06v74t.jpg\" alt=\"\" height=\"350px\" /><br />\nå¦‚æœåˆ†åŒºå­—æ®µé‡‡ç”¨äº†å¤šä¸ªï¼Œåˆ™ä¼šåˆ©ç”¨ '-' ç¬¦å·ä¸€æ¬¡æ‹¼æ¥ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>PARTITION BY (length(Code),EventTime)</code>  æ¥åˆ†åŒºï¼Œåˆ™åˆ†åŒº ID ä¼šæ˜¯ <code>2-20190501</code>  çš„å½¢å¼</p>\n</li>\n</ol>\n<h3 id=\"åˆ†åŒºç›®å½•çš„å‘½åè§„åˆ™\"><a class=\"anchor\" href=\"#åˆ†åŒºç›®å½•çš„å‘½åè§„åˆ™\">#</a> åˆ†åŒºç›®å½•çš„å‘½åè§„åˆ™</h3>\n<p>å®Œæ•´çš„åˆ†åŒºç›®å½•å‘½åå…¬å¼ä¸ºï¼š <code>PartitionID_MinBlockNum_MaxBlockNum_Level</code> ï¼Œæ¯”å¦‚ï¼š<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1t79t6zt7j20gk06ywet.jpg\" alt=\"\" height=\"150px\" /></p>\n<ol>\n<li>\n<p><strong>PartitionID</strong>ï¼šåˆ†åŒº IDã€‚</p>\n</li>\n<li>\n<p><strong>MinBlockNum å’Œ MaxBlockNum</strong><br />\n é¡¾åæ€ä¹‰ï¼Œæœ€å°æ•°æ®å—ç¼–å·ä¸æœ€å¤§æ•°æ®å—ç¼–å·ã€‚è¿™é‡Œç®€å•æ¥è¯´å°±æ˜¯è¯´ï¼Œä½ è¿™é‡Œæœ‰ä¸€ä¸ªå…¨å±€çš„ index å˜é‡ï¼Œåˆå§‹åŒ–ä¸º 1ï¼Œç„¶åä½ æ¯æ‰§è¡Œä¸€æ¬¡ INSERT è¯­å¥å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºï¼ˆMergeTree çš„ç‰¹æ€§ï¼‰ï¼Œæ¯åˆ›å»ºä¸€ä¸ªåˆ†åŒºè¿™ä¸ª index å˜é‡çš„å€¼å°±ä¼š + 1ï¼Œæ¯ä¸ªåˆ†åŒºä¸€å¼€å§‹çš„ <code>MinBlockNum</code>  å’Œ <code>MaxBlockNum</code>  æ˜¯ç›¸ç­‰çš„éƒ½ä¸º indexã€‚å½“è¿›è¡Œåˆ†åŒºåˆå¹¶çš„æ—¶å€™ï¼Œå°±ä¼šå–ç›¸åŒçš„ <code>PartitionID</code> ï¼Œç›¸åŒåˆ†åŒºä¸­çš„æœ€å° <code>MinBlockNum</code>  ä½œä¸ºæ–°çš„ <code>MinBlockNum</code> ï¼ŒåŒç† <code>MaxBlockNum</code> ã€‚æ¯åˆå¹¶ä¸€æ¬¡æˆ‘ä»¬è¿™ä¸ªåˆ†åŒºçš„ <code>level</code>  å°±è‡ªå¢ä¸€æ¬¡</p>\n</li>\n<li>\n<p><strong>Level</strong><br />\n åˆå¹¶çš„å±‚çº§ï¼Œå¯ä»¥ç†è§£ä¸ºæŸä¸ªåˆ†åŒºè¢«åˆå¹¶è¿‡çš„æ¬¡æ•°ï¼Œæˆ–è€…è¿™ä¸ªåˆ†åŒºçš„å¹´é¾„ã€‚æ•°å€¼è¶Šé«˜è¡¨ç¤ºå¹´é¾„è¶Šå¤§ã€‚å¯¹äºæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„åˆ†åŒºç›®å½•è€Œè¨€ï¼Œå…¶åˆå§‹å€¼å‡ä¸º 0ã€‚ä¹‹åï¼Œä»¥åˆ†åŒºä¸ºå•ä½ï¼Œå¦‚æœç›¸åŒåˆ†åŒºå‘ç”Ÿåˆå¹¶åŠ¨ä½œï¼Œåˆ™åœ¨ç›¸åº”åˆ†åŒºå†…è®¡æ•°ç´¯ç§¯åŠ  1ã€‚</p>\n</li>\n</ol>\n<h3 id=\"åˆ†åŒºç›®å½•çš„åˆå¹¶è¿‡ç¨‹\"><a class=\"anchor\" href=\"#åˆ†åŒºç›®å½•çš„åˆå¹¶è¿‡ç¨‹\">#</a> åˆ†åŒºç›®å½•çš„åˆå¹¶è¿‡ç¨‹</h3>\n<p>** æ¯ä¸€æ‰¹æ•°æ®çš„å†™å…¥ï¼ˆä¸€æ¬¡ INSERT è¯­å¥ï¼‰ï¼ŒMergeTree éƒ½ä¼šç”Ÿæˆä¸€æ‰¹æ–°çš„åˆ†åŒºç›®å½•ã€‚** å³ä¾¿ä¸åŒæ‰¹æ¬¡å†™å…¥çš„æ•°æ®å±äºç›¸åŒåˆ†åŒºï¼Œä¹Ÿä¼šç”Ÿæˆä¸åŒçš„åˆ†åŒºç›®å½•ã€‚å¯¹äºåŒä¸€ä¸ªåˆ†åŒºè€Œè¨€ï¼Œä¹Ÿä¼šå­˜åœ¨å¤šä¸ªåˆ†åŒºç›®å½•çš„æƒ…å†µã€‚åœ¨ä¹‹åçš„æŸä¸ªæ—¶åˆ»ï¼ˆå†™å…¥åçš„ 10ï½15 åˆ†é’Ÿï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ <code>optimize</code>  æŸ¥è¯¢è¯­å¥ï¼‰ï¼ŒClickHouse ä¼šé€šè¿‡åå°ä»»åŠ¡å†å°†å±äºç›¸åŒåˆ†åŒºçš„å¤šä¸ªç›®å½•åˆå¹¶æˆä¸€ä¸ªæ–°çš„ç›®å½•ã€‚å·²ç»å­˜åœ¨çš„æ—§åˆ†åŒºç›®å½•å¹¶ä¸ä¼šç«‹å³è¢«åˆ é™¤ï¼Œè€Œæ˜¯åœ¨ä¹‹åçš„æŸä¸ªæ—¶åˆ»é€šè¿‡åå°ä»»åŠ¡è¢«åˆ é™¤ï¼ˆé»˜è®¤ 8 åˆ†é’Ÿï¼‰ã€‚å±äºåŒä¸€ä¸ªåˆ†åŒºçš„å¤šä¸ªç›®å½•ï¼Œåœ¨åˆå¹¶ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ç›®å½•ï¼Œç›®å½•ä¸­çš„ç´¢å¼•å’Œæ•°æ®æ–‡ä»¶ä¹Ÿä¼šç›¸åº”åœ°è¿›è¡Œåˆå¹¶ã€‚<br />\næ–°ç›®å½•åç§°çš„åˆå¹¶æ–¹å¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>\n<ul>\n<li><code>MinBlockNum</code> ï¼šå–åŒä¸€åˆ†åŒºå†…æ‰€æœ‰ç›®å½•ä¸­æœ€å°çš„ MinBlockNum å€¼</li>\n<li><code>MaxBlockNum</code> ï¼šå–åŒä¸€åˆ†åŒºå†…æ‰€æœ‰ç›®å½•ä¸­æœ€å¤§çš„ MaxBlockNum å€¼</li>\n<li><code>Level</code> ï¼šå–åŒä¸€åˆ†åŒºå†…æœ€å¤§ Level å€¼å¹¶åŠ  1<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1t7o4wec6j20md08t0tp.jpg\" alt=\"\" height=\"450px\" /><br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t7owepdbj20nd0buq44.jpg\" alt=\"\" height=\"450px\" /></li>\n</ul>\n<h2 id=\"ä¸€çº§ç´¢å¼•\"><a class=\"anchor\" href=\"#ä¸€çº§ç´¢å¼•\">#</a> ä¸€çº§ç´¢å¼•</h2>\n<p>æ•°æ®ä»¥ <code>index_granularity</code>  çš„ç²’åº¦ï¼ˆé»˜è®¤å›ºå®šç´¢å¼•ç²’åº¦ 8192ï¼‰è¢«æ ‡è®°æˆå¤šä¸ªå°ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸ªç©ºé—´æœ€å¤š 8192 è¡Œæ•°æ®ã€‚è¿™æ®µç©ºé—´çš„å…·ä½“åŒºé—´å°±æ˜¯ <code>MarkRange</code> , å¹¶ä¸”é€šè¿‡ start å’Œ end è¡¨ç¤ºå…·ä½“çš„èŒƒå›´<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t7uviuh4j20n309oq3v.jpg\" alt=\"\" height=\"450px\" /></p>\n<h3 id=\"ç´¢å¼•æ•°æ®çš„ç”Ÿæˆè§„åˆ™\"><a class=\"anchor\" href=\"#ç´¢å¼•æ•°æ®çš„ç”Ÿæˆè§„åˆ™\">#</a> ç´¢å¼•æ•°æ®çš„ç”Ÿæˆè§„åˆ™</h3>\n<p>ç”±äºæ˜¯ç¨€ç–ç´¢å¼•ï¼Œæ‰€ä»¥ MergeTree éœ€è¦é—´éš” index_granularity è¡Œæ•°æ®æ‰ä¼šç”Ÿæˆä¸€æ¡ç´¢å¼•è®°å½•ï¼Œå…¶ç´¢å¼•å€¼ä¼šä¾æ®å£°æ˜çš„ä¸»é”®å­—æ®µè·å–ã€‚ä¾‹å¦‚ï¼šhits_v1 ä½¿ç”¨å¹´æœˆåˆ†åŒº <code>ï¼ˆPARTITION BYtoYYYYMM(EventDate)ï¼‰</code> ï¼Œæ‰€ä»¥ 2014 å¹´ 3 æœˆä»½çš„æ•°æ®æœ€ç»ˆä¼šè¢«åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†åŒºç›®å½•å†…ã€‚å¦‚æœä½¿ç”¨ <code>CounterID</code>  ä½œä¸ºä¸»é”® <code>ï¼ˆORDER BY CounterIDï¼‰</code> ï¼Œåˆ™æ¯é—´éš” 8192 è¡Œæ•°æ®å°±ä¼šå–ä¸€æ¬¡ CounterID çš„å€¼ä½œä¸ºç´¢å¼•å€¼ï¼Œç´¢å¼•æ•°æ®æœ€ç»ˆä¼šè¢«å†™å…¥ <code>primary.idx</code>  æ–‡ä»¶è¿›è¡Œä¿å­˜<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t7xij4n7j20pb09tt9i.jpg\" alt=\"\" height=\"450px\" /><br />\nå¦‚æœä½¿ç”¨å¤šä¸ªä¸»é”®ï¼Œä¾‹å¦‚ <code>ORDER BY (CounterID, EventDate)</code> ï¼Œåˆ™æ¯é—´éš” 8192 è¡Œå¯ä»¥åŒæ—¶å– <code>CounterID</code>  ä¸ <code>EventDate</code>  ä¸¤åˆ—çš„å€¼ä½œä¸ºç´¢å¼•å€¼:<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t7yk1gcuj20p509b756.jpg\" alt=\"\" height=\"450px\" /></p>\n<h3 id=\"ç´¢å¼•çš„æŸ¥è¯¢è¿‡ç¨‹\"><a class=\"anchor\" href=\"#ç´¢å¼•çš„æŸ¥è¯¢è¿‡ç¨‹\">#</a> ç´¢å¼•çš„æŸ¥è¯¢è¿‡ç¨‹</h3>\n<p>MergeTree æŒ‰ç…§ <code>index_granularity</code>  çš„é—´éš”ç²’åº¦ï¼Œå°†ä¸€æ®µå®Œæ•´çš„æ•°æ®åˆ’åˆ†æˆå¤šä¸ªå°çš„é—´éš”æ•°æ®æ®µï¼Œä¸€ä¸ªå…·ä½“çš„æ•°æ®µå°±æ˜¯ <code>MarkRange</code> ã€‚ <code>MarkRange</code>  ä¸ç´¢å¼•ç¼–å·å¯¹åº”ï¼Œä½¿ç”¨ start å’Œ end è¡¨ç¤ºå…·ä½“çš„èŒƒå›´ï¼Œé€šè¿‡ start åŠ end å¯¹åº”çš„ç´¢å¼•ç¼–å·å–å€¼ï¼Œå³èƒ½å¾—åˆ°å®ƒæ‰€å¯¹åº”çš„æ•°å€¼åŒºé—´ã€‚<br />\nç´¢å¼•æŸ¥è¯¢å…¶å®å°±æ˜¯ä¸¤ä¸ªæ•°å€¼åŒºé—´çš„äº¤é›†åˆ¤æ–­ï¼š<br />\n(1) ä¸€ä¸ªåŒºé—´æ˜¯ç”±åŸºäºä¸»é”®çš„æŸ¥è¯¢æ¡ä»¶è½¬æ¢è€Œæ¥çš„æ¡ä»¶åŒºé—´<br />\n (2) ä¸€ä¸ªåŒºé—´æ˜¯ MarkRange å¯¹åº”çš„æ•°å€¼åŒºé—´<br />\nç´¢å¼•æŸ¥è¯¢è¿‡ç¨‹ï¼š</p>\n<ol>\n<li><strong>ç”ŸæˆæŸ¥è¯¢æ¡ä»¶åŒºé—´</strong>ï¼šå°†æŸ¥è¯¢æ¡ä»¶è½¬æ¢ä¸ºæ¡ä»¶åŒºé—´</li>\n</ol>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">where</span> ID <span class=\"token operator\">=</span> <span class=\"token string\">'A003'</span>\t\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'A003'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A003'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">where</span> ID <span class=\"token operator\">></span> <span class=\"token string\">'A000'</span>\t\t\t<span class=\"token punctuation\">(</span><span class=\"token string\">'A000'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'+inf'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">where</span> ID <span class=\"token operator\">LIKE</span> <span class=\"token string\">'A006%'</span>\t\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'A006'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A007'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><strong>é€’å½’äº¤é›†åˆ¤æ–­</strong>ï¼šä»¥é€’å½’çš„å½¢å¼ï¼Œä¾æ¬¡å¯¹ MarkRange çš„æ•°å€¼åŒºé—´ä¸æ¡ä»¶åŒºé—´åšäº¤é›†åˆ¤æ–­ã€‚\n<ul>\n<li>å¦‚æœä¸å­˜åœ¨äº¤é›†ï¼Œåˆ™ç›´æ¥é€šè¿‡å‰ªæç®—æ³•ä¼˜åŒ–æ­¤æ•´æ®µ MarkRange</li>\n<li>å¦‚æœå­˜åœ¨äº¤é›†ï¼Œä¸” <code>MarkRange</code>  æ­¥é•¿å¤§äº 8ï¼ˆend-startï¼‰, åˆ™å°†æ­¤åŒºé—´è¿›ä¸€æ­¥æ‹†åˆ†æˆ 8 ä¸ªå­åŒºé—´ (ç”± <code>merge_tree_coarse_index_granularity</code>  æŒ‡å®šï¼Œé»˜è®¤ä¸º 8)ï¼Œå¹¶é‡å¤æ­¤è§„åˆ™ï¼Œç»§ç»­åšé€’å½’äº¤é›†åˆ¤æ–­</li>\n<li>å¦‚æœå­˜åœ¨äº¤é›†ï¼Œä¸” <code>MarkRange</code>  ä¸å¯å†åˆ†å‰²ï¼ˆæ­¥é•¿å°äº 8ï¼‰ï¼Œåˆ™è®°å½• <code>MarkRange</code>  å¹¶è¿”å›</li>\n</ul>\n</li>\n<li><strong>åˆå¹¶ MarkRange åŒºé—´</strong>ï¼šå°†æœ€ç»ˆåŒ¹é…çš„ MarkRange èšåœ¨ä¸€èµ·ï¼Œåˆå¹¶å®ƒä»¬çš„èŒƒå›´<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t8f2qpqcj219i0kmadc.jpg\" alt=\"\" height=\"550px\" /></li>\n</ol>\n<h2 id=\"æ•°æ®å­˜å‚¨\"><a class=\"anchor\" href=\"#æ•°æ®å­˜å‚¨\">#</a> æ•°æ®å­˜å‚¨</h2>\n<h3 id=\"å„åˆ—ç‹¬ç«‹å­˜å‚¨\"><a class=\"anchor\" href=\"#å„åˆ—ç‹¬ç«‹å­˜å‚¨\">#</a> å„åˆ—ç‹¬ç«‹å­˜å‚¨</h3>\n<p><code>MergeTree</code>  ä¸­ï¼Œæ•°æ®æŒ‰åˆ—å­˜å‚¨ã€‚å…·ä½“åˆ°æ¯ä¸ªåˆ—å­—æ®µï¼Œæ¯ä¸ªåˆ—å­—æ®µéƒ½æ‹¥æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ <code>.bin</code>  æ•°æ®æ–‡ä»¶ï¼ˆç‰©ç†å­˜å‚¨ï¼‰ã€‚ <code>.bin</code>  æ–‡ä»¶åªä¼šä¿å­˜å½“å‰åˆ†åŒºç‰‡æ®µå†…çš„è¿™ä¸€éƒ¨åˆ†æ•°æ®ã€‚å¤§è‡´æµç¨‹æ˜¯ï¼š<strong>æ•°æ®å‹ç¼© -&gt; æŒ‰ç…§ <code>ORDER BY</code>  çš„å£°æ˜æ’åº -&gt; æ•°æ®ä»¥å¤šä¸ªå‹ç¼©æ•°æ®å—çš„å½¢å¼è¢«ç»„ç»‡å¹¶å†™å…¥ <code>.bin</code>  æ–‡ä»¶</strong></p>\n<h3 id=\"å‹ç¼©æ•°æ®å—\"><a class=\"anchor\" href=\"#å‹ç¼©æ•°æ®å—\">#</a> å‹ç¼©æ•°æ®å—</h3>\n<p>ä¸€ä¸ªå‹ç¼©æ•°æ®å—ç”±<strong>å¤´ä¿¡æ¯</strong>å’Œ<strong>å‹ç¼©æ•°æ®</strong>ä¸¤éƒ¨åˆ†ç»„æˆã€‚å¤´ä¿¡æ¯å›ºå®šä½¿ç”¨ 9 ä½å­—èŠ‚è¡¨ç¤ºï¼Œå…·ä½“ç”± 1 ä¸ª UInt8ï¼ˆ1 å­—èŠ‚ï¼‰æ•´å‹å’Œ 2 ä¸ª UInt32ï¼ˆ4 å­—èŠ‚ï¼‰æ•´å‹ç»„æˆï¼Œåˆ†åˆ«ä»£è¡¨ä½¿ç”¨çš„<strong>å‹ç¼©ç®—æ³•ç±»å‹</strong>ã€<strong>å‹ç¼©åçš„æ•°æ®å¤§å°</strong>å’Œ<strong>å‹ç¼©å‰çš„æ•°æ®å¤§å°</strong>ã€‚<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t8ij4yt1j20l70gjq41.jpg\" alt=\"\" /><br />\nMergeTree åœ¨æ•°æ®å…·ä½“å†™å…¥è¿‡ç¨‹ä¸­ï¼Œä¼šæŒ‰ç…§ç´¢å¼•ç²’åº¦ï¼ŒæŒ‰æ‰¹æ¬¡è·å–æ•°æ®å¹¶è¿›è¡Œå¤„ç†ã€‚</p>\n<ol>\n<li>å¤šå¯¹ä¸€<br />\nå•ä¸ªæ‰¹æ¬¡æ•°æ® <code>SIZE &lt; 64KB</code> ; å¦‚æœå•ä¸ªæ‰¹æ¬¡æ•°æ®å°äº 64KBï¼Œåˆ™ç»§ç»­è·å–ä¸‹ä¸€æ‰¹æ•°æ®ï¼Œç›´è‡³ç´¯ç§¯åˆ° SIZE &gt;= 64KB æ—¶ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªå‹ç¼©æ•°æ®å—ï¼›</li>\n<li>ä¸€å¯¹ä¸€<br />\nå•ä¸ªæ‰¹æ¬¡æ•°æ® <code>64KB &lt;= SIZE &lt;= 1MB</code> : å¦‚æœå•ä¸ªæ‰¹æ¬¡æ•°æ®å¤§å°æ°å¥½åœ¨ 64KB ä¸ 1MB ä¹‹é—´ï¼Œåˆ™ç›´æ¥ç”Ÿæˆä¸‹ä¸€ä¸ªå‹ç¼©æ•°æ®å—</li>\n<li>ä¸€å¯¹å¤š<br />\nå•ä¸ªæ‰¹æ¬¡æ•°æ®  <code>SIZE &gt; 1MB</code> ; å¦‚æœå•ä¸ªæ‰¹æ¬¡æ•°æ®ç›´æ¥è¶…è¿‡ 1MBï¼Œåˆ™é¦–å…ˆæŒ‰ç…§ 1MB å¤§å°æˆªæ–­å¹¶ç”Ÿæˆä¸‹ä¸€ä¸ªæ•°æ®å—ã€‚å‰©ä½™æ•°æ®ç»§ç»­æŒ‰ç…§å¤§å°åˆ¤æ–­æ‰§è¡Œã€‚<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1t8l8gcy0j20qa0bpgmx.jpg\" alt=\"\" /></li>\n</ol>\n<h2 id=\"æ•°æ®æ ‡è®°\"><a class=\"anchor\" href=\"#æ•°æ®æ ‡è®°\">#</a> æ•°æ®æ ‡è®°</h2>\n<h3 id=\"æ•°æ®æ ‡è®°çš„ç”Ÿæˆè§„åˆ™\"><a class=\"anchor\" href=\"#æ•°æ®æ ‡è®°çš„ç”Ÿæˆè§„åˆ™\">#</a> æ•°æ®æ ‡è®°çš„ç”Ÿæˆè§„åˆ™</h3>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t8mkx3sxj217l0kvacu.jpg\" alt=\"\" /><br />\nå¯ä»¥çœ‹å‡ºæ•°æ®æ ‡è®°ç‰¹å¾ï¼š</p>\n<ol>\n<li>æ•°æ®æ ‡è®°æ–‡ä»¶å’Œç´¢å¼•åŒºé—´æ˜¯å¯¹é½çš„ã€‚éƒ½æ˜¯æŒ‰ç…§ <code>index_granularity</code>  çš„ç²’åº¦é—´éš”åˆ’åˆ†ã€‚</li>\n<li>æ•°æ®æ ‡è®°æ–‡ä»¶å’Œ.bin æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”ã€‚æ¯ä¸€ä¸ªåˆ—å­—æ®µ [column].bin æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ [column].mrk æ•°æ®æ ‡è®°æ–‡ä»¶ï¼Œç”¨äºè®°å½•æ•°æ®åœ¨.bin æ–‡ä»¶ä¸­åç§»é‡ä¿¡æ¯ã€‚<br />\nä¸€è¡Œæ ‡è®°æ•°æ®ä½¿ç”¨å…ƒç»„è¡¨ç¤ºï¼ŒåŒ…å«ä¸¤ä¸ªæ•´å‹æ•°æ®çš„åç§»ä¿¡æ¯ï¼ˆå‹ç¼©æ–‡ä»¶ä¸­åç§»é‡ï¼Œè§£å‹ç¼©å—ä¸­çš„åç§»é‡ï¼‰ã€‚æ ‡è®°æ•°æ®ä¸ä¸€çº§ç´¢å¼•ä¸åŒï¼Œå®ƒä¸èƒ½å¸¸é©»å†…å­˜ï¼Œè€Œæ˜¯ä½¿ç”¨ LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç¼“å­˜ç­–ç•¥åŠ å¿«å…¶å–ç”¨é€Ÿåº¦ã€‚<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t8si3uiyj20vi0u0k06.jpg\" alt=\"\" height=\"350px\" /></li>\n</ol>\n<h3 id=\"æ•°æ®æ ‡è®°çš„å·¥ä½œæ–¹å¼\"><a class=\"anchor\" href=\"#æ•°æ®æ ‡è®°çš„å·¥ä½œæ–¹å¼\">#</a> æ•°æ®æ ‡è®°çš„å·¥ä½œæ–¹å¼</h3>\n<p>åœ¨ MergeTree è¯»å–æ•°æ®æ—¶ï¼Œå¿…é¡»é€šè¿‡æ ‡è®°æ•°æ®çš„ä½ç½®ä¿¡æ¯æ‰¾åˆ°æ‰€éœ€è¦çš„æ•°æ®ã€‚æŸ¥æ‰¾è¿‡ç¨‹å¤§è‡´åˆ†ä¸º<strong>è¯»å–å‹ç¼©æ•°æ®å—</strong>å’Œ<strong>è¯»å–æ•°æ®</strong>ä¸¤ä¸ªæ­¥éª¤ï¼š<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t8u5r76gj210w0kmtat.jpg\" alt=\"\" /><br />\nMergeTree å¦‚ä½•å®šä½å‹ç¼©æ•°æ®å—å¹¶è¯»å–æ•°æ®ï¼š</p>\n<ol>\n<li><strong>è¯»å–å‹ç¼©æ•°æ®å—</strong>ï¼šåœ¨æŸ¥è¯¢æŸä¸€åˆ—æ•°æ® MergeTree æ— é¡»ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ª.bin æ–‡ä»¶ã€‚å€ŸåŠ©æ ‡è®°æ–‡ä»¶ä¸­çš„å‹ç¼©æ–‡ä»¶åç§»é‡åŠ è½½æŒ‡å®šçš„æ•°æ®å‹ç¼©å—ã€‚</li>\n<li><strong>è¯»å–æ•°æ®</strong>ï¼šè§£å‹åçš„æ•°æ®ï¼ŒMergeTree å¹¶ä¸éœ€è¦ä¸€æ¬¡æ€§æ‰«ææ•´æ®µè§£å‹æ•°æ®ï¼Œå€Ÿä½æ ‡è®°æ–‡ä»¶ä¸­ä¿å­˜çš„æ•°æ®å—ä¸­åç§»é‡ä»¥ <code>index_granularity</code>  çš„ç²’åº¦åŠ è½½ç‰¹å®šä¸€å°æ®µ</li>\n</ol>\n<p>çœ‹äº†è¿™ä¹ˆå¤šæ˜¯ä¸æ˜¯æ™•ä¹ä¹çš„ï¼Œè¿™å‡ ä¸ªä¹‹é—´åˆ°åº•ä»€ä¹ˆå…³ç³»ï¼Œclickhouse åˆ°åº•ä»å¤´åˆ°å°¾çš„å­˜å‚¨æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/75c23013ly8h1t8xno7oqj207i07it8q.jpg\" alt=\"\" height=\"150px\" /><br />\né‚£æ¥æ‹ä¸€æ‹ï½</p>\n<h2 id=\"å¯¹äºåˆ†åŒº-ç´¢å¼•-æ ‡è®°å’Œå‹ç¼©æ•°æ®çš„ååŒæ€»ç»“\"><a class=\"anchor\" href=\"#å¯¹äºåˆ†åŒº-ç´¢å¼•-æ ‡è®°å’Œå‹ç¼©æ•°æ®çš„ååŒæ€»ç»“\">#</a> å¯¹äºåˆ†åŒºã€ç´¢å¼•ã€æ ‡è®°å’Œå‹ç¼©æ•°æ®çš„ååŒæ€»ç»“</h2>\n<h3 id=\"å†™å…¥è¿‡ç¨‹\"><a class=\"anchor\" href=\"#å†™å…¥è¿‡ç¨‹\">#</a> å†™å…¥è¿‡ç¨‹</h3>\n<ol>\n<li>ç”Ÿæˆåˆ†åŒºç›®å½•ï¼ˆä¼´éšæ¯ä¸€æ¬¡ insert æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„åˆ†åŒºç›®å½•ï¼‰ï¼›</li>\n<li>åœ¨åç»­çš„æŸä¸ªæ—¶åˆ»ï¼Œåˆå¹¶ç›¸åŒåˆ†åŒºçš„ç›®å½•ï¼›</li>\n<li>æŒ‰ç…§ <code>index_granularity</code>  ç´¢å¼•ç²’åº¦ï¼Œåˆ†åˆ«ç”Ÿæˆ <code>primary.idx</code>  ç´¢å¼•æ–‡ä»¶ã€äºŒçº§ç´¢å¼•ã€æ¯ä¸€åˆ—å­—æ®µçš„ <code>.mrk</code>  æ•°æ®æ ‡è®°å’Œ <code>.bin</code>  å‹ç¼©æ•°æ®æ–‡ä»¶ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t8z4if1ej20qc0f3q4g.jpg\" alt=\"\" /></li>\n</ol>\n<h3 id=\"æŸ¥è¯¢è¿‡ç¨‹\"><a class=\"anchor\" href=\"#æŸ¥è¯¢è¿‡ç¨‹\">#</a> æŸ¥è¯¢è¿‡ç¨‹</h3>\n<p>ç´¢å¼•çš„æŸ¥è¯¢æ­¥éª¤åœ¨ä¸Šé¢æåˆ°è¿‡ï¼Œæ˜¯åˆ©ç”¨ <code>MarkRange</code>  æ¥å®Œæˆï¼Œé€’å½’æ¥æŸ¥è¯¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç»ˆçš„èŒƒå›´ã€‚æ‰¾åˆ°äº†èŒƒå›´ä¹‹åæˆ‘ä»¬å°±éœ€è¦ç›´åˆ°æ€ä¹ˆå–å‡ºè¿™éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ—¶å€™å°±ç”¨åˆ°äº† <code>.mrk</code>  æ ‡è®°æ–‡ä»¶å’Œ <code>.bin</code>  æ•°æ®å‹ç¼©æ–‡ä»¶ï¼Œå› ä¸ºæ ‡è®°æ–‡ä»¶å’Œç´¢å¼•åŒºé—´æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥åœ¨æ‰¾å‡ºäº†è¦ç”¨åˆ°å“ªäº› <code>MarkRange</code>  ä¹‹åï¼Œå°±ç›¸å½“äºæ˜¯æ‰¾åˆ°äº† <code>.mrk</code>  æ ‡è®°æ–‡ä»¶ä¸­è¦ç”¨åˆ°å“ªäº›æ•°æ®å…ƒç»„ï¼Œåˆ©ç”¨<em>å‹ç¼©æ–‡ä»¶åç§»é‡</em>æ‰¾åˆ°è¦å“ªäº›å‹ç¼©å¿«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶ååˆ©ç”¨<em>è§£å‹ç¼©å—çš„åç§»é‡</em>æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/75c23013ly8h1t90dnrkqj20rt0g2ta3.jpg\" alt=\"\" /><br />\nç´¢å¼•æ–‡ä»¶ï¼Œæ ‡è®°æ–‡ä»¶ï¼Œå‹ç¼©å¿«ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<ol>\n<li><strong>å¤šå¯¹ä¸€</strong>ï¼šå½“ä¸€ä¸ª <code>index_granularity</code>  å†…çš„æ•°æ®å¤§å° size å°äº 64KB æ—¶ä¼šå‡ºç°è¿™ç§å…³ç³»<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/75c23013ly8h1t98pkxl6j20pg0bb3zk.jpg\" alt=\"\" /></li>\n<li><strong>ä¸€å¯¹ä¸€</strong>ï¼šå½“ä¸€ä¸ª <code>index_granularity</code>  å†…çš„æ•°æ®å¤§å° size å¤§äºç­‰äº 64KB å°äºç­‰äº 1MB æ—¶ä¼šå‡ºç°è¿™ç§å…³ç³»<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t99gmeh1j20ow0aemxw.jpg\" alt=\"\" /></li>\n<li><strong>ä¸€å¯¹å¤š</strong>ï¼šå½“ä¸€ä¸ª <code>index_granularity</code>  å†…çš„æ•°æ®å¤§å° size å¤§äº 1MB æ—¶ä¼šå‡ºç°è¿™ç§å…³ç³»<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/75c23013ly8h1t9ddamysj20pm0b4aay.jpg\" alt=\"\" /></li>\n</ol>\n",
            "tags": [
                "å¤§æ•°æ®",
                "æŸ¥è¯¢åˆ†æ",
                "Clickhouse",
                "å¤§æ•°æ®",
                "æŸ¥è¯¢å¼•æ“",
                "Clickhouse"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/24/life/%E4%B8%80%E7%AF%87%E4%B8%8D%E7%9F%A5%E9%81%93%E8%AF%A5%E8%B5%B7%E4%BB%80%E4%B9%88%E5%90%8D%E5%AD%97%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/",
            "url": "https://sprenedayf.com/2022/04/24/life/%E4%B8%80%E7%AF%87%E4%B8%8D%E7%9F%A5%E9%81%93%E8%AF%A5%E8%B5%B7%E4%BB%80%E4%B9%88%E5%90%8D%E5%AD%97%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/",
            "title": "ä¸€ç¯‡ä¸çŸ¥é“è¯¥èµ·ä»€ä¹ˆåå­—çš„ç¢ç¢å¿µ",
            "date_published": "2022-04-24T03:12:03.000Z",
            "content_html": "<h1 id=\"èµ·\"><a class=\"anchor\" href=\"#èµ·\">#</a> èµ·</h1>\n<p>æœ€è¿‘å¯¹å¥³æœ¬å­æ–‡å­¦ä¸Šäº†å¤´....<br />\n èµ·å› æ˜¯çªç„¶æ¥æ”¶åˆ°äº†ä¸€ä»½å®‰åˆ©æ˜¯ä¸€éƒ¨å°è¯´ â€”â€”ã€Šä½™ç”Ÿä¸ºæœŸã€‹ï¼Œæƒ³ç€é—²æ¥æ— äº‹å°±çœ‹çœ‹å°è¯´å§ï¼Œè€Œä¸”éƒ½è¯´è¿™æ˜¯ä¸€ä¸ª HE çš„å°è¯´ï¼Œæ‰€ä»¥æƒ³æ¥ä¹Ÿå¯ä»¥çœ‹çš„æ¯”è¾ƒå¼€å¿ƒçš„ï¼Œæ²¡æƒ³åˆ°ï¼Œç‹ ç‹ çš„è¢«è™åˆ°äº†...<br />\n ä¸èƒ½å¦è®¤çš„æ˜¯ç¡®å®å¾ˆç”œï¼Œä½†æ˜¯å¥¹ä»¬ä¹‹é—´é”™è¿‡çš„é‚£ 6 å¹´ï¼ŒåŒ…æ‹¬å’Œå®¶é‡Œäººçš„å†²çªï¼Œè¿™ä¸€åˆ‡çœŸçš„çœ‹çš„å¥½å‹æŠ‘ï¼Œç”šè‡³ä¼šè§‰å¾—å¥¹ä»¬æ‹çˆ±ä¸­çš„é‚£äº›ç”œèœœä¹Ÿä¸è¿‡æ˜¯ä¸ºäº†æ‰¿å—åæœŸçš„è¿™äº› &quot;è…¥é£è¡€é›¨&quot;ã€‚è€Œè¿™äº›ï¼Œæˆ‘ä¼¼ä¹éƒ½ç»å†è¿‡...<br />\n æˆ‘æ²¡æœ‰ä¹¦ä¸­çš„è§å®›é’å’Œæ—ç¾¡ç»å†é‚£ä¹ˆå¤šï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¹¸è¿çš„å¯ä»¥åƒå¥¹ä»¬ä¸€æ ·èƒ½æœ€ç»ˆå¾—åˆ°çˆ¶æ¯çš„æ”¯æŒï¼Œå°è¯´ç»ˆç©¶è¿˜æ˜¯å°è¯´ï¼ŒæŠŠç”Ÿæ´»ä¸­çš„çŸ›ç›¾æ”¾å¤§ï¼Œè®©ä½œè€…çš„ç†æƒ³å®ç°ï¼Œè€Œç°å®ç”Ÿæ´»çš„å¤§å¤šæ•°ï¼Œåªèƒ½å› ä¸ºä¹¦ä¸­çš„å†™å®ä¼¤æ„Ÿï¼Œå¯¹ä¹¦ä¸­çš„å®Œç¾æ„Ÿå¹... æ‰€ä»¥ä¸€æ•´ä¸ªäººçœŸçš„æ˜¯ååˆ†ä½è½äº†...</p>\n<h1 id=\"æ‰¿\"><a class=\"anchor\" href=\"#æ‰¿\">#</a> æ‰¿</h1>\n<p>æˆå¹´äººå“ªæœ‰æ—¶é—´æš—è‡ªç¥ä¼¤ï¼Œä½†æ˜¯ã€Šä½™ç”Ÿä¸ºæœŸã€‹çœŸçš„å¾ˆä¸Šå¤´ï¼Œæ‰€ä»¥æˆ‘å†³å®šçœ‹çœ‹æœ€è¿‘å£ç¢‘ä¸é”™çš„ã€Šå¤æ—¥é‡ç°ã€‹è®©è‡ªå·±èµ¶ç´§ä»å°è¯´ä¸­æŠ½èº«ã€‚ä¸å¾—ä¸è¯´ï¼Œç”»é£çœŸçš„å¾ˆç²¾ç¾ï¼Œæ•…äº‹ä¹Ÿååˆ†å¥½ï¼Œç¡®å®è®©æˆ‘å¿˜äº†è§é˜¿å§¨çš„å­˜åœ¨<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1knkaivkjj30k00ciwg5.jpg\" alt=\"\" /><br />\nåœ¨è¿™é‡Œè¿˜æ˜¯è¦è¯´ä¸€ä¸‹æ„Ÿæ©çš„å¿ƒã€‚<br />\nä½†æ˜¯è¿˜æ˜¯å¿˜ä¸äº†é‚£éƒ¨å°è¯´ç»™æˆ‘å¸¦æ¥çš„æ€è€ƒï¼Œæ‰€ä»¥æˆ‘å†³å®šè¿˜æ˜¯å…¥ä¸€ä¸‹å¥³æœ¬å­å‘ï¼Œæ­¤æ—¶åˆæ”¶åˆ°äº†å¦ä¸€éƒ¨å®‰åˆ© â€”â€”ã€Šç»ˆå°†æˆä¸ºä½ ã€‹</p>\n<h1 id=\"è½¬\"><a class=\"anchor\" href=\"#è½¬\">#</a> è½¬</h1>\n<p>å¦‚æœè¯´æˆ‘çš„ä½è½æ˜¯ã€Šä½™ç”Ÿä¸ºæœŸã€‹è¿™éƒ¨å°è¯´å¸¦æ¥çš„ï¼Œé‚£ä¹ˆç°åœ¨èƒ½å¤ŸåŠªåŠ›å»æ‰“èµ·ç²¾ç¥å°±æ˜¯ã€Šç»ˆå°†æˆä¸ºä½ ã€‹å¸¦æ¥çš„ã€‚<br />\nè™½ç„¶ã€Šç»ˆå°†æˆä¸ºä½ ã€‹è®²è¿°çš„æ˜¯ <code>ä¸ƒæµ·ç¯å­</code> å’Œ <code>å°ç³¸ä¾‘</code> ä¹‹é—´çš„æ„Ÿæƒ…ï¼Œä½†æˆ‘è§‰å¾—è¿™éƒ¨æ¼«ç”»ç»™æˆ‘å¸¦æ¥çš„ä¸ä»…ä»…æ˜¯ä¸€æ®µæ‹çˆ±æ•…äº‹ã€‚<br />\nä¸ƒæµ·ç¯å­çš„è‡ªæˆ‘æŒ£æ‰ä¸æ•‘èµã€æˆé•¿ä¸è‡ªæˆ‘å‘ç°ï¼ŒçœŸçš„æ˜¯æ·±æ·±çš„å¸¦åŠ¨äº†æˆ‘ã€‚è°ä¸æ˜¯ä¸€ç›´åœ¨æ‰®æ¼”ä¸åŒçš„è§’è‰²å‘¢ï¼Œåªä¸è¿‡ç¯å­çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼Œå¥¹å°±æ˜¯è¦æˆä¸ºå§å§ï¼Œæˆä¸ºå¥¹çœ¼ä¸­çš„å§å§ï¼Œè€Œæˆ‘å¹¶æ²¡æœ‰ä¸€ä¸ªå…·ä½“çš„äººï¼Œæƒ³è¦æˆä¸ºé‚£ä¸ªäººï¼Œåªæ˜¯ä¸æ–­åœ°æŒ£æ‰ï¼ŒåŠªåŠ›çš„ç”Ÿæ´»ã€‚<br />\nç¯å­çœŸçš„å¾ˆå¹¸è¿å•Šï¼Œå¥¹é‡åˆ°äº†ä¸€ä¸ªå¸¦ç€å¥¹æ”¹å˜çš„ä¾‘ï¼Œå¥¹æ¥å—ç¯å­çš„å…¨éƒ¨ï¼Œç”¨æ¸©æŸ”å¸¦é¢†å°‘å¥³èµ°å‡ºäº†<span class=\"red\">è¦æˆä¸ºè°</span>çš„é˜´å½±ï¼Œè®©å¥¹å½»å½»åº•åº•åœ°æˆä¸ºäº†ä¸ƒæµ·ç¯å­è¿™ä¸ªäººã€‚<br />\nå½“ç„¶æ¼«ç”»ç»™æˆ‘å¸¦æ¥çš„æ„ŸåŠ¨ä¸ä»…ä»…æ˜¯ä¸ƒæµ·ç¯å­å’Œå°ç³¸ä¾‘è¿™ä¸€å¯¹ï¼Œå…¶ä»–è§’è‰²çš„å¡‘é€ ä¹Ÿæ˜¯ç›¸å½“æˆåŠŸï¼ŒçœŸçš„å¾ˆå¹¸è¿èƒ½å¤Ÿé‡åˆ°è¿™æ ·ä¸€éƒ¨æ¼«ç”»ï¼<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1knxxi54nj30q60ijwj8.jpg\" alt=\"\" /></p>\n<h1 id=\"åˆ\"><a class=\"anchor\" href=\"#åˆ\">#</a> åˆ</h1>\n<p>çœ‹å®Œå°è¯´å’Œæ¼«ç”»çš„æˆ‘ï¼Œå½“æ—¶æ˜¯ååˆ†ç¾¡æ…•å…¶ä¸­çš„è§’è‰²çš„ã€‚ä¸€å¼€å§‹ç¾¡æ…•æ—ç¾¡èƒ½å¤Ÿæ‹¥æœ‰æ¸©æŸ”çš„è§é˜¿å§¨ï¼Œåæ¥å´åˆè§‰å¾—è§é˜¿å§¨èƒ½å¤Ÿæ‹¥æœ‰æ—ç¾¡æ‰æ˜¯æœ€å¹¸è¿çš„äº‹ã€‚ç¾¡æ…•ç¯å­èƒ½å¤Ÿæ‹¥æœ‰æ¸©æŸ”çš„ä¾‘ï¼Œä¸€ç›´å®ˆæŠ¤åœ¨å¥¹çš„èº«è¾¹ï¼Œæ¥çº³é‚£ä¸ªçŸ›ç›¾çš„å¥¹ã€‚<span class=\"red\">ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½å¤Ÿæ‹¥æœ‰è¿™äº›å‘¢ï¼Ÿ</span>ç†è§£çš„å®¶äººï¼Œæ”¯æŒçš„åŒä¼´ï¼Œæ¸©æŸ”è€Œåˆå¼ºå¤§çš„å¦ä¸€åŠã€‚<br />\næƒ³å¤šäº†ï¼Œåˆæ„Ÿè§‰é‡Šæ€€ï¼Œæ¯•ç«Ÿé‚£æ˜¯è™šæ„çš„æ•…äº‹ï¼Œæºæ‚äº†å¤šå°‘ç¾å¥½çš„æ„¿æœ›æ‰å†™æˆçš„æ•…äº‹ã€‚æˆ‘æ˜¯å¾ˆå¸Œæœ›å¯ä»¥æœ‰ä¸€ä¸ªæ¸©æŸ”çš„ &quot;å§å§&quot; èƒ½å¤Ÿé™ªæˆ‘é•¿å¤§ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ï¼Œ<span class=\"red\">æˆ‘å¸Œæœ›è‡ªå·±èƒ½å¤Ÿæˆä¸ºé‚£æ ·æ¸©æŸ”åˆå¼ºå¤§çš„å­˜åœ¨</span>ã€‚<br />\nç°åœ¨å›å¤´æƒ³æƒ³ï¼Œä¸ç®¡æ˜¯æˆ‘è¿½æ˜Ÿä¹Ÿå¥½ï¼Œçœ‹æ¼«ç”»ä¹Ÿå¥½ï¼Œæ€»æ˜¯ä¼šé€šè¿‡å¥¹ä»¬æ¥è§‚å¯Ÿè‡ªå·±ï¼Œä¹Ÿæ€»æ˜¯å¸Œæœ›è‡ªå·±ä¹Ÿèƒ½åƒå¥¹ä»¬é‚£æ ·åšå¼ºå’Œå‹‡æ•¢ã€‚åœ¨å¿ƒæƒ…ä½è½çš„æ—¶å€™ã€åœ¨èµ°ä¸å‡ºæ¥çš„æ—¶å€™ã€åœ¨é‡åˆ°éš¾é¢˜çš„æ—¶å€™... æ€»æ˜¯ä¼šæƒ³å¥¹ä»¬ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿä¼šè¿™æ ·è‡ªæ€¨è‡ªè‰¾å—ï¼Ÿä¼šè¿™æ ·æ”¾å¼ƒå—ï¼Ÿä¼šè¿™æ ·æŠ±æœ‰é—æ†¾å—ï¼Ÿ<br />\nä¸€å‘³åœ°å¸Œæœ›èƒ½å¤Ÿä»åˆ«äººé‚£é‡Œæ±²å–æ¸©æš–å’Œé™ªä¼´ï¼Œä¸å¦‚æˆ‘ä¹Ÿèƒ½å¤Ÿæˆä¸ºé‚£æ ·çš„å­˜åœ¨å§ï¼Œåªè¦æˆ‘å†åŠªåŠ›ä¸€ç‚¹ï¼Œå†åšæŒä¸€ä¸‹ï¼Œä¸€å®šä¹Ÿèƒ½å¤Ÿæˆä¸ºå¥¹ä»¬é‚£æ ·ä¼˜ç§€çš„äººå§ã€‚<br />\nä½†æ˜¯äººéƒ½ä¼šç´¯ï¼Œä¼šå¸Œæœ›è‡ªå·±ä¹Ÿèƒ½å¤Ÿå¾—åˆ°ç†è§£å’Œæ”¯æŒï¼Œå°±è®©æˆ‘è‡ªç§çš„ä»ä¸è®¤è¯†æˆ‘çš„ä½ ä»¬èº«ä¸Šæ±²å–ä¸€ç‚¹åŠ›é‡å§.....</p>\n",
            "tags": [
                "ç”Ÿæ´»æ‚è°ˆ"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/19/Java/Kafka%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%851/",
            "url": "https://sprenedayf.com/2022/04/19/Java/Kafka%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%851/",
            "title": "Kafkaå­¦ä¹ ä¹‹æ—…1",
            "date_published": "2022-04-19T07:38:06.000Z",
            "content_html": "<h1 id=\"æ¶ˆæ¯é˜Ÿåˆ—\"><a class=\"anchor\" href=\"#æ¶ˆæ¯é˜Ÿåˆ—\">#</a> æ¶ˆæ¯é˜Ÿåˆ—</h1>\n<p>kafka æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œé‚£æˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸‹æ¶ˆæ¯é˜Ÿåˆ—èƒ½å¹²å˜›å§</p>\n<h2 id=\"åº”ç”¨åœºæ™¯\"><a class=\"anchor\" href=\"#åº”ç”¨åœºæ™¯\">#</a> åº”ç”¨åœºæ™¯</h2>\n<h3 id=\"å¼‚æ­¥å¤„ç†\"><a class=\"anchor\" href=\"#å¼‚æ­¥å¤„ç†\">#</a> å¼‚æ­¥å¤„ç†</h3>\n<p>æ¯”å¦‚ç”µå•†ç½‘ç«™ä¸­ï¼Œæ–°çš„ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œéœ€è¦å°†ç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼ŒåŒæ—¶è¿˜éœ€è¦é¢å¤–å‘é€æ³¨å†Œçš„é‚®ä»¶é€šçŸ¥ã€ä»¥åŠçŸ­ä¿¡æ³¨å†Œç ç»™ç”¨æˆ·ã€‚ä½†å› ä¸ºå‘é€é‚®ä»¶ã€å‘é€æ³¨å†ŒçŸ­ä¿¡éœ€è¦è¿æ¥å¤–éƒ¨çš„æœåŠ¡å™¨ï¼Œéœ€è¦é¢å¤–ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæ­¤æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥è¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œä»è€Œå®ç°å¿«é€Ÿå“åº”ã€‚<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1f34y78c0j31l60nu78c.jpg\" alt=\"\" height=\"350px\" /></p>\n<h3 id=\"ç³»ç»Ÿè§£è€¦\"><a class=\"anchor\" href=\"#ç³»ç»Ÿè§£è€¦\">#</a> ç³»ç»Ÿè§£è€¦</h3>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1f35oqmagj31l80pqq96.jpg\" alt=\"\" height=\"350px\" /></p>\n<h3 id=\"æµé‡å‰Šå³°\"><a class=\"anchor\" href=\"#æµé‡å‰Šå³°\">#</a> æµé‡å‰Šå³°</h3>\n<p><img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f36hvh3ij31i80puafa.jpg\" alt=\"\" height=\"350px\" /></p>\n<h3 id=\"æ—¥å¿—å¤„ç†\"><a class=\"anchor\" href=\"#æ—¥å¿—å¤„ç†\">#</a> æ—¥å¿—å¤„ç†</h3>\n<p><img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f374ob91j31l00kmmzg.jpg\" alt=\"\" height=\"350px\" /></p>\n<h2 id=\"æ¶ˆæ¯é˜Ÿåˆ—ä¸¤ç§æ¨¡å¼\"><a class=\"anchor\" href=\"#æ¶ˆæ¯é˜Ÿåˆ—ä¸¤ç§æ¨¡å¼\">#</a> æ¶ˆæ¯é˜Ÿåˆ—ä¸¤ç§æ¨¡å¼</h2>\n<h3 id=\"ç‚¹å¯¹ç‚¹\"><a class=\"anchor\" href=\"#ç‚¹å¯¹ç‚¹\">#</a> ç‚¹å¯¹ç‚¹</h3>\n<p><img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f38zfeugj319409cgmf.jpg\" alt=\"\" height=\"250px\" /><br />\nç‚¹å¯¹ç‚¹æ¨¡å¼ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ¯ä¸ªæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…ï¼ˆConsumerï¼‰(å³ä¸€æ—¦è¢«æ¶ˆè´¹ï¼Œæ¶ˆæ¯å°±ä¸å†åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­)</li>\n<li>å‘é€è€…å’Œæ¥æ”¶è€…é—´æ²¡æœ‰ä¾èµ–æ€§ï¼Œå‘é€è€…å‘é€æ¶ˆæ¯ä¹‹åï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ¥æ”¶è€…åœ¨è¿è¡Œï¼Œéƒ½ä¸ä¼šå½±å“åˆ°å‘é€è€…ä¸‹æ¬¡å‘é€æ¶ˆæ¯ï¼›</li>\n<li>æ¥æ”¶è€…åœ¨æˆåŠŸæ¥æ”¶æ¶ˆæ¯ä¹‹åéœ€å‘é˜Ÿåˆ—åº”ç­”æˆåŠŸï¼Œä»¥ä¾¿æ¶ˆæ¯é˜Ÿåˆ—åˆ é™¤å½“å‰æ¥æ”¶çš„æ¶ˆæ¯ï¼›</li>\n</ul>\n<h3 id=\"å‘å¸ƒè®¢é˜…\"><a class=\"anchor\" href=\"#å‘å¸ƒè®¢é˜…\">#</a> å‘å¸ƒè®¢é˜…</h3>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1f3aduxz3j319a0cqq4e.jpg\" alt=\"\" height=\"250px\" /><br />\nå‘å¸ƒ / è®¢é˜…æ¨¡å¼ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ¯ä¸ªæ¶ˆæ¯å¯ä»¥æœ‰å¤šä¸ªè®¢é˜…è€…ï¼›</li>\n<li>å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´æœ‰æ—¶é—´ä¸Šçš„ä¾èµ–æ€§ã€‚é’ˆå¯¹æŸä¸ªä¸»é¢˜ï¼ˆTopicï¼‰çš„è®¢é˜…è€…ï¼Œå®ƒå¿…é¡»åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ä¹‹åï¼Œæ‰èƒ½æ¶ˆè´¹å‘å¸ƒè€…çš„æ¶ˆæ¯ã€‚</li>\n<li>ä¸ºäº†æ¶ˆè´¹æ¶ˆæ¯ï¼Œè®¢é˜…è€…éœ€è¦æå‰è®¢é˜…è¯¥è§’è‰²ä¸»é¢˜ï¼Œå¹¶ä¿æŒåœ¨çº¿è¿è¡Œï¼›</li>\n</ul>\n<h1 id=\"kafkaä»‹ç»\"><a class=\"anchor\" href=\"#kafkaä»‹ç»\">#</a> kafka ä»‹ç»</h1>\n<p>ä¸Šé¢ç®€å•è¯´äº†ä¸‹æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³çš„ä¸œè¥¿ï¼Œæ˜¯ä¸æ˜¯ç£¨æ‹³æ“¦è¸µæƒ³äº†è§£ä¸‹ kafka äº†å‘¢<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f3j457ndj30c80c8t94.jpg\" alt=\"\" height=\"150px\" /><br />\n Kafka æ˜¯ç”± Apache è½¯ä»¶åŸºé‡‘ä¼šå¼€å‘çš„ä¸€ä¸ªå¼€æºæµå¹³å°ï¼Œç”± Scala å’Œ Java ç¼–å†™ã€‚</p>\n<h2 id=\"é›†ç¾¤ç»“æ„\"><a class=\"anchor\" href=\"#é›†ç¾¤ç»“æ„\">#</a> é›†ç¾¤ç»“æ„</h2>\n<p><img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f5at09uyj31co0u0zmd.jpg\" alt=\"\" height=\"450px\" /><br />\nKafka ä¸­æœ‰äº›æ ¸å¿ƒæ¦‚å¿µéœ€è¦æ˜ç¡®ä¸€ä¸‹ï¼š</p>\n<ul>\n<li><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>ï¼šç”Ÿäº§è€…æ˜¯å‘ topic å‘å¸ƒæ–°æ¶ˆæ¯çš„ Kafka å®¢æˆ·ç«¯ã€‚ç”Ÿäº§è€…å¯ä»¥å°†æ•°æ®å‘å¸ƒåˆ°æ‰€é€‰æ‹©çš„ topic ä¸­ã€‚ç”Ÿäº§è€…è´Ÿè´£å°†è®°å½•åˆ†é…åˆ° topic ä¸­çš„å“ªä¸€ä¸ª partition ä¸­ã€‚</li>\n<li><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼šæ¶ˆè´¹è€…æ˜¯ä» topic è®¢é˜…æ–°æ¶ˆæ¯çš„ Kafka å®¢æˆ·ç«¯ã€‚æ¶ˆè´¹è€…é€šè¿‡æ£€æŸ¥æ¶ˆæ¯çš„åç§»é‡æ¥åŒºåˆ†æ¶ˆæ¯æ˜¯å¦å·²è¯»ã€‚</li>\n<li><strong>æ¶ˆæ¯</strong>ï¼škafka çš„æ•°æ®å•å…ƒè¢«ç§°ä¸ºæ¶ˆæ¯ï¼Œæ¶ˆæ¯ç”±å­—èŠ‚æ•°ç»„ç»„æˆã€‚</li>\n<li><strong>Broker</strong> - ä¸€ä¸ªç‹¬ç«‹çš„ Kafka æœåŠ¡å™¨è¢«ç§°ä¸º Brokerã€‚Broker æ¥å—æ¥è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œä¸ºæ¶ˆæ¯è®¾ç½®åç§»é‡ï¼Œå¹¶æäº¤æ¶ˆæ¯åˆ°ç£ç›˜ä¿å­˜ï¼›æ¶ˆè´¹è€…å‘ Broker è¯·æ±‚æ¶ˆæ¯ï¼ŒBroker è´Ÿè´£è¿”å›å·²æäº¤çš„æ¶ˆæ¯ã€‚</li>\n<li><strong>ä¸»é¢˜ï¼ˆTopicï¼‰</strong>ï¼škafka ä¸­æ¶ˆæ¯è®¢é˜…å’Œå‘é€éƒ½æ˜¯åŸºäºæŸä¸ª topicã€‚å°±æ¯”å¦‚ä¸åŒ topic æœ‰ red velvetã€twice ç­‰ï¼Œæ¶ˆè´¹è€…å¯ä»¥æ ¹æ®è‡ªå·±æ„Ÿå…´è¶£çš„ topic æ¥è®¢é˜…æ¶ˆæ¯ï¼Œæ¯”å¦‚æˆ‘å¯¹ red velvet æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæˆ‘å°±è®¢é˜…è¯¥ topic çš„æ¶ˆæ¯ã€‚ç”Ÿäº§è€…ä¼šå°†ä¸åŒå¥³å›¢çš„æ¶ˆæ¯æ”¾åˆ°å¯¹åº”çš„ topic ä¸­ï¼Œç„¶åæ¶ˆè´¹è€…æ ¹æ®è‡ªå·±çš„è®¢é˜…å°±å¯ä»¥åªæ¥æ”¶è¯¥å¥³å›¢çš„æ¶ˆæ¯ã€‚\n<ul>\n<li>ä¸åŒä¸»é¢˜çš„æ¶ˆæ¯æ˜¯ç‰©ç†éš”ç¦»çš„ï¼›</li>\n<li>åŒä¸€ä¸ªä¸»é¢˜çš„æ¶ˆæ¯ä¿å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Broker ä¸Šã€‚ä½†ç”¨æˆ·åªéœ€æŒ‡å®šæ¶ˆæ¯çš„ Topic å³å¯ç”Ÿäº§æˆ–æ¶ˆè´¹æ•°æ®è€Œä¸å¿…å…³å¿ƒæ•°æ®å­˜äºä½•å¤„ã€‚</li>\n<li>ä¸»é¢˜æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºã€‚</li>\n</ul>\n</li>\n<li><strong>åˆ†åŒºï¼ˆPartitionï¼‰</strong>ï¼šå¤§å¤šæ•°æ¶ˆæ¯ç³»ç»Ÿï¼ŒåŒä¸€ä¸ª topic ä¸‹çš„æ¶ˆæ¯ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªé˜Ÿåˆ—ã€‚åˆ†åŒºçš„æ¦‚å¿µå°±æ˜¯æŠŠè¿™ä¸ªé˜Ÿåˆ—åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå°é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªå°é˜Ÿåˆ—å°±æ˜¯ä¸€ä¸ªåˆ†åŒºã€‚<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1f5ndo01rj313a0u0mzd.jpg\" alt=\"\" height=\"450px\" /><br />\næ— åˆ†åŒºæ—¶ï¼Œä¸€ä¸ª topic åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…åœ¨æ¶ˆè´¹è¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚é‡‡ç”¨åˆ†åŒºåï¼Œå¦‚æœæœ‰ä¸¤ä¸ªåˆ†åŒºï¼Œæœ€å¤šä¸¤ä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹ï¼Œæ¶ˆè´¹çš„é€Ÿåº¦è‚¯å®šä¼šæ›´å¿«ã€‚ä¹Ÿå°±æ˜¯è¯´<span class=\"red\">åˆ†åŒºçš„è®¾è®¡å¤§å¤§çš„æå‡äº† kafka çš„ååé‡</span>ï¼ï¼<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1f5q8dqvmj31h70u0tax.jpg\" alt=\"\" height=\"450px\" /><br />\nç»“åˆä¸Šå›¾è¯´ä¸€ä¸‹éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š\n<ul>\n<li>ä¸€ä¸ª partition åªèƒ½è¢«åŒç»„çš„ä¸€ä¸ª consumer æ¶ˆè´¹</li>\n<li>åŒä¸€ä¸ªç»„é‡Œçš„ä¸€ä¸ª consumer å¯ä»¥æ¶ˆè´¹å¤šä¸ª partition</li>\n<li>æ¶ˆè´¹æ•ˆç‡æœ€é«˜çš„æƒ…å†µæ˜¯ partition å’Œ consumer æ•°é‡ç›¸åŒã€‚è¿™æ ·ç¡®ä¿æ¯ä¸ª consumer ä¸“èŒè´Ÿè´£ä¸€ä¸ª partitionã€‚</li>\n<li>consumer æ•°é‡ä¸èƒ½å¤§äº partition æ•°é‡ã€‚ç”±äºç¬¬ä¸€ç‚¹çš„é™åˆ¶ï¼Œå½“ consumer å¤šäº partition æ—¶ï¼Œå°±ä¼šæœ‰ consumer é—²ç½®ã€‚</li>\n</ul>\n</li>\n<li><strong>å‰¯æœ¬ï¼ˆReplicaï¼‰</strong>ï¼šKafka ä¸­åŒä¸€æ¡æ¶ˆæ¯èƒ½å¤Ÿè¢«æ‹·è´åˆ°å¤šä¸ªåœ°æ–¹ä»¥æä¾›æ•°æ®å†—ä½™ã€‚æ¯ä¸ªåˆ†åŒºçš„æ•°æ®éƒ½ä¼šæœ‰å¤šä»½å‰¯æœ¬ï¼Œä»¥æ­¤æ¥ä¿è¯ Kafka çš„é«˜å¯ç”¨ã€‚<br />\ntopicã€partitionã€replica çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1f5z60abdj30u007kmxr.jpg\" alt=\"\" height=\"300px\" /><br />\ntopic ä¸‹ä¼šåˆ’åˆ†å¤šä¸ª partitionï¼Œæ¯ä¸ª partition éƒ½æœ‰è‡ªå·±çš„ replicaï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ˜¯ leader replicaï¼Œå…¶ä½™çš„æ˜¯ follower replicaã€‚<br />\næ¶ˆæ¯è¿›æ¥çš„æ—¶å€™ä¼šå…ˆå­˜å…¥ leader replicaï¼Œç„¶åä» leader replica å¤åˆ¶åˆ° follower replicaã€‚åªæœ‰å¤åˆ¶å…¨éƒ¨å®Œæˆæ—¶ï¼Œconsumer æ‰å¯ä»¥æ¶ˆè´¹æ­¤æ¡æ¶ˆæ¯ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ„å¤–å‘ç”Ÿæ—¶ï¼Œæ•°æ®å¯ä»¥æ¢å¤ã€‚consumer çš„æ¶ˆè´¹ä¹Ÿæ˜¯ä» leader replica è¯»å–çš„ã€‚<br />\nç”±æ­¤å¯è§ï¼Œleader replica åšäº†å¤§é‡çš„å·¥ä½œã€‚æ‰€ä»¥å¦‚æœä¸åŒ partition çš„ leader replica åœ¨ kafka é›†ç¾¤çš„ broker ä¸Šåˆ†å¸ƒä¸å‡åŒ€ï¼Œå°±ä¼šé€ æˆè´Ÿè½½ä¸å‡è¡¡ã€‚kafka é€šè¿‡è½®è¯¢ç®—æ³•ä¿è¯ leader replica æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨å¤šä¸ª broker ä¸Šã€‚\n<ul>\n<li>Replica å‡åŒ€åˆ†é…åœ¨ Broker ä¸Šï¼ŒåŒä¸€ä¸ª partition çš„ replica ä¸ä¼šåœ¨åŒä¸€ä¸ª borker ä¸Š</li>\n<li>åŒä¸€ä¸ª partition çš„ Replica æ•°é‡ä¸èƒ½å¤šäº broker æ•°é‡ã€‚å¤šä¸ª replica ä¸ºäº†æ•°æ®å®‰å…¨ï¼Œä¸€å° server å­˜å¤šä¸ª replica æ²¡æœ‰æ„ä¹‰ã€‚server æŒ‚æ‰ï¼Œä¸Šé¢çš„å‰¯æœ¬éƒ½è¦æŒ‚æ‰ã€‚</li>\n<li>åˆ†åŒºçš„ leader replica å‡è¡¡åˆ†å¸ƒåœ¨ broker ä¸Šã€‚æ­¤æ—¶é›†ç¾¤çš„è´Ÿè½½æ˜¯å‡è¡¡çš„ã€‚è¿™å°±å«åšåˆ†åŒºå¹³è¡¡</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "Java",
                "ä¸­é—´ä»¶",
                "Kafka",
                "æ¡†æ¶",
                "ä¸­é—´ä»¶",
                "Kafka"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/19/Java/Kafka%E7%9A%84%E5%AE%89%E8%A3%85/",
            "url": "https://sprenedayf.com/2022/04/19/Java/Kafka%E7%9A%84%E5%AE%89%E8%A3%85/",
            "title": "Kafkaçš„å®‰è£…",
            "date_published": "2022-04-19T03:22:00.000Z",
            "content_html": "<h1 id=\"åˆ©ç”¨dockerå®‰è£…\"><a class=\"anchor\" href=\"#åˆ©ç”¨dockerå®‰è£…\">#</a> åˆ©ç”¨ Docker å®‰è£…</h1>\n<p>ä¹‹å‰æˆ‘è¯´è¿‡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿå¼€å§‹å®è·µï¼Œæ‰€ä»¥é€‰æ‹©äº†åˆ©ç”¨ docker æ¥å®‰è£…ç»„ä»¶ï¼Œdocker-compose æ¥è§£å†³é€šä¿¡é—®é¢˜ï¼Œè¿™æ¬¡ä¹Ÿä¸€æ ·ï¼Œå…ˆç”¨ docker å®‰è£…ä¸€ä¸ª kafka é›†ç¾¤æ¥ä¸Šæ‰‹ç©ç©ï¼Œä¹‹åæœ‰æ—¶é—´ä¼šå†ä»å¤´åˆ°å°¾æ­å»ºä¸€éé›†ç¾¤çš„ã€‚</p>\n<h2 id=\"åˆ›å»ºä¸€ä¸ªdockerç½‘ç»œ\"><a class=\"anchor\" href=\"#åˆ›å»ºä¸€ä¸ªdockerç½‘ç»œ\">#</a> åˆ›å»ºä¸€ä¸ª docker ç½‘ç»œ</h2>\n<p>é€šè¿‡ <code>docker network create zookeeper_network</code>  å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º <code>zookeeper_network</code>  çš„ Docker ç½‘ç»œ<br />\nè¿™æ—¶å€™ä½ åˆ©ç”¨ <code>docker network ls</code>  å¯ä»¥çœ‹åˆ°åˆ›å»ºå‡ºæ¥äº†<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1f0wunn90j30wm08egms.jpg\" alt=\"\" height=\"250px\" /></p>\n<h2 id=\"æ­å»ºzookeeperé›†ç¾¤\"><a class=\"anchor\" href=\"#æ­å»ºzookeeperé›†ç¾¤\">#</a> æ­å»º zookeeper é›†ç¾¤</h2>\n<p>ä¸ºäº†è§£è€¦ï¼Œæˆ‘ä»¬æŠŠ zookeeper é›†ç¾¤å’Œ kafka é›†ç¾¤æˆä¸¤ä¸ª docker-compose.yml æ–‡ä»¶</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.8'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> zookeeper_network</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">zoo1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo1</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo1</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2181<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo1/data:/data\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo1/datalog:/datalog\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=zoo2<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=zoo3<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token key atrule\">zoo2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo2</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo2</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2182<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo2/data:/data\"</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo2/datalog:/datalog\"</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=zoo1<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=zoo3<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token key atrule\">zoo3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo3</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo3</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2183<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo3/data:/data\"</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/zookeeper/zoo3/datalog:/datalog\"</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=zoo1<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=zoo2<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr></table></figure><p>ç„¶ååˆ©ç”¨ <code>docker-compose up -d</code>  å¯åŠ¨ zookeeper é›†ç¾¤</p>\n<h2 id=\"æ­å»ºkafkaé›†ç¾¤\"><a class=\"anchor\" href=\"#æ­å»ºkafkaé›†ç¾¤\">#</a> æ­å»º kafka é›†ç¾¤</h2>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.8'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> zookeeper_network</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">kafka1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wurstmeister/kafka<span class=\"token punctuation\">:</span>2.12<span class=\"token punctuation\">-</span>2.4.1</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> kafka1</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> kafka1</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"9092:9092\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">external_links</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo1</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo2</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo3</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_BROKER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//192.168.0.225<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span>    <span class=\"token comment\">## å®¿ä¸»æœº IP</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_HOST_NAME</span><span class=\"token punctuation\">:</span> kafka1</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_PORT</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ZOOKEEPER_CONNECT</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zoo1:2181,zoo2:2181,zoo3:2181\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/kafka/kafka1/data/:/kafka\"</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token key atrule\">kafka2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wurstmeister/kafka<span class=\"token punctuation\">:</span>2.12<span class=\"token punctuation\">-</span>2.4.1</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> kafka2</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> kafka2</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"9093:9092\"</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token key atrule\">external_links</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo1</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo2</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo3</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_BROKER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//192.168.0.225<span class=\"token punctuation\">:</span><span class=\"token number\">9093</span>    <span class=\"token comment\">## å®¿ä¸»æœº IP</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_HOST_NAME</span><span class=\"token punctuation\">:</span> kafka2</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_PORT</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9093</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ZOOKEEPER_CONNECT</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zoo1:2181,zoo2:2181,zoo3:2181\"</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/kafka/kafka2/data/:/kafka\"</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token key atrule\">kafka3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wurstmeister/kafka<span class=\"token punctuation\">:</span>2.12<span class=\"token punctuation\">-</span>2.4.1</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> kafka3</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> kafka3</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"9094:9092\"</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token key atrule\">external_links</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo1</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo2</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo3</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_BROKER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//192.168.0.225<span class=\"token punctuation\">:</span><span class=\"token number\">9094</span>   <span class=\"token comment\">## å®¿ä¸»æœº IP</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_HOST_NAME</span><span class=\"token punctuation\">:</span> kafka3</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ADVERTISED_PORT</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9094</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_ZOOKEEPER_CONNECT</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zoo1:2181,zoo2:2181,zoo3:2181\"</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/root/kafka_learn/kafka/kafka3/data/:/kafka\"</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token key atrule\">kafka-manager</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Kafka å›¾å½¢ç®¡ç†ç•Œé¢</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> sheepkiller/kafka<span class=\"token punctuation\">-</span>manager<span class=\"token punctuation\">:</span>latest</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"9000:9000\"</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span>            <span class=\"token comment\"># è¿æ¥æœ¬ compose æ–‡ä»¶åˆ›å»ºçš„ container</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token punctuation\">-</span> kafka1</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token punctuation\">-</span> kafka2</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      <span class=\"token punctuation\">-</span> kafka3</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    <span class=\"token key atrule\">external_links</span><span class=\"token punctuation\">:</span>   <span class=\"token comment\"># è¿æ¥å¤–éƒ¨ compose æ–‡ä»¶åˆ›å»ºçš„ container</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo1</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo2</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>      <span class=\"token punctuation\">-</span> zoo3</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>      <span class=\"token key atrule\">ZK_HOSTS</span><span class=\"token punctuation\">:</span> zoo1<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span><span class=\"token punctuation\">,</span>zoo2<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span><span class=\"token punctuation\">,</span>zoo3<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>      <span class=\"token key atrule\">KAFKA_BROKERS</span><span class=\"token punctuation\">:</span> kafka1<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span><span class=\"token punctuation\">,</span>kafka2<span class=\"token punctuation\">:</span><span class=\"token number\">9093</span><span class=\"token punctuation\">,</span>kafka3<span class=\"token punctuation\">:</span><span class=\"token number\">9094</span></pre></td></tr></table></figure><p>ç„¶ååˆ©ç”¨ <code>docker-compose up -d</code>  å¯åŠ¨ kafka é›†ç¾¤</p>\n<h2 id=\"æµ‹è¯•ä¸€ä¸‹\"><a class=\"anchor\" href=\"#æµ‹è¯•ä¸€ä¸‹\">#</a> æµ‹è¯•ä¸€ä¸‹</h2>\n<ol>\n<li>é¦–å…ˆæˆ‘ä»¬ç”¨ <code>docker ps</code>  çœ‹çœ‹å¯åŠ¨èµ·æ¥æ²¡æœ‰<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1f15k3xdrj32ew0iujwj.jpg\" alt=\"\" height=\"400px\" /><br />\nçœ‹æ ·å­æ˜¯æ²¡é—®é¢˜äº†</li>\n<li>åˆ©ç”¨ <code>æœåŠ¡å™¨ip:9000</code>  çš„å½¢å¼è®¿é—®ä¸€ä¸‹æˆ‘ä»¬çš„ kafka manager ç•Œé¢ï¼Œé…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„é›†ç¾¤<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1f17cgqhfj30ws0qiq4m.jpg\" alt=\"\" height=\"450px\" /></li>\n<li>åˆ›å»ºä¸€ä¸ª topic æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œåˆ›å»º topic åä¸º testï¼Œè®¾ç½® partition ä¸º 3ï¼Œreplica æ•°ä¸º 3<span class=\"red\">ã€è¿™é‡Œæ³¨æ„ï¼Œä½ çš„åŒä¸€ä¸ª partition çš„ Replica æ•°é‡ä¸èƒ½å¤šäº broker æ•°é‡ï¼Œå› ä¸ºå¤šäº†ä¹Ÿæ˜¯åœ¨åŒä¸€ä¸ª broker ä¸Šæ”¾ä¸¤ä¸ªå‰¯æœ¬ï¼ŒæŒ‚äº†ä¹Ÿæ˜¯éƒ½æ²¡äº†æ²¡æ„ä¹‰å•Šã€‘</span><br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1f1d5b6nvj31ri0cgabp.jpg\" alt=\"\" height=\"350px\" /><br />\nå¯ä»¥çœ‹åˆ°ä¸åŒ partition çš„ leader æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨ broker ä¸Šçš„ï¼Œå¹¶ä¸”æ¯ä¸ª partition çš„å‰¯æœ¬åœ¨æ¯ä¸ª broker ä¸Šéƒ½æœ‰</li>\n<li>å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œè¿™é‡Œæˆ‘ç”¨ kafka1 æ¥å½“ç”Ÿäº§è€…ï¼Œkafka2 æ¥å½“æ¶ˆè´¹è€…</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it kafka1 /bin/bash</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>kafka-console-producer.sh --broker-list kafka1:9092,kafka2:9092,kafka3:9092 --topic <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">></span>msg1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">></span>msg2</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it kafka2 /bin/bash</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>kafka-console-consumer.sh --bootstrap-server kafka1:9092,kafka2:9092,kafka3:9092 --topic <span class=\"token builtin class-name\">test</span> --from-beginning</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>msg1</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>msg2</pre></td></tr></table></figure><p>ä½ è‡ªå·±æ¼”ç¤ºä¸‹ï¼Œç”Ÿäº§è€…é‚£è¾¹ç”Ÿäº§äº†ä¸€æ¶ˆæ¯åï¼Œæ¶ˆè´¹è€…è¿™è¾¹å°±å‡ºç°ä¸€æ¡æ–°æ¶ˆæ¯</p>\n<h2 id=\"20220420æ›´æ–°ä¿®æ­£\"><a class=\"anchor\" href=\"#20220420æ›´æ–°ä¿®æ­£\">#</a> 2022.04.20 æ›´æ–°ä¿®æ­£</h2>\n<p>ä¸Šé¢æ­å»ºçš„ kafka é›†ç¾¤è¿›å…¥å®¹å™¨é‡Œé¢è¿›è¡Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æµ‹è¯•éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨æˆ‘åˆ©ç”¨ kafka tools è¿æ¥å’Œåˆ©ç”¨ java è¿æ¥çš„æ—¶å€™å‘ç°æ— è®ºå¦‚ä½•éƒ½è¿æ¥ä¸ä¸Šï¼Œæ‰€ä»¥è€ƒè™‘åˆ°æ˜¯æˆ‘å¤–ç•Œåº”ç”¨æ— æ³•è¿æ¥ docker å†…çš„åº”ç”¨ï¼Œå¼€å§‹ debugã€‚<br />\næˆ‘ç”¨çš„æ˜¯åä¸ºäº‘çš„æœåŠ¡å™¨ï¼Œå…¬ç½‘ ip æ˜¯ 123.xxxxxx å†…ç½‘ ip æ˜¯ 192.xxxxxxï¼Œä¸Šé¢æˆ‘çš„é…ç½®æ˜¯ <code>KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://192.168.0.225:9093</code>  è¿™é‡Œç”¨äº†å†…ç½‘ ipï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ”¹æˆå…¬ç½‘ ip è¯•ä¸€è¯•ï¼Œå‘ç°å‡ºç°äº†æ–°çš„é—®é¢˜ <code>Broker may not be available</code> .........<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1fzns8wf7j30d30d33z3.jpg\" alt=\"\" height=\"150px\" /><br />\n è¡Œå§ï¼ŒæŠ±ç€ä¸è§£å†³å°±ä¸ç¡è§‰çš„å¿ƒæ€ï¼Œè€å¿ƒå»çœ‹äº†è§£å†³æ–¹æ¡ˆå’Œæ–‡æ¡£ï¼Œå‘ç°äº†ç­”æ¡ˆ â€”â€”</p>\n<h3 id=\"dockerä¸ç›´æ¥éƒ¨ç½²çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#dockerä¸ç›´æ¥éƒ¨ç½²çš„åŒºåˆ«\">#</a> docker ä¸ç›´æ¥éƒ¨ç½²çš„åŒºåˆ«</h3>\n<p>ç›´æ¥éƒ¨ç½²çš„æ—¶å€™æˆ‘ä»¬ kafka çš„å‚æ•°è®¾ç½®æ˜¯è¿™æ ·çš„å½¢å¼:</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token attr-name\">broker.id</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">1</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç›‘å¬ç«¯å£æŒ‡å®šä¸º 9093</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">listeners</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">PLAINTEXT://:9093</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å¯¹å¤–éƒ¨æš´éœ²ç«¯å£     æœ¬æœº IP: ç«¯å£</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">advertised.listeners</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">PLAINTEXT://192.168.206.155:9093</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token attr-name\">num.network.threads</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token attr-name\">num.io.threads</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">8</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token attr-name\">socket.send.buffer.bytes</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">102400</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> </pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token attr-name\">socket.receive.buffer.bytes</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">102400</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token attr-name\">socket.request.max.bytes</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">104857600</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token attr-name\">log.dirs</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/tmp/kafka-logs-1</span></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬ docker-compose.yml æ–‡ä»¶ä¸­é…ç½®é¡¹æ˜¯è¿™æ ·çš„å½¢å¼ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_BROKER_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_ADVERTISED_LISTENERS</span><span class=\"token punctuation\">:</span> PLAINTEXT<span class=\"token punctuation\">:</span>//192.168.0225<span class=\"token punctuation\">:</span><span class=\"token number\">9093</span>    <span class=\"token comment\">## å®¿ä¸»æœº IP</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_ADVERTISED_HOST_NAME</span><span class=\"token punctuation\">:</span> kafka2</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_ADVERTISED_PORT</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9093</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">KAFKA_ZOOKEEPER_CONNECT</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zoo1:2181,zoo2:2181,zoo3:2181\"</span></pre></td></tr></table></figure><p>æ‰€ä»¥å…¶å®å°±æ˜¯åœ¨åŸæ¥ kafka é…ç½®ä¸Šå…¨éƒ¨å¤§å†™ï¼Œ <code>.</code>  å˜ <code>_</code> ï¼Œç„¶ååŠ äº†ä¸ª KAFKA å‰ç¼€</p>\n<h3 id=\"listenersä¸advertisedlistenersçš„åŒºåˆ«\"><a class=\"anchor\" href=\"#listenersä¸advertisedlistenersçš„åŒºåˆ«\">#</a> listeners ä¸ advertised.listeners çš„åŒºåˆ«</h3>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨é…ç½®çš„æ—¶å€™è®¾ç½®äº†ä¸¤ä¸ª listenerï¼Œé‚£ä¹ˆä»–ä»¬åˆ†åˆ«æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ</p>\n<div class=\"note info no-icon\">\n<p><strong><span class=\"exturl\" data-url=\"aHR0cDovL2FkdmVydGlzZWQuaG9zdC5uYW1l\">advertised.host.name</span></strong>: DEPRECATED: only used when advertised.listeners or listeners are not set. Use advertised.listeners instead. Hostname to publish to ZooKeeper for clients to use. In IaaS environments, this may need to be different from the interface to which the broker binds. If this is not set, it will use the value for <span class=\"exturl\" data-url=\"aHR0cDovL2hvc3QubmFtZQ==\">host.name</span> if configured. Otherwise it will use the value returned from java.net.InetAddress.getCanonicalHostName().<br />\n<strong>advertised.listeners</strong>: Listeners to publish to ZooKeeper for clients to use, if different than the listeners config property. In IaaS environments, this may need to be different from the interface to which the broker binds. If this is not set, the value for listeners will be used. Unlike listeners it is not valid to advertise the 0.0.0.0 meta-address.</p>\n</div>\n<p>è§£é‡Šä»¥ä¸‹å°±æ˜¯è¯´å¦‚æœæ²¡æœ‰è®¾ç½®ä»»ä½•çš„ <code>listener</code>  å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šåˆ©ç”¨ hostname å’Œ port æ¥ä¸ŠæŠ¥ä½¿ç”¨ï¼Œå¦‚æœè®¾ç½®äº† <code>listener</code>  å‚æ•°å°±åˆ©ç”¨ <code>listener</code>  å‚æ•°ä¸­çš„å€¼æ¥ä½¿ç”¨ï¼Œè€Œ <code>listeners</code>  å’Œ <code>advertised.listeners</code>  æ˜¯ä¸ºäº†åŒºåˆ†å†…ç½‘å’Œå¤–ç½‘çš„ï¼Œå¦‚æœåªæœ‰å†…ç½‘å°±å¯ä»¥åªæ˜¯ç”¨ <code>listeners</code> ï¼Œå¦‚æœæ¶‰åŠäº†å¤–ç½‘ï¼Œæ¯”å¦‚è¦åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä½¿ç”¨å°±éœ€è¦ç”¨åˆ° <code>advertised.listeners</code>  å‚æ•°äº†ã€‚<br />\né‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å†…ç½‘è®¾ç½®çš„å†…å®¹æ˜¯ <code>KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092</code> ï¼Œæƒ³è¦å¤–ç½‘è®¿é—®å°±å¯ä»¥è®¾ç½®ä¸º <code>KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://&lt;æœåŠ¡å™¨ip&gt;:&lt;æš´éœ²ç«¯å£&gt;</code> ã€‚ <code>advertised.listeners</code> ï¼Œ ç”¨äºå¼€å‘ç»™ç”¨æˆ·ï¼Œå¦‚æœæ²¡æœ‰è®¾å®šï¼Œç›´æ¥ä½¿ç”¨ <code>listeners</code> , è€Œæˆ‘ä»¬çš„ <code>listeners</code>  æ˜¯ç›‘æ§çš„ <code>0.0.0.0</code>  è¿™å¤–ç•Œæ€ä¹ˆå¯èƒ½è®¿é—®çš„é€šå˜›ï¼<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1g0c1pgdij30c80d0mxh.jpg\" alt=\"\" height=\"150px\" /></p>\n<h3 id=\"javaç¨‹åºä¸advertisedlistenersçš„å…³ç³»\"><a class=\"anchor\" href=\"#javaç¨‹åºä¸advertisedlistenersçš„å…³ç³»\">#</a> java ç¨‹åºä¸ advertised.listeners çš„å…³ç³»</h3>\n<p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“ zookeeper åœ¨ kafka ä¸­çš„ç”¨å¤„ï¼Œæˆ‘ç®€å•çš„æä¸€ä¸ªç°åœ¨å’Œæˆ‘ä»¬ç°åœ¨å¯†åˆ‡ç›¸å…³çš„ç”¨å¤„ â€”â€”<strong>Broker æ³¨å†Œ</strong><br />\n Broker æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²å¹¶ä¸”ç›¸äº’ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä½†æ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ³¨å†Œç³»ç»Ÿèƒ½å¤Ÿå°†æ•´ä¸ªé›†ç¾¤ä¸­çš„ Broker ç®¡ç†èµ·æ¥ï¼Œæ­¤æ—¶å°±ä½¿ç”¨åˆ°äº† Zookeeperã€‚åœ¨ Zookeeper ä¸Šä¼šæœ‰ä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿›è¡Œ Broker æœåŠ¡å™¨åˆ—è¡¨è®°å½•çš„èŠ‚ç‚¹ï¼š <code>/brokers/ids</code> <br />\n æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼Œé¦–å…ˆåˆ©ç”¨ <code>docker exec -it zoo1 /bin/sh</code>  è¿›å…¥åˆ° zoo1 èŠ‚ç‚¹ä¸­ï¼Œç„¶å <code>zkCli.sh</code>  ä¸€ä¸‹ï¼Œåˆ©ç”¨ <code>ls /brokers/ids</code>  å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬ yml æ–‡ä»¶ä¸­åˆ›å»ºçš„ä¸‰ä¸ª broker èŠ‚ç‚¹<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1g0y1dt4kj30qs02ajrd.jpg\" alt=\"\" height=\"100px\" /><br />\nç„¶åæˆ‘ä»¬çœ‹çœ‹æ¯ä¸ªèŠ‚ç‚¹é‡Œé¢éƒ½å­˜äº†ä»€ä¹ˆæ•°æ® <code>get /brokers/ids/1</code></p>\n<pre><code>&#123;&quot;listener_security_protocol_map&quot;:&#123;&quot;PLAINTEXT&quot;:&quot;PLAINTEXT&quot;&#125;,&quot;endpoints&quot;:[&quot;PLAINTEXT://123.xxxxxxx:9092&quot;],&quot;jmx_port&quot;:-1,&quot;host&quot;:&quot;123.xxxxxxxx&quot;,&quot;timestamp&quot;:&quot;1650424784738&quot;,&quot;port&quot;:9092,&quot;version&quot;:4&#125;\n</code></pre>\n<p><span class=\"red\">Kafka å®¢æˆ·ç«¯åœ¨è¿æ¥ Broker çš„æ—¶å€™ï¼ŒBroker å°†å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚é™„åŠ ä¿¡æ¯ä¸ Broker å¯åŠ¨æ—¶ä¸ŠæŠ¥ç»™ Zookeeper çš„ listeners å‚æ•°ä¿¡æ¯ã€hostï¼ˆæ¥è‡ª listeners çš„ä¸­é—´åŸŸåæˆ–ä¸»æœºåéƒ¨åˆ†ï¼‰ã€port (æ¥è‡ª listeners çš„ç«¯å£éƒ¨åˆ†) è¿›è¡Œäº†éªŒè¯ï¼Œè®¤è¯é€šè¿‡å»ºç«‹è¿æ¥æ‰§è¡Œè¯·æ±‚ï¼Œåä¹‹å»ºç«‹è¿æ¥å¤±è´¥</span><br />\nã€å°±æ˜¯è¯´å¦‚æœä½ åœ¨ <code>advertised.listeners</code>  ä¸­é…ç½®äº†ä»€ä¹ˆå†…å®¹åœ¨ zookeeper èŠ‚ç‚¹ä¸­å°±æ˜¯ endpoints ä¸­çš„å†…å®¹ï¼Œç„¶åè¿æ¥çš„æ—¶å€™å°±ä¸¥æ ¼æŒ‰ç…§ endpoints ä¸­çš„å†…å®¹æ¥è¿›è¡ŒåŒ¹é…ï¼Œä¸åŒå°±ä¸è®©ä½ è¿ã€‘<br />\nè¿™æ ·å°±å¾ˆå¥½çš„è§£é‡Šäº†ä¸ºä»€ä¹ˆæœ‰çš„åšå®¢é‡Œé¢è¯´è¦ç”¨ <code>advertised.listeners=PLAINTEXT://kafka1:9092</code>  æ¥é…ç½®åœ¨ java ç¨‹åºä¸­å°±éœ€è¦é…ç½®ä¸º <code>kafka1:9092</code>  äº†ï¼<br />\né€šä¿—ä¸€ç‚¹æ¥è®²ï¼š</p>\n<ul>\n<li>å¦‚æœä½ çš„é…ç½®æ–‡ä»¶ä¸­æ˜¯ <code>advertised.listeners=PLAINTEXT://123.xxxxxx:9092</code> ï¼Œé‚£ä¹ˆä½  java é…ç½®ä¸­å°±éœ€è¦ç”¨ <code>props.put(&quot;bootstrap.servers&quot;, &quot;123.xxxxx:9092&quot;);</code></li>\n<li>å¦‚æœä½ çš„é…ç½®æ–‡ä»¶ä¸­æ˜¯ <code>advertised.listeners=PLAINTEXT://kafka1:9092</code> ï¼Œé‚£ä¹ˆä½  java é…ç½®ä¸­å°±éœ€è¦ç”¨ <code>props.put(&quot;bootstrap.servers&quot;, &quot;kafka1:9092&quot;);</code>  ä½†æ˜¯éœ€è¦å¤šä¸€æ­¥ï¼Œå› ä¸ºä½ è¿™é‡Œå†™çš„æ˜¯ kafka1ï¼Œä½ çš„ java ç¨‹åºå¹¶ä¸çŸ¥é“è¦å»å“ªé‡Œæ‰¾è¿™ä¸ª ip æ¥å‘é€è¯·æ±‚ï¼Œæ‰€ä»¥ä½ çš„è¿™ä¸ª java ç¨‹åºè¦åœ¨å“ªè¿è¡Œï¼Œå°±è¦<strong>ä¿®æ”¹é‚£ä¸ªæœºå™¨çš„ hosts æ–‡ä»¶</strong>ï¼ŒåŠ ä¸Š ip å’Œä¸»æœºåçš„æ˜ å°„æ‰è¡Œï¼ <code>123.xxxxxx kafka1</code></li>\n</ul>\n<h3 id=\"ç»“è¯­\"><a class=\"anchor\" href=\"#ç»“è¯­\">#</a> ç»“è¯­</h3>\n<p>å…¶å®æˆ‘åˆ©ç”¨å…¬ç½‘ ip å’Œåˆ©ç”¨ä¸»æœºåæ¥è®¿é—®çš„ä¸¤ç§å½¢å¼éƒ½è¯•è¿‡äº†ï¼Œéƒ½æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œè‡³äºä¸Šé¢è¯´çš„åˆ©ç”¨å…¬ç½‘ ip ä¼šå¯¼è‡´å‡ºç° <code>Broker may not be available</code>  çš„é—®é¢˜ï¼Œæˆ‘å§‘ä¸”æŠŠä»–å½’ç½ªäºç½‘ç»œåŠ¨è¡é—®é¢˜ï¼Œå› ä¸ºæˆ‘å¤§åŠå¤œçš„ç”¨å…¬ç½‘ ip çš„å½¢å¼æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç™½å¤©æƒ³ä¸æ˜ç™½åˆç”¨å…¬ç½‘ ip æµ‹è¯•äº†ä¸€éåˆæˆäº†....<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1g1duwdojj301u021a9t.jpg\" alt=\"\" height=\"150px\" /></p>\n<h3 id=\"æ€»ç»“\"><a class=\"anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h3>\n<ol>\n<li>å¦‚æœéœ€è¦å¤–ç½‘è®¿é—® kafkaï¼Œæˆ–è€…éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šè¦ä½¿ç”¨ï¼Œä¸€å®šè¦é…ç½® <code>advertised.listeners</code>  å‚æ•°ï¼Œå¹¶ä¸”ä¸€å®šè¦ç”¨å…¬ç½‘ ipï¼</li>\n<li>ä¸è®ºæ˜¯é‡‡ç”¨å…¬ç½‘ ip å½¢å¼è¿˜æ˜¯ä¸»æœºåå½¢å¼ï¼Œjava ä¸­çš„è¿æ¥å­—ç¬¦ä¸²ä¸€å®šè¦å’Œ <code>advertised.listeners</code>  ä¸­ <code>PLAINTEXT://</code>  åé¢çš„å†…å®¹å®Œå…¨ç›¸åŒæ‰è¡Œï¼</li>\n</ol>\n",
            "tags": [
                "Java",
                "ä¸­é—´ä»¶",
                "Kafka",
                "æ¡†æ¶",
                "ä¸­é—´ä»¶",
                "Kafka"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/18/Java/Zookeeper%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%852%E2%80%94%E2%80%94%E5%AE%9E%E8%B7%B5/",
            "url": "https://sprenedayf.com/2022/04/18/Java/Zookeeper%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%852%E2%80%94%E2%80%94%E5%AE%9E%E8%B7%B5/",
            "title": "Zookeeperçš„å­¦ä¹ ä¹‹æ—…2â€”â€”å®è·µ",
            "date_published": "2022-04-18T02:30:12.000Z",
            "content_html": "<p>ä¹‹å‰ä»‹ç»äº† Zookeeper çš„<a href=\"/2022/04/15/Java/Zookeeper%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%851/\">ä¸€äº›çŸ¥è¯†</a>ï¼Œæ˜¯ä¸æ˜¯æ‘©æ‹³æ“¦æŒæƒ³è¦æ•²ä¸¤è¡Œä»£ç äº†ï½<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1do6bhawdj305g05g3yh.jpg\" alt=\"\" height=\"150px\" /></p>\n<h1 id=\"shellå‘½ä»¤\"><a class=\"anchor\" href=\"#shellå‘½ä»¤\">#</a> Shell å‘½ä»¤</h1>\n<h2 id=\"æŸ¥è¯¢\"><a class=\"anchor\" href=\"#æŸ¥è¯¢\">#</a> æŸ¥è¯¢</h2>\n<p><code>ls /</code>  æŸ¥çœ‹æ ¹èŠ‚ç‚¹ä¸‹çš„èŠ‚ç‚¹åˆ—è¡¨<br />\n <code>ls /app1</code>  æŸ¥çœ‹ app1 èŠ‚ç‚¹ä¸‹çš„ç»“ç‚¹åˆ—è¡¨<br />\n <code>get /app1</code>   æŸ¥çœ‹ç»“ç‚¹çš„æ•°æ®å’Œå±æ€§<br />\n <code>stat /app1</code>  æŸ¥çœ‹ç»“ç‚¹çš„å±æ€§</p>\n<h2 id=\"åˆ›å»º\"><a class=\"anchor\" href=\"#åˆ›å»º\">#</a> åˆ›å»º</h2>\n<p>åˆ›å»ºç»“ç‚¹å¹¶å†™å…¥æ•°æ®ï¼š</p>\n<p><code>create [-s] [-e] path data</code>  å…¶ä¸­ -s ä¸ºæœ‰åºç»“ç‚¹ï¼Œ-e ä¸´æ—¶ç»“ç‚¹ï¼ˆé»˜è®¤æ˜¯æŒä¹…ç»“ç‚¹ï¼‰</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create /hadoop <span class=\"token string\">\"123456\"</span>  <span class=\"token comment\"># æ­¤æ—¶ï¼Œå¦‚æœ quit é€€å‡ºåå†./ZkCient.sh ç™»å…¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                         <span class=\"token comment\"># å†ç”¨è¾“å…¥ get /hadoop è·å–ï¼Œç»“ç‚¹ä¾ç„¶å­˜åœ¨ (æ°¸ä¹…ç»“ç‚¹)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\t\t\t       </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>create -s /a <span class=\"token string\">\"a\"</span>         <span class=\"token comment\"># åˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–æœ‰åºç»“ç‚¹ï¼Œåˆ›å»ºçš„æ—¶å€™å¯ä»¥è§‚å¯Ÿåˆ°è¿”å›çš„æ•°æ®å¸¦ä¸Šäº†ä¸€ä¸ª id       </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>create -s /b <span class=\"token string\">\"b\"</span>         <span class=\"token comment\"># è¿”å›çš„å€¼ï¼Œid é€’å¢äº†</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>create -s -e /aa <span class=\"token string\">\"aa\"</span>    <span class=\"token comment\"># ä¾ç„¶è¿˜ä¼šè¿”å›è‡ªå¢çš„ idï¼Œquit åå†è¿›æ¥ï¼Œç»§ç»­åˆ›å»ºï¼Œid ä¾ç„¶æ˜¯å¾€åæ¨çš„</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>create /aa/xx            <span class=\"token comment\"># ç»§ç»­åˆ›å»ºç»“ç‚¹ï¼Œå¯ä»¥çœ‹åˆ° pZxid å˜åŒ–äº†</span></pre></td></tr></table></figure><h2 id=\"æ›´æ–°\"><a class=\"anchor\" href=\"#æ›´æ–°\">#</a> æ›´æ–°</h2>\n<p>æ›´æ–°ç»“ç‚¹çš„å‘½ä»¤æ˜¯ <code>set</code> ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><code>set path [version]</code></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">set</span> /hadoop <span class=\"token string\">\"345\"</span>        <span class=\"token comment\"># ä¿®æ”¹ç»“ç‚¹å€¼</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">set</span> /hadoop <span class=\"token string\">\"hadoop-x\"</span> <span class=\"token number\">1</span> <span class=\"token comment\"># ä¹Ÿå¯ä»¥åŸºäºç‰ˆæœ¬å·è¿›è¡Œæ›´æ”¹ï¼Œç±»ä¼¼äºä¹è§‚é”ï¼Œå½“ä¼ å…¥ç‰ˆæœ¬å· (dataVersion)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                         <span class=\"token comment\"># å’Œå½“å‰ç»“ç‚¹çš„æ•°æ®ç‰ˆæœ¬å·ä¸ä¸€è‡´æ—¶ï¼Œzookeeper ä¼šæ‹’ç»æœ¬æ¬¡ä¿®æ”¹</span></pre></td></tr></table></figure><h2 id=\"åˆ é™¤\"><a class=\"anchor\" href=\"#åˆ é™¤\">#</a> åˆ é™¤</h2>\n<p>åˆ é™¤ç»“ç‚¹çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>\n<p><code>delete path [version]</code>  å’Œ  <code>set</code>  æ–¹æ³•ç›¸ä¼¼ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç‰ˆæœ¬å·</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>delete /hadoop           <span class=\"token comment\"># åˆ é™¤ç»“ç‚¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>delete /hadoop <span class=\"token number\">1</span>         <span class=\"token comment\"># ä¹è§‚é”æœºåˆ¶ï¼Œä¸ set æ–¹æ³•ä¸€è‡´</span></pre></td></tr></table></figure><p>è¦æƒ³åˆ é™¤æŸä¸ªç»“ç‚¹åŠå…¶æ‰€æœ‰åä»£ç»“ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’åˆ é™¤ï¼Œå‘½ä»¤ä¸º  <code>rmr path</code></p>\n<h1 id=\"javaapiæ“ä½œ\"><a class=\"anchor\" href=\"#javaapiæ“ä½œ\">#</a> JavaAPI æ“ä½œ</h1>\n<p>ä¸Šé¢ç®€å•ä»‹ç»äº†ä¸€ä¸‹ Zookeeper çš„ Shell æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ­£å¼è¿›å…¥ JavaAPI é˜¶æ®µã€‚Java è¿æ¥ Zookeeper æœ‰æŒºå¤šæ–¹å¼çš„ â€”â€”Zookeeper å®¢æˆ·ç«¯ã€ZKClient å’Œ Curator éƒ½å¯ä»¥åšåˆ°ï¼Œä½†æ˜¯ Zookeeper ä¸å®‰ç”Ÿ API ä½¿ç”¨èµ·æ¥å¤ªä¸æ–¹ä¾¿äº†ï¼ŒZKClient åˆå‡ ä¹æ²¡ä»€ä¹ˆå‚è€ƒæ–‡æ¡£ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹© Curator æ¥æ“ä½œå’¯ï½</p>\n<h2 id=\"curatorä»‹ç»\"><a class=\"anchor\" href=\"#curatorä»‹ç»\">#</a> Curator ä»‹ç»</h2>\n<p><code>curator</code>  æ˜¯ <code>Netflix</code>  å…¬å¸å¼€æºçš„ä¸€ä¸ª  <code>zookeeper</code>  å®¢æˆ·ç«¯ï¼ŒåæçŒ®ç»™  <code>apache</code> ï¼Œ <code>curator</code>  æ¡†æ¶åœ¨ <code>zookeeper</code>  åŸç”Ÿ <code>API</code>  æ¥å£ä¸Šè¿›è¡Œäº†åŒ…è£…ï¼Œè§£å†³äº†å¾ˆå¤š <code>zooKeeper</code>  å®¢æˆ·ç«¯éå¸¸åº•å±‚çš„ç»†èŠ‚å¼€å‘ã€‚æä¾› <code>zooKeeper</code>  å„ç§åº”ç”¨åœºæ™¯ (æ¯”å¦‚ï¼šåˆ†å¸ƒå¼é”æœåŠ¡ã€é›†ç¾¤é¢†å¯¼é€‰ä¸¾ã€å…±äº«è®¡æ•°å™¨ã€ç¼“å­˜æœºåˆ¶ã€åˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰çš„æŠ½è±¡å°è£…ï¼Œå®ç°äº† <code>Fluent</code>  é£æ ¼çš„ APl æ¥å£ï¼Œæ˜¯æœ€å¥½ç”¨ï¼Œæœ€æµè¡Œçš„ <code>zookeeper</code>  çš„å®¢æˆ·ç«¯<br />\nè¦ä½¿ç”¨ curator ä¹Ÿå¾ˆç®€å•ï¼Œéœ€è¦å¯¼å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;<span class=\"token tag\">!--</span> curator<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&lt;dependency<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    &lt;groupId<span class=\"token punctuation\">></span>org.apache.curator&lt;/groupId<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    &lt;artifactId<span class=\"token punctuation\">></span>curator<span class=\"token punctuation\">-</span>framework&lt;/artifactId<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    &lt;version<span class=\"token punctuation\">></span>4.0.0&lt;/version<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&lt;/dependency<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&lt;dependency<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    &lt;groupId<span class=\"token punctuation\">></span>org.apache.curator&lt;/groupId<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    &lt;artifactId<span class=\"token punctuation\">></span>curator<span class=\"token punctuation\">-</span>recipes&lt;/artifactId<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    &lt;version<span class=\"token punctuation\">></span>4.0.0&lt;/version<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>&lt;/dependency<span class=\"token punctuation\">></span></pre></td></tr></table></figure><h2 id=\"å»ºç«‹è¿æ¥\"><a class=\"anchor\" href=\"#å»ºç«‹è¿æ¥\">#</a> å»ºç«‹è¿æ¥</h2>\n<p>ç¬¬ä¸€ç§æ–¹å¼</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * å»ºç«‹è¿æ¥</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// é‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// ç¬¬ä¸€ç§æ–¹å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     * @param connectString  è¿æ¥å­—ç¬¦ä¸² åœ°å€å’Œç«¯å£</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     * @param sessionTimeoutMs  ä¼šè¯è¶…æ—¶æ—¶é—´ å•ä½ ms</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     * @param ConnectTimeoutMs  è¿æ¥è¶…æ—¶æ—¶é—´ å•ä½ ms</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>     * @param retryPolicy  é‡è¯•ç­–ç•¥</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123.60.208.239:2181,123.60.208.239:2182,123.60.208.239:2183\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// å¼€å¯è¿æ¥</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼ï¼šï¼ˆå…¶å®å°±æ˜¯é“¾å¼ç¼–ç¨‹å•¦ï¼‰</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * å»ºç«‹è¿æ¥</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// é‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// ç¬¬äºŒç§æ–¹å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">connectString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123.60.208.239:2181\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">sessionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">connectionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">retryPolicy</span><span class=\"token punctuation\">(</span>retryPolicy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">namespace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sprenedf\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// å¼€å¯è¿æ¥</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>session</code>  é‡è¿ç­–ç•¥</p>\n<ul>\n<li><code>RetryPolicy retry Policy = new RetryOneTime(3000);</code>\n<ul>\n<li>è¯´æ˜ï¼šä¸‰ç§’åé‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</li>\n</ul>\n</li>\n<li><code>RetryPolicy retryPolicy = new RetryNTimes(3,3000);</code>\n<ul>\n<li>è¯´æ˜ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œé‡è¿ä¸‰æ¬¡</li>\n</ul>\n</li>\n<li><code>RetryPolicy retryPolicy = new RetryUntilElapsed(1000,3000);</code>\n<ul>\n<li>è¯´æ˜ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œæ€»ç­‰å¾…æ—¶é—´è¶…è¿‡ä¸ª <code>10</code>  ç§’ååœæ­¢é‡è¿</li>\n</ul>\n</li>\n<li><code>RetryPolicy retryPolicy = new ExponentialBackoffRetry(1000,3)</code>\n<ul>\n<li>è¯´æ˜ï¼šè¿™ä¸ªç­–ç•¥çš„é‡è¯•é—´éš”ä¼šè¶Šæ¥è¶Šé•¿\n<ul>\n<li>å…¬å¼ï¼š <code>baseSleepTImeMs * Math.max(1,random.nextInt(1 &lt;&lt; (retryCount + 1)))</code>\n<ul>\n<li><code>baseSleepTimeMs</code>  =  <code>1000</code></li>\n<li><code>maxRetries</code>  =  <code>3</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"åˆ›å»º-2\"><a class=\"anchor\" href=\"#åˆ›å»º-2\">#</a> åˆ›å»º</h2>\n<p>åˆ›å»ºèŠ‚ç‚¹è¿™é‡ŒåŸºæœ¬å¯ä»¥åˆ†ä¸ºå››ç§ï¼š</p>\n<ol>\n<li>åŸºæœ¬åˆ›å»º</li>\n<li>åˆ›å»ºèŠ‚ç‚¹ å¸¦æœ‰æ•°æ®</li>\n<li>è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹</li>\n<li>åˆ›å»ºå¤šçº§èŠ‚ç‚¹ /app1/p1</li>\n</ol>\n<h3 id=\"åŸºæœ¬åˆ›å»º\"><a class=\"anchor\" href=\"#åŸºæœ¬åˆ›å»º\">#</a> åŸºæœ¬åˆ›å»º</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åŸºæœ¬åˆ›å»º</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testCreate1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å¸¦æœ‰æ•°æ®\"><a class=\"anchor\" href=\"#å¸¦æœ‰æ•°æ®\">#</a> å¸¦æœ‰æ•°æ®</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å¸¦æœ‰æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testCreate2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"spring day!\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"è®¾ç½®èŠ‚ç‚¹ç±»å‹\"><a class=\"anchor\" href=\"#è®¾ç½®èŠ‚ç‚¹ç±»å‹\">#</a> è®¾ç½®èŠ‚ç‚¹ç±»å‹</h3>\n<p>æ³¨æ„æˆ‘è¿™é‡Œè®¾ç½® while (true) æ˜¯å› ä¸ºè¿™é‡Œè®¾ç½®çš„ç»“ç‚¹ç±»å‹æ˜¯ä¸´æ—¶çš„ï¼Œå¦‚æœå½“å‰ä¼šè¯ç»“æŸï¼Œæˆ‘æ˜¯çœ‹ä¸åˆ°çŠ¶æ€çš„</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// è®¾ç½®èŠ‚ç‚¹ç±»å‹ï¼Œé»˜è®¤ç±»å‹ä¸ºæŒä¹…å‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> <span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testCreate3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     <span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>EPHEMERAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>curator ä¸­å¯ä»¥é€‰æ‹©çš„ mode ç±»å‹å¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva2.sinaimg.cn/large/006yBBDDly8h1dqhrc2upj30t607oab1.jpg\" alt=\"\" height=\"250px\" /></p>\n<h3 id=\"åˆ›å»ºå¤šçº§èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#åˆ›å»ºå¤šçº§èŠ‚ç‚¹\">#</a> åˆ›å»ºå¤šçº§èŠ‚ç‚¹</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åˆ›å»ºå¤šçº§èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testCreate4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">creatingParentContainersIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app4/p1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™é‡Œå¦‚æœä¸åŠ  <code>creatingParentContainersIfNeeded()</code>  ä¼šåˆ›å»ºå¤±è´¥</p>\n<h2 id=\"æŸ¥è¯¢-2\"><a class=\"anchor\" href=\"#æŸ¥è¯¢-2\">#</a> æŸ¥è¯¢</h2>\n<p>åˆ›å»ºèŠ‚ç‚¹è¿™é‡ŒåŸºæœ¬å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š</p>\n<ol>\n<li>æŸ¥è¯¢æ•°æ®ï¼šget</li>\n<li>æŸ¥è¯¢å­èŠ‚ç‚¹ï¼šls</li>\n<li>æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯ï¼šls -s</li>\n</ol>\n<h3 id=\"æŸ¥è¯¢æ•°æ®\"><a class=\"anchor\" href=\"#æŸ¥è¯¢æ•°æ®\">#</a> æŸ¥è¯¢æ•°æ®</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æŸ¥è¯¢æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testGet1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bytes <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"æŸ¥è¯¢å­èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#æŸ¥è¯¢å­èŠ‚ç‚¹\">#</a> æŸ¥è¯¢å­èŠ‚ç‚¹</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æŸ¥è¯¢å­èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testGet2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯\"><a class=\"anchor\" href=\"#æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯\">#</a> æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testGet3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Stat</span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bytes <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">storingStatIn</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™ä¸ª Stat é‡Œé¢çš„ä¸œè¥¿å°†æ¥æƒ³è¦å–å‡ºæ¥ï¼Œå°±å¯ä»¥ç”¨ getXXX () çš„å½¢å¼æ¥å–<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1dw7u8yv4j30ls0gmgn2.jpg\" alt=\"\" height=\"300px\" /></p>\n<h2 id=\"ä¿®æ”¹\"><a class=\"anchor\" href=\"#ä¿®æ”¹\">#</a> ä¿®æ”¹</h2>\n<p>æœ€æœ€æœ€ç®€å•çš„å°±æ˜¯è¿™æ ·çš„å½¢å¼æ¥åšä¿®æ”¹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ä¿®æ”¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      client<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"theonly\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬è€ƒè™‘è¿™æ ·çš„æƒ…å†µï¼šå¦‚æœæœ‰å¤šä¸ª client æ¥ä¿®æ”¹è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿä¸¢å¤±ä¿®æ”¹çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬åº”è¯¥éƒ½çŸ¥é“ CAS æ“ä½œå§ï¼Œç®€å•æ¥è¯´å°±æ˜¯æœ‰ä¸€ä¸ªç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åœ¨åšä¿®æ”¹å‰é€šè¿‡å¯¹æ¯”ç‰ˆæœ¬å·ä¿¡æ¯å°±çŸ¥é“æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸çš„ä¿®æ”¹ã€‚è¿™é‡Œä¹Ÿæ˜¯è¿™æ ·ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ä¿®æ”¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testSetForVersion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Stat</span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">storingStatIn</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">int</span> version <span class=\"token operator\">=</span> status<span class=\"token punctuation\">.</span><span class=\"token function\">getVersion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withVersion</span><span class=\"token punctuation\">(</span>version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"theonly\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"åˆ é™¤-2\"><a class=\"anchor\" href=\"#åˆ é™¤-2\">#</a> åˆ é™¤</h2>\n<p>åˆ é™¤èŠ‚ç‚¹è¿™é‡ŒåŸºæœ¬å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š</p>\n<ol>\n<li>åˆ é™¤å•ä¸ªèŠ‚ç‚¹</li>\n<li>åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</li>\n<li>å¿…é¡»æˆåŠŸçš„åˆ é™¤</li>\n<li>å›è°ƒ</li>\n</ol>\n<h3 id=\"åˆ é™¤å•ä¸ªèŠ‚ç‚¹\"><a class=\"anchor\" href=\"#åˆ é™¤å•ä¸ªèŠ‚ç‚¹\">#</a> åˆ é™¤å•ä¸ªèŠ‚ç‚¹</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åˆ é™¤å•ä¸ªèŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testDelete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹\">#</a> åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testDelete2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">deletingChildrenIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å¿…é¡»æˆåŠŸçš„åˆ é™¤\"><a class=\"anchor\" href=\"#å¿…é¡»æˆåŠŸçš„åˆ é™¤\">#</a> å¿…é¡»æˆåŠŸçš„åˆ é™¤</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å¿…é¡»æˆåŠŸçš„åˆ é™¤</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testDelete3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">guaranteed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å›è°ƒ\"><a class=\"anchor\" href=\"#å›è°ƒ\">#</a> å›è°ƒ</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å›è°ƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testDelete4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">inBackground</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BackgroundCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">processResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CuratorFramework</span> curatorFramework<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CuratorEvent</span> curatorEvent<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æˆ‘è¢«åˆ é™¤å•¦å•¦å•¦~~~~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>curatorEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1dwo9rvvuj31uu02uaaq.jpg\" alt=\"\" /></p>\n<h2 id=\"watchäº‹ä»¶ç›‘å¬\"><a class=\"anchor\" href=\"#watchäº‹ä»¶ç›‘å¬\">#</a> Watch äº‹ä»¶ç›‘å¬</h2>\n<ul>\n<li>Zookeeper å…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº› Watcherï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼ŒZookeeper æœåŠ¡ç«¯ä¼šå°†äº‹ä»¶æ¨é€åˆ°æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ä¸Šå»ï¼Œè¯¥æœºåˆ¶æ˜¯ Zookeeper å®ç°åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„é‡è¦ç‰¹æ€§ã€‚</li>\n<li>Zookeeper ä¸­å¼•å…¥ Watcher æœºåˆ¶æ¥å®ç°<strong>å‘å¸ƒ / è®¢é˜…</strong>åŠŸèƒ½ï¼Œèƒ½å¤Ÿè®©å¤šä¸ªè®¢é˜…è€…åŒæ—¶ç›‘å¬æŸä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</li>\n<li>Curator å¼•å…¥ Cache æ¥å®ç°å¯¹ Zookeeper æœåŠ¡æ®µæ—¶é—´çš„ç›‘å¬</li>\n<li>Curator æä¾›äº†ä¸‰ç§ watcherï¼š\n<ul>\n<li><code>NodeCache</code> ï¼šåªç›‘å¬æŸä¸€ä¸ªç‰¹å®šèŠ‚ç‚¹</li>\n<li><code>PathChildrenCache</code> ï¼šç›‘æ§ä¸€ä¸ª ZNode çš„å­èŠ‚ç‚¹</li>\n<li><code>TreeCache</code> ï¼šå¯ä»¥ç›‘æ§åŒ…å«è¯¥èŠ‚ç‚¹å’Œä»–æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬å­™å­èŠ‚ç‚¹ï¼‰çš„æ‰€æœ‰èŠ‚ç‚¹</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"nodecache\"><a class=\"anchor\" href=\"#nodecache\">#</a> NodeCache</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// NodeCache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testNodeCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 1. åˆ›å»º NodeCache å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">NodeCache</span> nodeCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 2. æ³¨å†Œç›‘å¬</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    nodeCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">nodeChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"èŠ‚ç‚¹å˜åŒ–äº†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// 3. å¼€å¯ç›‘å¬ å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™å¼€å¯ç›‘å¬æ—¶ï¼ŒåŠ è½½ç¼“å†²æ•°æ®</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    nodeCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–ä¸­é—´æ•°æ®ï¼Œåˆ™å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// NodeCache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testNodeCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 1. åˆ›å»º NodeCache å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">NodeCache</span> nodeCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span><span class=\"token string\">\"/app1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 2. æ³¨å†Œç›‘å¬</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    nodeCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">nodeChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"èŠ‚ç‚¹å˜åŒ–äº†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data <span class=\"token operator\">=</span> nodeCache<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// 3. å¼€å¯ç›‘å¬ å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™å¼€å¯ç›‘å¬æ—¶ï¼ŒåŠ è½½ç¼“å†²æ•°æ®</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    nodeCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"pathchildrencache\"><a class=\"anchor\" href=\"#pathchildrencache\">#</a> PathChildrenCache</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// PathChildrenCache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testPathChildrenCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">PathChildrenCache</span> pathChildrenCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PathChildrenCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/app2\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    pathChildrenCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PathChildrenCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">childEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CuratorFramework</span> curatorFramework<span class=\"token punctuation\">,</span> <span class=\"token class-name\">PathChildrenCacheEvent</span> pathChildrenCacheEvent<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­èŠ‚ç‚¹å˜åŒ–äº†ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>pathChildrenCacheEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    pathChildrenCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç®€å•æ“ä½œä¸€ç•ªï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1dxkc35vjj31ps0ai41n.jpg\" alt=\"\" height=\"300px\" /><br />\nå¯ä»¥çœ‹åˆ°è¿™é‡Œé¢æœ‰ç±»å‹ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„ç±»å‹æ¥å¯¹ä¸åŒçš„æ“ä½œåšå‡ºååº”ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// PathChildrenCache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testPathChildrenCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">PathChildrenCache</span> pathChildrenCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PathChildrenCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/app2\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    pathChildrenCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PathChildrenCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">childEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CuratorFramework</span> curatorFramework<span class=\"token punctuation\">,</span> <span class=\"token class-name\">PathChildrenCacheEvent</span> pathChildrenCacheEvent<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­èŠ‚ç‚¹å˜åŒ–äº†ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>pathChildrenCacheEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">PathChildrenCacheEvent<span class=\"token punctuation\">.</span>Type</span> type <span class=\"token operator\">=</span> pathChildrenCacheEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PathChildrenCacheEvent<span class=\"token punctuation\">.</span>Type</span><span class=\"token punctuation\">.</span>CHILD_UPDATED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>  <span class=\"token comment\">// å¦‚æœæ˜¯ update æ“ä½œ</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data <span class=\"token operator\">=</span> pathChildrenCacheEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    pathChildrenCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"treecache\"><a class=\"anchor\" href=\"#treecache\">#</a> TreeCache</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// TreeCache</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testTreeCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">TreeCache</span> treeCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span><span class=\"token string\">\"/app3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    treeCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">childEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CuratorFramework</span> curatorFramework<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TreeCacheEvent</span> treeCacheEvent<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"èŠ‚ç‚¹å˜åŒ–å•¦\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>treeCacheEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    treeCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1dz5bmz7lj31qa0gq0wv.jpg\" alt=\"\" height=\"300px\" /></p>\n<h2 id=\"å®ç°åˆ†å¸ƒå¼é”\"><a class=\"anchor\" href=\"#å®ç°åˆ†å¸ƒå¼é”\">#</a> å®ç°åˆ†å¸ƒå¼é”</h2>\n<p>ä¹‹å‰æˆ‘ä»¬å·²ç»æåˆ°è¿‡äº† Zookeeper æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»£ç æ¥æ¨¡æ‹Ÿä¸€ä¸‹ã€åœºæ™¯å°± 12306 ä¹°ç¥¨å§ã€‘ï¼š</p>\n<h3 id=\"åŸå§‹ä»£ç \"><a class=\"anchor\" href=\"#åŸå§‹ä»£ç \">#</a> åŸå§‹ä»£ç </h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * @author difendDF</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @date 2022/04/18 5:09 ä¸‹åˆ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Ticket12306</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> tickets <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¥¨æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>tickets <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>              <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\":\"</span><span class=\"token operator\">+</span>tickets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>              tickets<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * @author difendDF</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @date 2022/04/18 5:11 ä¸‹åˆ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestLock</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token class-name\">Ticket12306</span> ticket12306 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ticket12306</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token comment\">// åˆ›å»ºå®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token class-name\">Thread</span> t1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>ticket12306<span class=\"token punctuation\">,</span> <span class=\"token string\">\"æºç¨‹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token class-name\">Thread</span> t2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>ticket12306<span class=\"token punctuation\">,</span> <span class=\"token string\">\"é£çŒª\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      t1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      t2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™æ ·çš„ä»£ç æ²¡æœ‰ä»»ä½•çš„é”ï¼Œæ²¡æœ‰å¹¶å‘æ§åˆ¶ï¼Œä¼šå¯¼è‡´è¶…å–çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å¯¹å…¶æ”¹é€ ä¸€ä¸‹ï¼Œåˆ©ç”¨ä¸Š Zookeeper çš„åˆ†å¸ƒå¼é”ã€‚</p>\n<div class=\"note primary no-icon\">\n<p>è¿™é‡Œæœ‰äº›äººå¯èƒ½è¿˜æ˜¯ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘ java ä¸æ˜¯æä¾›äº† synchronized å…³é”®å­—å’Œ Lock å—ï¼Œä¸ºä»€ä¹ˆè¦ç”¨åˆ°åˆ†å¸ƒå¼é”ï¼Ÿ<br />\nè¿™æ˜¯å› ä¸º java é‚£æ˜¯åœ¨ä¸€ä¸ª jvm ä¸­ç”Ÿæ•ˆçš„ï¼Œå¯¹å¤šçº¿ç¨‹èµ·ä½œç”¨ï¼Œæˆ‘ä»¬ç°åœ¨ç›¸å½“äºæ˜¯æœ‰å¤šä¸ª jvm éƒ¨ç½²ï¼Œé‚£ä¹ˆå•ä¸ª jvm é”æ˜¯æ²¡æœ‰åŠæ³•é”ä½å…¶ä»– jvm ä¸Šçš„ç¨‹åºçš„ï¼Œä¾‹å­æ˜¯ç”¨å¤šçº¿ç¨‹æ¨¡æ‹Ÿçš„å¤šè¿›ç¨‹ï¼Œä¸€å®šä¸è¦æ··æ·†äº†ï¼ï¼ï¼</p>\n</div>\n<h3 id=\"zookeeperå®ç°\"><a class=\"anchor\" href=\"#zookeeperå®ç°\">#</a> zookeeper å®ç°</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * @author difendDF</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @date 2022/04/18 5:09 ä¸‹åˆ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Ticket12306</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> tickets <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¥¨æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">private</span> <span class=\"token class-name\">InterProcessMutex</span> lock<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Ticket12306</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\">// é‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">connectString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123.60.208.239:2181\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">sessionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">connectionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">retryPolicy</span><span class=\"token punctuation\">(</span>retryPolicy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">namespace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sprenedf\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>              <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token comment\">// å¼€å¯è¿æ¥</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InterProcessMutex</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/lock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token comment\">// è·å–é”</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>              lock<span class=\"token punctuation\">.</span><span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>              <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>tickets <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\":\"</span><span class=\"token operator\">+</span>tickets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                  tickets<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>              e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                  lock<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                  e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1e05h2ybnj312k0u0wly.jpg\" alt=\"\" height=\"400px\" /><br />\nè™½ç„¶æœ‰å¼‚å¸¸ï¼Œä½†æ˜¯å¯¹ç¨‹åºæ¥ç€å¾€ä¸‹è¿è¡Œæ²¡å½±å“çš„å•Šï¼è€Œä¸”è¿™ä¸ªé¡ºåºä¸ç®¡ä½ è¿è¡Œå¤šå°‘ééƒ½æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„è¾¾åˆ°äº†ï¼<br />\n<img data-src=\"https://tva3.sinaimg.cn/large/006yBBDDly8h1e07zzv40j308c08c3yk.jpg\" alt=\"\" height=\"150px\" /></p>\n",
            "tags": [
                "Java",
                "ä¸­é—´ä»¶",
                "Zookeeper",
                "æ¡†æ¶",
                "ä¸­é—´ä»¶",
                "Zookeeper"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/15/Java/Zookeeper%E7%9A%84%E5%AE%89%E8%A3%85/",
            "url": "https://sprenedayf.com/2022/04/15/Java/Zookeeper%E7%9A%84%E5%AE%89%E8%A3%85/",
            "title": "Zookeeperçš„å®‰è£…",
            "date_published": "2022-04-15T08:08:32.000Z",
            "content_html": "<h1 id=\"åˆ©ç”¨dockerå®‰è£…\"><a class=\"anchor\" href=\"#åˆ©ç”¨dockerå®‰è£…\">#</a> åˆ©ç”¨ Docker å®‰è£…</h1>\n<p>æœ¬è´¨ä¸Šæˆ‘æ˜¯å¸Œæœ›å¯ä»¥å¿«é€Ÿå¼€å§‹è¿›è¡Œ Zookeeper çš„ç›¸å…³å®è·µï¼Œæ‰€ä»¥ç”¨ Docker æ¥å¸®æˆ‘åˆ›å»ºä¸‰ä¸ªå®¹å™¨ï¼Œåˆ©ç”¨ docker-compose æ¥å¸®æˆ‘è§£å†³å®¹å™¨é—´çš„é€šä¿¡é—®é¢˜ï¼Œ<s>è¿™æ ·æˆ‘å°±ä¸ç”¨è‡ªå·±å»é…ä¸‰ä¸ªæœºå™¨å•¦ï¼ˆè¯¯ï¼‰</s></p>\n<h2 id=\"å•èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#å•èŠ‚ç‚¹\">#</a> å•èŠ‚ç‚¹</h2>\n<ol>\n<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å°†å®¹å™¨å†…çš„æ•°æ®æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶å¤¹ç»‘å®š</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> zookeeper <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> zookeeper</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> data</pre></td></tr></table></figure><ol start=\"2\">\n<li>run ä¸€ä¸ªå®¹å™¨</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run -d -e <span class=\"token assign-left variable\">TZ</span><span class=\"token operator\">=</span><span class=\"token string\">\"Asia/Shanghai\"</span> -p <span class=\"token number\">2181</span>:2181 -v <span class=\"token environment constant\">$PWD</span>/data:/data --name zookeeper --restart always zookeeper:3.7.0</pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p>\n<pre><code>-e TZ=&quot;Asia/Shanghai&quot; # æŒ‡å®šä¸Šæµ·æ—¶åŒº \n-d # è¡¨ç¤ºåœ¨ä¸€ç›´åœ¨åå°è¿è¡Œå®¹å™¨\n-p 2181:2181 # å¯¹ç«¯å£è¿›è¡Œæ˜ å°„ï¼Œå°†æœ¬åœ°2181ç«¯å£æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„2181ç«¯å£\n--name # è®¾ç½®åˆ›å»ºçš„å®¹å™¨åç§°\n-v # å°†æœ¬åœ°ç›®å½•(æ–‡ä»¶)æŒ‚è½½åˆ°å®¹å™¨æŒ‡å®šç›®å½•ï¼›\n--restart always #å§‹ç»ˆé‡æ–°å¯åŠ¨zookeeper\n</code></pre>\n<h2 id=\"é›†ç¾¤\"><a class=\"anchor\" href=\"#é›†ç¾¤\">#</a> é›†ç¾¤</h2>\n<p>å•èŠ‚ç‚¹å¤šæ²¡æ„æ€ï¼Œå•èŠ‚ç‚¹ç”¨ zookeeper è¿™ä¸æ˜¯<s>è„±è£¤å­æ”¾å±å—ï¼ˆbushi</s>ï¼</p>\n<ol>\n<li>å®‰è£… docker-composeï¼Œè¿™è¾¹å»ºè®®åˆ©ç”¨ miniconda æ¥å®‰è£…ï¼Œä¸Šä¼ ä¸€ä¸ªå®‰è£…åŒ…ï¼Œbash è¿è¡Œä¸€ä¸‹ï¼Œç„¶å pip install ä¸€ä¸‹å°±æˆäº†</li>\n<li>å†™ä¸ª docker-compose.yml æ–‡ä»¶</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.8'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">zoo1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo1</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo1</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2181<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=zoo2<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=zoo3<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token key atrule\">zoo2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo2</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo2</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2182<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=zoo1<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=zoo3<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token key atrule\">zoo3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">:</span>3.7.0</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> zoo3</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> zoo3</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">-</span> 2183<span class=\"token punctuation\">:</span><span class=\"token number\">2181</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token key atrule\">ZOO_MY_ID</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token key atrule\">ZOO_SERVERS</span><span class=\"token punctuation\">:</span> server.1=zoo1<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.2=zoo2<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181 server.3=0.0.0.0<span class=\"token punctuation\">:</span>2888<span class=\"token punctuation\">:</span>3888;2181</pre></td></tr></table></figure><p>æ­¤é…ç½®æ–‡ä»¶è¡¨ç¤ºï¼ŒDocker éœ€è¦å¯åŠ¨ä¸‰ä¸ª zookeeper å®ä¾‹ï¼Œå¹¶å°† 2181ï¼Œ2182ï¼Œ2183 ä¸‰ä¸ªç«¯å£å·æ˜ å°„åˆ°å®¹å™¨å†…çš„ 2181 è¿™ä¸ªç«¯å£ä¸Šã€‚<br />\n <code>ZOO_MY_ID</code> ï¼šè¡¨ç¤º zk æœåŠ¡çš„ ID, å–å€¼ä¸º 1-255 ä¹‹é—´çš„æ•´æ•°ï¼Œä¸”å¿…é¡»å”¯ä¸€<br />\n <code>ZOO_SERVERS</code> ï¼šè¡¨ç¤º zk é›†ç¾¤çš„ä¸»æœºåˆ—è¡¨</p>\n<ol start=\"3\">\n<li>å¯åŠ¨é›†ç¾¤</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker-compose</span> up -d</pre></td></tr></table></figure><p>è¿™æ—¶å€™æˆ‘ä»¬çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„ docker å®¹å™¨<br />\n<img data-src=\"https://s1.ax1x.com/2022/04/15/LGIvwT.png\" alt=\"LGIvwT.png\" /></p>\n<ol>\n<li>è¿›å»çœ‹çœ‹ zookeeper çŠ¶æ€</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it zoo1 /bin/sh</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>zkServer.sh status</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it zoo2 /bin/sh</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>zkServer.sh status</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it zoo3 /bin/sh</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>zkServer.sh status</pre></td></tr></table></figure><p>åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼š<br />\n<img data-src=\"https://s1.ax1x.com/2022/04/15/LGokOx.png\" alt=\"LGokOx.png\" height=\"200px\" /></p>\n",
            "tags": [
                "Java",
                "ä¸­é—´ä»¶",
                "Zookeeper",
                "æ¡†æ¶",
                "ä¸­é—´ä»¶",
                "Zookeeper"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/15/Java/Zookeeper%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%851/",
            "url": "https://sprenedayf.com/2022/04/15/Java/Zookeeper%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%851/",
            "title": "Zookeeperçš„å­¦ä¹ ä¹‹æ—…1",
            "date_published": "2022-04-15T07:36:37.000Z",
            "content_html": "<h1 id=\"zookeeperç®€ä»‹\"><a class=\"anchor\" href=\"#zookeeperç®€ä»‹\">#</a> Zookeeper ç®€ä»‹</h1>\n<h2 id=\"zookeeperæ˜¯ä»€ä¹ˆ\"><a class=\"anchor\" href=\"#zookeeperæ˜¯ä»€ä¹ˆ\">#</a> Zookeeper æ˜¯ä»€ä¹ˆï¼Ÿ</h2>\n<p>ä¹‹å‰æˆ‘å¯¹ Zookeeper çš„äº†è§£ä»…é™äºåœ¨äº†è§£å…¶ä»–ç»„ä»¶çš„æ—¶å€™æ€»æ˜¯ä¼šæåˆ°å®ƒï¼Œæ¯”å¦‚ï¼šåœ¨çœ‹ Nacos æ³¨å†Œä¸­å¿ƒçš„æ—¶å€™ï¼Œå°±ä¼šæåˆ° Zookeeper ä¹Ÿå¯ä»¥åšæ³¨å†Œä¸­å¿ƒï¼›åœ¨çœ‹é…ç½®ä¸­å¿ƒçš„æ—¶å€™ï¼Œä¹Ÿæœ‰äººæåˆ° Zookeeper å¯ä»¥åšé…ç½®ä¸­å¿ƒï¼›åœ¨äº†è§£ Redis çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰äººè¯´ Zookeeper å’Œ Redis ä¸€æ ·éƒ½å¯ä»¥å®ç°åˆ†å¸ƒå¼é”ï¼›ç”šè‡³åœ¨æˆ‘çœ‹ clickhouse çš„æ—¶å€™ï¼Œä¹¦ä¸­éƒ½è·Ÿæˆ‘è¯´ clickhouse çš„é›†ç¾¤æ˜¯ä¾èµ–äº zookeeper çš„...... å¥½å®¶ä¼™ï¼Œä½ è¿™æ— å¤„ä¸åœ¨å•Šï¼é‚£ä¹ˆ Zookeeper åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n<p>Zookeeper ä¸ºåˆ†å¸ƒå¼åº”ç”¨<strong>æä¾›é«˜æ•ˆä¸”å¯é çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡</strong>ï¼Œä¸»è¦ç”¨æ¥è§£å†³åˆ†å¸ƒå¼é›†ç¾¤ä¸­åº”ç”¨ç³»ç»Ÿçš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå®ƒæä¾›äº†ç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•èŠ‚ç‚¹æ ‘æ–¹å¼çš„æ•°æ®å­˜å‚¨ã€‚ä½†æ˜¯ Zookeeper å¹¶ä¸æ˜¯ä¸“é—¨ç”¨æ¥å­˜å‚¨æ•°æ®çš„ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥<strong>ç»´æŠ¤å’Œç›‘æ§å­˜å‚¨æ•°æ®çš„çŠ¶æ€å˜åŒ–ã€‚é€šè¿‡ç›‘æ§è¿™äº›æ•°æ®çŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œå¯ä»¥è¾¾åˆ°åŸºäºæ•°æ®çš„é›†ç¾¤ç®¡ç†ã€‚</strong></p>\n<h2 id=\"zookeeperèƒ½å¹²ä»€ä¹ˆ\"><a class=\"anchor\" href=\"#zookeeperèƒ½å¹²ä»€ä¹ˆ\">#</a> Zookeeper èƒ½å¹²ä»€ä¹ˆ</h2>\n<ul>\n<li>é…ç½®ç®¡ç†\n<ul>\n<li>é›†ç¾¤èŠ‚ç‚¹å¯ä»¥é€šè¿‡ä¸­å¿ƒæºè·å–å¯åŠ¨é…ç½®</li>\n<li>æ›´ç®€å•çš„éƒ¨ç½²</li>\n</ul>\n</li>\n<li>åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†\n<ul>\n<li>èŠ‚ç‚¹åŠ å…¥ / ç¦»å¼€</li>\n<li>èŠ‚ç‚¹çš„å®æ—¶çŠ¶æ€</li>\n</ul>\n</li>\n<li>å‘½åæœåŠ¡ï¼Œå¦‚ï¼šDNS</li>\n<li>åˆ†å¸ƒå¼åŒæ­¥ï¼šå¦‚é”ã€æ …æ ã€é˜Ÿåˆ—</li>\n<li>åˆ†å¸ƒå¼ç³»ç»Ÿçš„é€‰ä¸»</li>\n<li>ä¸­å¿ƒåŒ–å’Œé«˜å¯é çš„æ•°æ®æ³¨å†Œ</li>\n</ul>\n<h2 id=\"éœ€è¦æ³¨æ„çš„ç‚¹\"><a class=\"anchor\" href=\"#éœ€è¦æ³¨æ„çš„ç‚¹\">#</a> éœ€è¦æ³¨æ„çš„ç‚¹</h2>\n<ul>\n<li>Zookeeper å°†<strong>æ•°æ®å…¨é‡å­˜å‚¨åœ¨å†…å­˜ä¸­</strong>ï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆé«˜ã€‚ç”±äº Zookeeper çš„<strong>æ‰€æœ‰æ›´æ–°å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯åŸºäºäº‹åŠ¡çš„</strong>ï¼Œå› æ­¤ ZooKeeper åœ¨è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ä¸­æœ‰æ€§èƒ½è¡¨ç°è¾ƒå¥½ï¼Œå¦‚æœå†™æ“ä½œé¢‘ç¹ï¼Œæ€§èƒ½ä¼šå¤§å¤§ä¸‹æ»‘ã€‚</li>\n<li>å¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZookeeper éƒ½ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢ IDï¼Œè¿™ä¸ª ID åæ˜ äº†æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å…ˆåé¡ºåºã€‚</li>\n</ul>\n<h1 id=\"æ ¸å¿ƒæ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ ¸å¿ƒæ¦‚å¿µ\">#</a> æ ¸å¿ƒæ¦‚å¿µ</h1>\n<h2 id=\"æ•°æ®æ¨¡å‹\"><a class=\"anchor\" href=\"#æ•°æ®æ¨¡å‹\">#</a> æ•°æ®æ¨¡å‹</h2>\n<p><strong>ZooKeeper çš„æ•°æ®æ¨¡å‹æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿã€‚</strong><br />\næ ‘ä¸­çš„èŠ‚ç‚¹è¢«ç§°ä¸º <code>znode</code> ï¼Œå…¶ä¸­æ ¹èŠ‚ç‚¹ä¸º <code>/</code> ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å’ŒèŠ‚ç‚¹ä¿¡æ¯ã€‚ZooKeeper çš„è®¾è®¡ç›®æ ‡æ˜¯å®ç°åè°ƒæœåŠ¡ï¼Œè€Œä¸æ˜¯çœŸçš„ä½œä¸ºä¸€ä¸ªæ–‡ä»¶å­˜å‚¨ï¼Œå› æ­¤ <code>znode</code>  å­˜å‚¨æ•°æ®çš„å¤§å°è¢«é™åˆ¶åœ¨ <code>1MB</code>  ä»¥å†…ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1auhgrgj3j30fe0fedg1.jpg\" alt=\"\" height=\"200px\" /><br />\nZooKeeper çš„æ•°æ®è®¿é—®å…·æœ‰<strong>åŸå­æ€§</strong>ã€‚å…¶è¯»å†™æ“ä½œéƒ½æ˜¯è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚ <code>znode</code>  é€šè¿‡è·¯å¾„è¢«å¼•ç”¨ã€‚ <code>znode</code>  èŠ‚ç‚¹è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ã€‚<br />\nznode æœ‰ä¸¤ç§ç±»å‹ï¼š</p>\n<ul>\n<li><strong>ä¸´æ—¶çš„ï¼ˆ  <code>EPHEMERAL</code>  ï¼‰</strong> - å®¢æˆ·ç«¯ä¼šè¯ç»“æŸæ—¶ï¼ŒZooKeeper å°±ä¼šåˆ é™¤ä¸´æ—¶çš„  <code>znode</code> ã€‚ä¸å…è®¸æœ‰å­èŠ‚ç‚¹ã€‚</li>\n<li><strong>æŒä¹…çš„ï¼ˆ  <code>PERSISTENT</code>  ï¼‰</strong> - é™¤éå®¢æˆ·ç«¯ä¸»åŠ¨æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œå¦åˆ™ ZooKeeper ä¸ä¼šåˆ é™¤æŒä¹…çš„  <code>znode</code> ã€‚</li>\n</ul>\n<h2 id=\"èŠ‚ç‚¹ä¿¡æ¯\"><a class=\"anchor\" href=\"#èŠ‚ç‚¹ä¿¡æ¯\">#</a> èŠ‚ç‚¹ä¿¡æ¯</h2>\n<p><code>znode</code>  ä¸Šæœ‰ä¸€ä¸ª<strong>é¡ºåºæ ‡å¿—ï¼ˆ  <code>SEQUENTIAL</code>  ï¼‰</strong>ã€‚å¦‚æœåœ¨åˆ›å»º  <code>znode</code>  æ—¶ï¼Œè®¾ç½®äº†é¡ºåºæ ‡å¿—ï¼ˆ  <code>SEQUENTIAL</code>  ï¼‰ï¼Œé‚£ä¹ˆ ZooKeeper ä¼šä½¿ç”¨è®¡æ•°å™¨ä¸º  <code>znode</code>  æ·»åŠ ä¸€ä¸ªå•è°ƒé€’å¢çš„æ•°å€¼ï¼Œå³  <code>zxid</code> ã€‚ZooKeeper æ­£æ˜¯åˆ©ç”¨  <code>zxid</code>  å®ç°äº†ä¸¥æ ¼çš„é¡ºåºè®¿é—®æ§åˆ¶èƒ½åŠ›ã€‚</p>\n<div class=\"note info\">\n<p>é¡ºåºæ ‡å¿—è¿™å—ç¨å¾®æ³¨æ„ä¸€ä¸‹å“ˆï¼Œä»¥åæåˆ° Zookeeper çš„åˆ†å¸ƒå¼é”çš„æ—¶å€™å°±ä¼šç”¨åˆ°è¿™ä¸ªï½</p>\n</div>\n<p>æ¯ä¸ª <code>znode</code>  èŠ‚ç‚¹éƒ½ç»´æŠ¤äº†ä¸€ä¸ª <code>Stat</code>  çš„æ•°æ®ç»“æ„æ¥å­˜æ”¾èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">çŠ¶æ€å±æ€§</th>\n<th style=\"text-align:center\">è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">czxid</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„äº‹åŠ¡ ID</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ctime</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„æ—¶é—´</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">mzxid</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„äº‹åŠ¡ ID</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">mtime</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„æ—¶é—´</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">pzxid</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡ ID</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">cversion</td>\n<td style=\"text-align:center\">å­èŠ‚ç‚¹çš„æ›´æ”¹æ¬¡æ•°</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">version</td>\n<td style=\"text-align:center\">èŠ‚ç‚¹æ•°æ®çš„æ›´æ”¹æ¬¡æ•°</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">aversion</td>\n<td style=\"text-align:center\">èŠ‚ç‚¹çš„ ACL çš„æ›´æ”¹æ¬¡æ•°</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ephemeralOwner</td>\n<td style=\"text-align:center\">å¦‚æœèŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ™è¡¨ç¤ºåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„ SessionIDï¼›å¦‚æœèŠ‚ç‚¹æ˜¯æŒä¹…èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§å€¼ä¸º 0</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dataLength</td>\n<td style=\"text-align:center\">æ•°æ®å†…å®¹çš„é•¿åº¦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">numChildren</td>\n<td style=\"text-align:center\">æ•°æ®èŠ‚ç‚¹å½“å‰çš„å­èŠ‚ç‚¹ä¸ªæ•°</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"é›†ç¾¤è§’è‰²\"><a class=\"anchor\" href=\"#é›†ç¾¤è§’è‰²\">#</a> é›†ç¾¤è§’è‰²</h2>\n<p>Zookeeper çš„é›†ç¾¤è§’è‰²æœ‰ä¸‰ç§ï¼Œæ¯ä¸ªæœåŠ¡å™¨å……å½“è¿™ä¸‰ä¸ªé›†ç¾¤è§’è‰²ä¸­çš„ä¸€ç§ï¼š</p>\n<ul>\n<li><strong>Leader</strong> - å®ƒè´Ÿè´£ <strong>å‘èµ·å¹¶ç»´æŠ¤ä¸å„ Follwer åŠ Observer é—´çš„å¿ƒè·³</strong>ã€‚<span class=\"red\">æ‰€æœ‰</span>çš„<strong>å†™æ“ä½œ</strong>å¿…é¡»è¦é€šè¿‡ Leader å®Œæˆå†ç”± Leader å°†å†™æ“ä½œå¹¿æ’­ç»™å…¶å®ƒæœåŠ¡å™¨ã€‚ä¸€ä¸ª Zookeeper é›†ç¾¤åŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªå®é™…å·¥ä½œçš„ Leaderã€‚</li>\n<li><strong>Follower</strong> - å®ƒä¼š<strong>å“åº” Leader çš„å¿ƒè·³</strong>ã€‚Follower å¯ç›´æ¥å¤„ç†å¹¶è¿”å›å®¢æˆ·ç«¯çš„<span class=\"red\">è¯»è¯·æ±‚</span>ï¼ŒåŒæ—¶<strong>ä¼šå°†å†™è¯·æ±‚è½¬å‘ç»™ Leader å¤„ç†</strong>ï¼Œå¹¶ä¸”è´Ÿè´£åœ¨ Leader å¤„ç†å†™è¯·æ±‚æ—¶å¯¹è¯·æ±‚è¿›è¡Œ<strong>æŠ•ç¥¨</strong>ã€‚ä¸€ä¸ª Zookeeper é›†ç¾¤å¯èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ª Followerã€‚</li>\n<li><strong>Observer</strong> - è§’è‰²ä¸ Follower ç±»ä¼¼ï¼Œä½†æ˜¯æ— æŠ•ç¥¨æƒã€‚ã€å› ä¸º follower å¤„ç†è¯»è¯·æ±‚å¥½å¿™å•Šï¼Œéœ€è¦ä¸ª Observer æ¥å¸®å¸®å¿™ï¼Œä½†æ˜¯ä½ åªæ˜¯å¸®å¿™ï¼Œä½ ä¸æ˜¯è‡ªå®¶äººä¸èƒ½æŠ•ç¥¨ã€‘</li>\n</ul>\n<h2 id=\"acl\"><a class=\"anchor\" href=\"#acl\">#</a> ACL</h2>\n<p><strong>ZooKeeper é‡‡ç”¨ ACLï¼ˆAccess Control Listsï¼‰ç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶ã€‚</strong></p>\n<ul>\n<li>æ¯ä¸ª  <code>znode</code>  åˆ›å»ºæ—¶éƒ½ä¼šå¸¦æœ‰ä¸€ä¸ª ACL åˆ—è¡¨ï¼Œç”¨äºå†³å®šè°å¯ä»¥å¯¹å®ƒæ‰§è¡Œä½•ç§æ“ä½œã€‚</li>\n</ul>\n<p>ACL ä¾èµ–äº ZooKeeper çš„å®¢æˆ·ç«¯è®¤è¯æœºåˆ¶ã€‚ZooKeeper æä¾›äº†ä»¥ä¸‹å‡ ç§è®¤è¯æ–¹å¼ï¼š</p>\n<ul>\n<li><strong>digest</strong> - ç”¨æˆ·åå’Œå¯†ç  æ¥è¯†åˆ«å®¢æˆ·ç«¯</li>\n<li><strong>sasl</strong> - é€šè¿‡ kerberos æ¥è¯†åˆ«å®¢æˆ·ç«¯</li>\n<li><strong>ip</strong> - é€šè¿‡ IP æ¥è¯†åˆ«å®¢æˆ·ç«¯</li>\n</ul>\n<p>ZooKeeper å®šä¹‰äº†å¦‚ä¸‹äº”ç§æƒé™ï¼š</p>\n<ul>\n<li><strong>CREATE</strong> - å…è®¸åˆ›å»ºå­èŠ‚ç‚¹ï¼›</li>\n<li><strong>READ</strong> - å…è®¸ä»èŠ‚ç‚¹è·å–æ•°æ®å¹¶åˆ—å‡ºå…¶å­èŠ‚ç‚¹ï¼›</li>\n<li><strong>WRITE</strong> - å…è®¸ä¸ºèŠ‚ç‚¹è®¾ç½®æ•°æ®ï¼›</li>\n<li><strong>DELETE</strong> - å…è®¸åˆ é™¤å­èŠ‚ç‚¹ï¼›</li>\n<li><strong>ADMIN</strong> - å…è®¸ä¸ºèŠ‚ç‚¹è®¾ç½®æƒé™ã€‚</li>\n</ul>\n<h1 id=\"zookeeperå·¥ä½œåŸç†\"><a class=\"anchor\" href=\"#zookeeperå·¥ä½œåŸç†\">#</a> Zookeeper å·¥ä½œåŸç†</h1>\n<h2 id=\"è¯»è¯·æ±‚\"><a class=\"anchor\" href=\"#è¯»è¯·æ±‚\">#</a> è¯»è¯·æ±‚</h2>\n<p>Leader/Follower/Observer éƒ½å¯ç›´æ¥å¤„ç†è¯»è¯·æ±‚ï¼Œä»æœ¬åœ°å†…å­˜ä¸­è¯»å–æ•°æ®å¹¶è¿”å›ç»™å®¢æˆ·ç«¯å³å¯ã€‚Follower/Observer è¶Šå¤šï¼Œæ•´ä½“ç³»ç»Ÿçš„è¯»è¯·æ±‚ååé‡è¶Šå¤§ã€‚<br />\n<img data-src=\"https://tva1.sinaimg.cn/large/006yBBDDly8h1boywovc7j310m0kpdh0.jpg\" alt=\"\" height=\"300px\" /></p>\n<h2 id=\"å†™è¯·æ±‚\"><a class=\"anchor\" href=\"#å†™è¯·æ±‚\">#</a> å†™è¯·æ±‚</h2>\n<h3 id=\"å†™leader\"><a class=\"anchor\" href=\"#å†™leader\">#</a> å†™ Leader</h3>\n<p><img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1bp1tmau2j30sj0kp0tw.jpg\" alt=\"\" height=\"300px\" /><br />\næ€»ç»“æ¥è¯´ï¼Œå‘ Leader è¿›è¡Œå†™æ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å®¢æˆ·ç«¯å‘ Leader å‘é€å†™è¯·æ±‚</li>\n<li>Leader å°†å†™è¯·æ±‚ä»¥äº‹åŠ¡ Proposal çš„å½¢å¼å‘é€ç»™æ‰€æœ‰çš„ Follower å¹¶ç­‰å¾… ACK</li>\n<li>Follower æ”¶åˆ° Leader çš„äº‹åŠ¡ Proposal åè¿”å› ACK</li>\n<li>å½“ Leader æ”¶åˆ°è¿‡åŠæ•°çš„ ACKï¼ˆè‡ªå·±é»˜è®¤æœ‰ä¸€ä¸ª ACKï¼‰åå‘æ‰€æœ‰çš„ Follower å’Œ Observer å‘é€ Commit</li>\n<li>Leader å°†å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</li>\n</ol>\n<div class=\"note info no-icon\">\n<p>è¿™é‡Œéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p>\n<ol>\n<li>Leader çš„ ACK åªéœ€è¦ Follower çš„ï¼ŒObserver æ— æƒå‚ä¸</li>\n<li>Leader çš„ Commit æ˜¯è¦ Follower å’Œ Observer éƒ½å‚ä¸çš„</li>\n<li>Leader è‡ªèº«å°±æœ‰ä¸€ä¸ª ACKï¼Œè¿‡åŠæ•°çš„è®¡ç®—åˆ«å¿˜äº†å®ƒè‡ªå·±çš„è¿™ä¸€ç¥¨</li>\n</ol>\n</div>\n<h3 id=\"å†™followeræˆ–observer\"><a class=\"anchor\" href=\"#å†™followeræˆ–observer\">#</a> å†™ Follower æˆ– Observer</h3>\n<p>å‰é¢æåˆ°è¿‡ï¼ŒFollower å’Œ Observer åªèƒ½å¤„ç†è¯»è¯·æ±‚ï¼Œå†™è¯·æ±‚å…¨éƒ¨è¦äº¤ç»™ Leader æ¥å¤„ç†ï¼Œæ‰€ä»¥éœ€è¦å°†å†™è¯·æ±‚è½¬å‘ç»™ Leaderï¼Œé™¤äº†è¿™ä¸ªå¤šå‡ºæ¥çš„è½¬å‘æ­¥éª¤å¤–ï¼Œå…¶ä»–æµç¨‹éƒ½ä¸ä¸Šé¢ç›¸åŒã€‚</p>\n<h2 id=\"äº‹åŠ¡\"><a class=\"anchor\" href=\"#äº‹åŠ¡\">#</a> äº‹åŠ¡</h2>\n<p>ä¸ºäº†ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§ï¼ŒZooKeeper é‡‡ç”¨äº†<strong>é€’å¢çš„äº‹åŠ¡ id å·ï¼ˆzxidï¼‰æ¥æ ‡è¯†äº‹åŠ¡</strong>ã€‚Leader æœåŠ¡ä¼š<strong>ä¸ºæ¯ä¸€ä¸ª Follower æœåŠ¡å™¨åˆ†é…ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—</strong>ï¼Œç„¶åå°†äº‹åŠ¡ Proposal ä¾æ¬¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¹¶æ ¹æ® FIFO (å…ˆè¿›å…ˆå‡º) çš„ç­–ç•¥è¿›è¡Œæ¶ˆæ¯å‘é€ã€‚Follower æœåŠ¡åœ¨æ¥æ”¶åˆ° Proposal åï¼Œä¼šå°†å…¶<strong>ä»¥äº‹åŠ¡æ—¥å¿—çš„å½¢å¼å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ï¼Œå¹¶åœ¨å†™å…¥æˆåŠŸååé¦ˆç»™ Leader ä¸€ä¸ª Ack å“åº”</strong>ã€‚å½“ Leader æ¥æ”¶åˆ°è¶…è¿‡åŠæ•° Follower çš„ Ack å“åº”åï¼Œå°±ä¼šå¹¿æ’­ä¸€ä¸ª Commit æ¶ˆæ¯ç»™æ‰€æœ‰çš„ Follower ä»¥é€šçŸ¥å…¶è¿›è¡Œäº‹åŠ¡æäº¤ï¼Œä¹‹å Leader è‡ªèº«ä¹Ÿä¼šå®Œæˆå¯¹äº‹åŠ¡çš„æäº¤ã€‚è€Œæ¯ä¸€ä¸ª Follower åˆ™åœ¨æ¥æ”¶åˆ° Commit æ¶ˆæ¯åï¼Œå®Œæˆäº‹åŠ¡çš„æäº¤ã€‚</p>\n<h2 id=\"è§‚å¯Ÿ\"><a class=\"anchor\" href=\"#è§‚å¯Ÿ\">#</a> è§‚å¯Ÿ</h2>\n<p><strong>ZooKeeper å…è®¸å®¢æˆ·ç«¯ç›‘å¬å®ƒå…³å¿ƒçš„ znodeï¼Œå½“ znode çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ˆæ•°æ®å˜åŒ–ã€å­èŠ‚ç‚¹å¢å‡å˜åŒ–ï¼‰æ—¶ï¼ŒZooKeeper æœåŠ¡ä¼šé€šçŸ¥å®¢æˆ·ç«¯ã€‚</strong>ã€æ‰€ä»¥è¯´ Zookeeper ä¹Ÿå¯ä»¥å®Œæˆæ¶ˆæ¯çš„æ¨é€ã€‘<br />\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒè¿æ¥ä¸€èˆ¬æœ‰ä¸¤ç§å½¢å¼ï¼š</p>\n<ul>\n<li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ä¸æ–­<strong>è½®è¯¢</strong></li>\n<li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯<strong>æ¨é€</strong>çŠ¶æ€ã€Zookeeper é‡‡ç”¨ã€‘</li>\n</ul>\n<h2 id=\"ä¼šè¯\"><a class=\"anchor\" href=\"#ä¼šè¯\">#</a> ä¼šè¯</h2>\n<p>ZooKeeper å®¢æˆ·ç«¯é€šè¿‡ TCP é•¿è¿æ¥è¿æ¥åˆ° ZooKeeper æœåŠ¡é›†ç¾¤ã€‚ä¼šè¯ (Session) ä»ç¬¬ä¸€æ¬¡è¿æ¥å¼€å§‹å°±å·²ç»å»ºç«‹ï¼Œä¹‹åé€šè¿‡å¿ƒè·³æ£€æµ‹æœºåˆ¶æ¥ä¿æŒæœ‰æ•ˆçš„ä¼šè¯çŠ¶æ€ã€‚ä¸€æ—¦ä¸€å°å®¢æˆ·ç«¯ä¸ä¸€å°æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œè¿™å°æœåŠ¡å™¨ä¼šä¸ºè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚æ¯ä¸ªä¼šè¯éƒ½ä¼šæœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè‹¥æœåŠ¡å™¨åœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•è¯·æ±‚ï¼Œåˆ™ç›¸åº”ä¼šè¯è¢«è§†ä¸ºè¿‡æœŸã€‚<strong>ä¸€æ—¦ä¼šè¯è¿‡æœŸï¼Œå°±æ— æ³•å†é‡æ–°æ‰“å¼€ï¼Œä¸”ä»»ä½•ä¸è¯¥ä¼šè¯ç›¸å…³çš„ä¸´æ—¶ znode éƒ½ä¼šè¢«åˆ é™¤</strong>ã€‚</p>\n<h1 id=\"zabåè®®\"><a class=\"anchor\" href=\"#zabåè®®\">#</a> ZAB åè®®</h1>\n<p>å¤§åé¼é¼çš„ Paxos ç®—æ³•çŸ¥é“å§ï¼Ÿå¥¥ï¼ŒZookeeper æ²¡æœ‰é‡‡ç”¨ã€‚<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1bpyohtcej30d60d6jrv.jpg\" alt=\"\" height=\"150px\" /><br />\nZookeeper é‡‡ç”¨äº†åä¸º<strong> ZAB</strong> çš„ä¸€è‡´æ€§åè®®ã€‚ZAB åè®®æ˜¯ Zookeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒå´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®ï¼Œæ˜¯ ZooKeeper çš„æ•°æ®ä¸€è‡´æ€§å’Œé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>ZAB åè®®å®šä¹‰äº†ä¸¤ä¸ªå¯ä»¥æ— é™å¾ªç¯çš„æµç¨‹ï¼š</p>\n<ul>\n<li><strong>é€‰ä¸¾ Leader</strong> - ç”¨äºæ•…éšœæ¢å¤ï¼Œä»è€Œä¿è¯é«˜å¯ç”¨ã€‚</li>\n<li><strong>åŸå­å¹¿æ’­</strong> - ç”¨äºä¸»ä»åŒæ­¥ï¼Œä»è€Œä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>\n</ul>\n<h2 id=\"é€‰ä¸¾leader\"><a class=\"anchor\" href=\"#é€‰ä¸¾leader\">#</a> é€‰ä¸¾ Leader</h2>\n<p>åœ¨ä»‹ç»å…·ä½“çš„é€‰ä¸¾ Leader æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçœ‹ç‚¹ä¸œè¥¿ã€‚<br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1bw275nd2j30x00u0mz7.jpg\" alt=\"\" height=\"150px\" /></p>\n<p>æœåŠ¡å™¨çŠ¶æ€ï¼š</p>\n<ul>\n<li><strong>LOOKING</strong> - ä¸ç¡®å®š Leader çŠ¶æ€ã€‚è¯¥çŠ¶æ€ä¸‹çš„æœåŠ¡å™¨è®¤ä¸ºå½“å‰é›†ç¾¤ä¸­æ²¡æœ‰ Leaderï¼Œä¼šå‘èµ· Leader é€‰ä¸¾</li>\n<li><strong>FOLLOWING</strong> - è·Ÿéšè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Followerï¼Œå¹¶ä¸”å®ƒçŸ¥é“ Leader æ˜¯è°</li>\n<li><strong>LEADING</strong> - é¢†å¯¼è€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Leaderï¼Œå®ƒä¼šç»´æŠ¤ä¸ Follower é—´çš„å¿ƒè·³</li>\n<li><strong>OBSERVING</strong> - è§‚å¯Ÿè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Observerï¼Œä¸ Folower å”¯ä¸€çš„ä¸åŒåœ¨äºä¸å‚ä¸é€‰ä¸¾ï¼Œä¹Ÿä¸å‚ä¸é›†ç¾¤å†™æ“ä½œæ—¶çš„æŠ•ç¥¨</li>\n</ul>\n<p>æŠ•ç¥¨çš„é‡è¦æ•°æ®ç»“æ„ï¼š</p>\n<ul>\n<li><strong>æœåŠ¡å™¨ ID (myid)</strong>ï¼šç¼–å·è¶Šå¤§åœ¨é€‰ä¸¾ç®—æ³•ä¸­æƒé‡è¶Šå¤§</li>\n<li><strong>äº‹åŠ¡ ID (zxid)</strong>ï¼šå€¼è¶Šå¤§è¯´æ˜æ•°æ®è¶Šæ–°ï¼Œæƒé‡è¶Šå¤§</li>\n<li><strong>é€»è¾‘æ—¶é’Ÿ (epoch-logicalclock)</strong>ï¼šåŒä¸€è½®æŠ•ç¥¨è¿‡ç¨‹ä¸­çš„é€»è¾‘æ—¶é’Ÿå€¼æ˜¯ç›¸åŒçš„ï¼Œæ¯æŠ•å®Œä¸€æ¬¡å€¼ä¼šå¢åŠ </li>\n</ul>\n<p>é‚£ä¹ˆæˆ‘ä»¬å°±å¼€å§‹ä»‹ç»æˆ‘ä»¬çš„é€‰ä¸¾æµç¨‹ï¼Œé€‰ä¸¾çš„è¯å¯ä»¥åˆ†ä¸ºä¸¤ç§å¤§ç±»å‹ï¼šï¼ˆ1ï¼‰æœåŠ¡å™¨å¯åŠ¨æ—¶çš„é€‰ä¸¾ï¼›ï¼ˆ2ï¼‰è¿è¡Œè¿‡ç¨‹ä¸­çš„é€‰ä¸¾</p>\n<h3 id=\"æœåŠ¡å™¨å¯åŠ¨æ—¶é€‰ä¸¾\"><a class=\"anchor\" href=\"#æœåŠ¡å™¨å¯åŠ¨æ—¶é€‰ä¸¾\">#</a> æœåŠ¡å™¨å¯åŠ¨æ—¶é€‰ä¸¾</h3>\n<p>æ¯ä¸ªèŠ‚ç‚¹å¯åŠ¨çš„æ—¶å€™éƒ½ LOOKING è§‚æœ›çŠ¶æ€ï¼Œæ¥ä¸‹æ¥å°±å¼€å§‹è¿›è¡Œé€‰ä¸¾ä¸»æµç¨‹ã€‚</p>\n<ol>\n<li>æ¯ä¸ª Server å‘å‡ºä¸€ä¸ªé€‰ç¥¨ã€‚åˆå§‹åŒ–é€‰ç¥¨éƒ½æ˜¯é€‰è‡ªå·±ï¼Œæ¯æ¬¡æŠ•ç¥¨éƒ½ä¼šåŒ…å«æ‰€æ¨ä¸¾æœåŠ¡å™¨çš„ myid å’Œ zxidï¼Œä½¿ç”¨ (myid,zxid) æ¥è¡¨ç¤ºï¼Œç„¶åå°†é€‰ç¥¨å‘ç»™é›†ç¾¤ä¸­çš„å…¶ä»–æœºå™¨</li>\n<li>æ¥æ”¶æ¥è‡ªå„ä¸ªæœåŠ¡å™¨çš„æŠ•ç¥¨ã€‚é›†ç¾¤ä¸­çš„æ¯ä¸ªæœåŠ¡å™¨æ”¶åˆ°æŠ•ç¥¨åï¼Œé¦–å…ˆåˆ¤æ–­è¯¥æŠ•ç¥¨çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æ£€æŸ¥æ˜¯å¦æ˜¯æœ¬è½®æŠ•ç¥¨ï¼ˆepochï¼‰ã€æ˜¯å¦æ¥è‡ª LOOKING çŠ¶æ€çš„æœåŠ¡å™¨</li>\n<li>å¤„ç†æŠ•ç¥¨ã€‚é’ˆå¯¹æ¯ä¸€æ¬¡æŠ•ç¥¨ï¼ŒæœåŠ¡å™¨éƒ½éœ€è¦å°†å…¶ä»–æœåŠ¡å™¨çš„æŠ•ç¥¨å’Œè‡ªå·±çš„æŠ•ç¥¨è¿›è¡Œå¯¹æ¯”ï¼Œå¯¹æ¯”è§„åˆ™å¦‚ä¸‹ã€å…¶å®åœ¨åˆå§‹æƒ…å†µä¸‹ï¼Œå¤§å®¶éƒ½æ²¡æœ‰ zxidï¼Œepoch ä¹Ÿéƒ½ä¸€æ ·ï¼Œæ‰€ä»¥å°±æ˜¯è¯´è°çš„ myid è¶Šå¤§è°å°±æ˜¯ leader å•¦ã€‘ï¼š</li>\n</ol>\n<ul>\n<li>ä¼˜å…ˆæ¯”è¾ƒ epoch</li>\n<li>æ£€æŸ¥ zxidï¼Œzxid æ¯”è¾ƒå¤§çš„æœåŠ¡å™¨ä¼˜å…ˆä½œä¸º leader</li>\n<li>å¦‚æœ zxid ç›¸åŒï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒ myidï¼Œmyid è¾ƒå¤§çš„æœåŠ¡å™¨ä½œä¸º leader æœåŠ¡å™¨</li>\n</ul>\n<ol start=\"4\">\n<li>ç»Ÿè®¡æŠ•ç¥¨ã€‚æ¯æ¬¡æŠ•ç¥¨åï¼ŒæœåŠ¡å™¨ç»Ÿè®¡æŠ•ç¥¨ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯éƒ½æœ‰è¿‡åŠæœºå™¨æ¥æ”¶åˆ°ç›¸åŒçš„æŠ•ç¥¨ä¿¡æ¯ã€‚</li>\n<li>æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ã€‚ä¸€æ—¦ç¡®å®šäº† leaderï¼Œæ¯ä¸ªæœåŠ¡å™¨å“åº”æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚æœæ˜¯ followerï¼Œé‚£ä¹ˆå°±å˜æ›´ä¸º FOLLOWINGï¼Œå¦‚æœæ˜¯ Leaderï¼Œå˜æ›´ä¸º LEADINGã€‚</li>\n</ol>\n<h3 id=\"è¿è¡Œè¿‡ç¨‹ä¸­çš„é€‰ä¸¾\"><a class=\"anchor\" href=\"#è¿è¡Œè¿‡ç¨‹ä¸­çš„é€‰ä¸¾\">#</a> è¿è¡Œè¿‡ç¨‹ä¸­çš„é€‰ä¸¾</h3>\n<p>åœ¨é›†ç¾¤è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„ Leader å¯èƒ½ä¼šæŒ‚æ‰ï¼Œå¦‚æœæŒ‚äº†å°±éœ€è¦é€‰å‡ºæ¥ä¸€ä¸ªæ–°çš„ Leaderï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å˜æ›´çŠ¶æ€ã€‚Leader æŒ‚åï¼Œä½™ä¸‹çš„é Observer æœåŠ¡å™¨éƒ½ä¼šè®²è‡ªå·±çš„æœåŠ¡å™¨çŠ¶æ€å˜æ›´ä¸º LOOKINGï¼Œç„¶åå¼€å§‹è¿›å…¥ Leader é€‰ä¸¾è¿‡ç¨‹ã€‚</li>\n<li>æ¯ä¸ª Server ä¼šå‘å‡ºä¸€ä¸ªæŠ•ç¥¨ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šçš„ ZXID å¯èƒ½ä¸åŒï¼Œæ­¤æ—¶å‡å®š Server1 çš„ ZXID ä¸º 123ï¼ŒServer3 çš„ ZXID ä¸º 122ï¼›åœ¨ç¬¬ä¸€è½®æŠ•ç¥¨ä¸­ï¼ŒServer1 å’Œ Server3 éƒ½ä¼šæŠ•è‡ªå·±ï¼Œäº§ç”ŸæŠ•ç¥¨ (1, 123)ï¼Œ(3, 122)ï¼Œç„¶åå„è‡ªå°†æŠ•ç¥¨å‘é€ç»™é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ã€‚</li>\n<li>æ¥æ”¶æ¥è‡ªå„ä¸ªæœåŠ¡å™¨çš„æŠ•ç¥¨ã€‚</li>\n<li>å¤„ç†æŠ•ç¥¨ã€‚æ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬çš„ Server1 å°†ä¼šå˜æˆæ–°çš„ Leader</li>\n</ol>\n<ul>\n<li>ä¼˜å…ˆæ¯”è¾ƒ epoch</li>\n<li>æ£€æŸ¥ zxidï¼Œzxid æ¯”è¾ƒå¤§çš„æœåŠ¡å™¨ä¼˜å…ˆä½œä¸º leader</li>\n<li>å¦‚æœ zxid ç›¸åŒï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒ myidï¼Œmyid è¾ƒå¤§çš„æœåŠ¡å™¨ä½œä¸º leader æœåŠ¡å™¨</li>\n</ul>\n<ol start=\"5\">\n<li>ç»Ÿè®¡æŠ•ç¥¨ã€‚</li>\n<li>æ”¹å˜æœåŠ¡å™¨çš„çŠ¶æ€ã€‚å¦‚æœæ˜¯ Followerï¼Œé‚£ä¹ˆå°±å˜æ›´ä¸º FOLLOWINGï¼Œå¦‚æœæ˜¯ Leaderï¼Œå°±å˜æ›´ä¸º LEADINGã€‚</li>\n</ol>\n<div class=\"note info no-icon\">\n<p>è¦ä½¿ Leader è·å¾—å¤šæ•° Server çš„æ”¯æŒï¼Œåˆ™ ZooKeeper é›†ç¾¤èŠ‚ç‚¹æ•°<strong>å¿…é¡»æ˜¯å¥‡æ•°</strong>ã€‚ä¸”å­˜æ´»çš„èŠ‚ç‚¹æ•°ç›®ä¸å¾—å°‘äº  <code>N + 1</code>  ã€‚</p>\n</div>\n<h2 id=\"åŸå­å¹¿æ’­atomic-broadcast\"><a class=\"anchor\" href=\"#åŸå­å¹¿æ’­atomic-broadcast\">#</a> åŸå­å¹¿æ’­ï¼ˆAtomic Broadcastï¼‰</h2>\n<p>ZAB åè®®çš„åŸå­å¹¿æ’­è¦æ±‚ï¼š<strong>æ‰€æœ‰çš„å†™è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘ç»™ Leaderï¼ŒLeader ä¼šä»¥åŸå­å¹¿æ’­çš„æ–¹å¼é€šçŸ¥ Followã€‚å½“åŠæ•°ä»¥ä¸Šçš„ Follow å·²ç»æ›´æ–°çŠ¶æ€æŒä¹…åŒ–åï¼ŒLeader æ‰ä¼šæäº¤è¿™ä¸ªæ›´æ–°ï¼Œç„¶åå®¢æˆ·ç«¯æ‰ä¼šæ”¶åˆ°ä¸€ä¸ªæ›´æ–°æˆåŠŸçš„å“åº”ã€‚</strong></p>\n<h1 id=\"zookeeperçš„åº”ç”¨\"><a class=\"anchor\" href=\"#zookeeperçš„åº”ç”¨\">#</a> Zookeeper çš„åº”ç”¨</h1>\n<blockquote>\n<p>ZooKeeper å¯ä»¥ç”¨äºå‘å¸ƒ / è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½ä»¤æœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ / é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ ã€‚</p>\n</blockquote>\n<h2 id=\"å‘½åæœåŠ¡\"><a class=\"anchor\" href=\"#å‘½åæœåŠ¡\">#</a> å‘½åæœåŠ¡</h2>\n<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šå¸¸éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„åå­—ï¼Œå¦‚ç”Ÿæˆå…¨å±€å”¯ä¸€çš„è®¢å•å·ç­‰ï¼ŒZooKeeper å¯ä»¥é€šè¿‡é¡ºåºèŠ‚ç‚¹çš„ç‰¹æ€§æ¥ç”Ÿæˆå…¨å±€å”¯ä¸€ IDï¼Œä»è€Œå¯ä»¥å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿæä¾›å‘½åæœåŠ¡ã€‚</p>\n<h2 id=\"é…ç½®ç®¡ç†\"><a class=\"anchor\" href=\"#é…ç½®ç®¡ç†\">#</a> é…ç½®ç®¡ç†</h2>\n<p>åˆ©ç”¨ ZooKeeper çš„è§‚å¯Ÿæœºåˆ¶ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ªé«˜å¯ç”¨çš„é…ç½®å­˜å‚¨å™¨ï¼Œå…è®¸åˆ†å¸ƒå¼åº”ç”¨çš„å‚ä¸è€…æ£€ç´¢å’Œæ›´æ–°é…ç½®æ–‡ä»¶ã€‚</p>\n<h2 id=\"åˆ†å¸ƒå¼é”\"><a class=\"anchor\" href=\"#åˆ†å¸ƒå¼é”\">#</a> åˆ†å¸ƒå¼é”</h2>\n<p>å¯ä»¥é€šè¿‡ ZooKeeper çš„ä¸´æ—¶èŠ‚ç‚¹å’Œ Watcher æœºåˆ¶æ¥å®ç°åˆ†å¸ƒå¼æ’å®ƒé”ã€‚<br />\næ ¸å¿ƒæ€æƒ³ï¼š<strong>å½“å®¢æˆ·ç«¯éœ€è¦è·å–é”ï¼Œå°±åœ¨è¯¥é”èŠ‚ç‚¹ä¸‹åˆ›å»ºèŠ‚ç‚¹ï¼Œä½¿ç”¨å®Œé”ï¼Œå°±åˆ é™¤èŠ‚ç‚¹</strong><br />\n<img data-src=\"https://tva4.sinaimg.cn/large/006yBBDDly8h1bxlf0gduj31260iyq4x.jpg\" alt=\"\" height=\"350px\" /></p>\n<p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨ç³»ç»Ÿå†…çš„é”å°±æ˜¯ lock èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ zookeeper åˆ†å¸ƒå¼é”æµç¨‹ï¼š</p>\n<ol>\n<li>å®¢æˆ·ç«¯è·å–é”æ—¶ï¼Œåœ¨ lock èŠ‚ç‚¹ä¸‹åˆ›å»º<span class=\"red\">ä¸´æ—¶é¡ºåº</span>èŠ‚ç‚¹</li>\n<li>å®¢æˆ·ç«¯è·å– lock ä¸‹æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œä¹‹åå¦‚æœå‘ç°è‡ªå·±åˆ›å»ºçš„å­èŠ‚ç‚¹çš„åºå·æ˜¯æœ€å°çš„ï¼Œåˆ™è®¤ä¸ºè‡ªå·±è·å–åˆ°äº†é”ï¼›å¦‚æœä½¿ç”¨å®Œäº†å°±åˆ é™¤è‡ªå·±åˆ›å»ºçš„ç»“ç‚¹</li>\n<li>å¦‚æœå®¢æˆ·ç«¯å‘ç°è‡ªå·±å¹¶ä¸æ˜¯ lock æ‰€æœ‰å­èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ï¼Œå°±è¯´æ˜æ²¡æœ‰è·å–åˆ°é”ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯éœ€è¦æ‰¾åˆ°é€¼è‡ªå·±å°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å¯¹å…¶æ³¨å†Œæ—¶é—´ç›‘å¬å™¨ï¼Œç›‘å¬åˆ é™¤äº‹ä»¶</li>\n<li>å¦‚æœå‘ç°æ¯”è‡ªå·±å°çš„é‚£ä¸ªèŠ‚ç‚¹è¢«åˆ é™¤äº†ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ”¶åˆ° Watcher çš„é€šçŸ¥ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å†æ¬¡å»åˆ¤æ–­è‡ªå·±åˆ›å»ºçš„ç»“ç‚¹æ˜¯å¦æ˜¯ lock å­èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ï¼Œå¦‚æœæ˜¯å°±è·å–åˆ°é”ï¼›å¦‚æœä¸æ˜¯å°±é‡å¤ä¸Šè¿°æ­¥éª¤ç»§ç»­è·å–æ¯”è‡ªå·±å°çš„ä¸€ä¸ªèŠ‚ç‚¹å¹¶æ³¨å†Œç›‘å¬ã€‚</li>\n</ol>\n<div class=\"note info no-icon\">\n<p>è¿™é‡Œéœ€è¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š</p>\n<ol>\n<li>ä¸ºä»€ä¹ˆåˆ›å»ºçš„æ˜¯ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼Ÿ<br />\né¡ºåºèŠ‚ç‚¹å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ç”Ÿæˆåºå·çš„é¡ºåºæ¥å†³å®šè·å–é”çš„å…ˆåé¡ºåºå˜›ï¼›é‚£ä¹ˆæ³¨æ„æ€è€ƒä¸ºä»€ä¹ˆä¸ç”¨æŒä¹…èŠ‚ç‚¹è€Œç”¨ä¸´æ—¶çš„å‘¢ï¼Ÿæˆ‘ç”¨äº†æŒä¹…èŠ‚ç‚¹ç„¶åæ¯æ¬¡è·å–é”ä¹‹åæ˜¾ç¤ºçš„åˆ é™¤ä¸å°±è¡Œäº†ï¼Ÿå…¶å®æ˜¯å› ä¸ºå¦‚æœæˆ‘çš„å®¢æˆ·ç«¯è·å–åˆ°äº†é”ä¹‹åçªç„¶å®•æœºäº†ï¼Œè¿™æ—¶å€™å®ƒåˆ›å»ºçš„èŠ‚ç‚¹å°±ä¸€ç›´ä¸ä¼šè¢«åˆ é™¤ï¼Œå¯¼è‡´å…¶ä»–å®¢æˆ·ç«¯æ°¸è¿œä¸èƒ½è·å–é”ï¼Œè€Œæˆ‘ä»¬ä¸´æ—¶èŠ‚ç‚¹çš„åˆ é™¤æ˜¯å½“ä¼šè¯ç»“æŸçš„æ—¶å€™å°±è‡ªåŠ¨åˆ é™¤ï¼Œå½“ä½ å®¢æˆ·ç«¯çªç„¶å‡ºé—®é¢˜äº†ï¼Œä½ åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹ä¹Ÿå¯ä»¥è¢«åˆ é™¤ï¼Œä»è€Œä¿è¯ç³»ç»Ÿèƒ½å¤Ÿæ­£å¸¸å·¥ä½œä¸‹å»</li>\n<li>ç›‘å¬èŠ‚ç‚¹åˆ äº†ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è·å–é”è¿˜è¦æ¥ç€å†åˆ¤æ–­ä¸€æ¬¡å‘¢ï¼Ÿ<br />\nè¿˜æ˜¯é‚£ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ç›‘å¬çš„é‚£ä¸ªèŠ‚ç‚¹çš„å®¢æˆ·ç«¯ä¸æ˜¯å› ä¸ºè·å–å®Œäº†é”åˆ é™¤çš„ï¼Œè€Œæ˜¯å› ä¸ºå®•æœºäº†è‡ªåŠ¨åˆ é™¤äº†æ€ä¹ˆåŠï¼Ÿæ‰€ä»¥å½“ç›‘å¬åˆ°çš„ç»“ç‚¹åˆ é™¤äº†ä¹‹åæˆ‘ä»¬éœ€è¦å†æ¬¡åˆ¤æ–­è‡ªå·±æ˜¯ä¸æ˜¯æœ‰è¿™ä¸ªèµ„æ ¼æ‹¿åˆ°é”</li>\n</ol>\n</div>\n<p>å‚è€ƒé“¾æ¥ï¼š</p>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kdW53dS5naXRodWIuaW8vYmlnZGF0YS10dXRvcmlhbC96b29rZWVwZXIvWm9vS2VlcGVyJUU1JThFJTlGJUU3JTkwJTg2Lmh0bWwjXzEtem9va2VlcGVyLSVFNyVBRSU4MCVFNCVCQiU4Qg==\">Zookeeper åŸç†</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL3pvb2tlZXBlci1sZWFkZXIuaHRtbA==\">Zookeeper Leader é€‰ä¸¾åŸç†</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMU03NDExMzdxWT9wPTE5\">é»‘é©¬ç¨‹åºå‘˜å¿«é€Ÿå…¥é—¨ zookeeper æŠ€æœ¯</span></li>\n</ol>\n",
            "tags": [
                "Java",
                "ä¸­é—´ä»¶",
                "Zookeeper",
                "æ¡†æ¶",
                "ä¸­é—´ä»¶",
                "Zookeeper"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/14/Java/Spring-Boot-Druid-Mybatis%E9%85%8D%E7%BD%AE%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/",
            "url": "https://sprenedayf.com/2022/04/14/Java/Spring-Boot-Druid-Mybatis%E9%85%8D%E7%BD%AE%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/",
            "title": "Spring Boot+Druid+Mybatisé…ç½®å¤šæ•°æ®æº",
            "date_published": "2022-04-14T07:33:12.000Z",
            "content_html": "<h1 id=\"èƒŒæ™¯\"><a class=\"anchor\" href=\"#èƒŒæ™¯\">#</a> èƒŒæ™¯</h1>\n<p>é¡¹ç›®ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä» mysql ä¸­æŸ¥è¯¢ä¸€äº›å…ƒæ•°æ®ï¼Œä» clickhouse ä¸­æŸ¥è¯¢ä¸€äº›èšåˆåˆ†ææ•°æ®ï¼Œæ‰€ä»¥éœ€è¦åœ¨é¡¹ç›®ä¸­é…ç½®ä¸¤ä¸ªæ•°æ®æºï¼Œæœ¬æ¥æ˜¯æ‰“ç®—ç”¨ <code>JDBCTemplate</code>  æ¥åˆ›å»ºæ•°æ®åº“è¿æ¥è§£å†³ï¼Œä½†æ˜¯å†…å¿ƒå¸Œæœ›æ˜¯å¯ä»¥åˆ©ç”¨è¿æ¥æ± æ¥å¸®åŠ©æˆ‘è§£å†³è¿™ä¸ªéœ€æ±‚ï¼Œæ¯•ç«Ÿè¿æ¥æ± å¯ä»¥å¸®æˆ‘ä»¬ç®¡ç†è¿æ¥ï¼Œè€Œä¸” clickhouse ä¹Ÿå¯ä»¥åˆ©ç”¨ Mybatisï¼Œæ­£å¥½ä¸ç”¨æŠŠ sql å†™åˆ° java ä»£ç é‡Œé¢äº†ï¼Œç»Ÿä¸€æ”¾åœ¨ xml æ–‡ä»¶é‡Œé¢æ›´å¥½ç®¡ç†ã€‚ä¸å¤šåºŸè¯ï¼Œç›´æ¥å¼€å§‹ï¼š<br />\næœ¬æ–‡é‡‡ç”¨çš„æ˜¯ Druid è¿æ¥æ± ï¼Œä¸»è¦è€ƒè™‘åˆ° Druid è‡ªå¸¦äº†ç›‘æ§ç­‰åŠŸèƒ½ï¼Œæˆ‘ä»¬é¡¹ç›®çš„æŸ¥è¯¢ä¸Šä¹Ÿæ²¡æœ‰æè‡´çš„æ€§èƒ½è¦æ±‚ã€‚</p>\n<h1 id=\"å¯¼å…¥ä¾èµ–\"><a class=\"anchor\" href=\"#å¯¼å…¥ä¾èµ–\">#</a> å¯¼å…¥ä¾èµ–</h1>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- clickhouse è¿æ¥ --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.clickhouse<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>clickhouse-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.3.2-patch7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!-- druid å¤šæ•°æ®æºé…ç½® --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.alibaba<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>druid<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.1.10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">&lt;!-- mysql è¿æ¥ --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>mysql<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mysql-connector-java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>8.0.16<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">&lt;!-- mybatis é…ç½® --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis.spring.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis-spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.1.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h1 id=\"é…ç½®å±æ€§\"><a class=\"anchor\" href=\"#é…ç½®å±æ€§\">#</a> é…ç½®å±æ€§</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">datasource</span><span class=\"token punctuation\">:</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> com.alibaba.druid.pool.DruidDataSource</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">druid</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token comment\">#æœ€å¤§æ´»è·ƒæ•°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token key atrule\">maxActive</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token comment\">#åˆå§‹åŒ–æ•°é‡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token key atrule\">initialSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token comment\">#æœ€å¤§è¿æ¥ç­‰å¾…è¶…æ—¶æ—¶é—´</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token key atrule\">maxWait</span><span class=\"token punctuation\">:</span> <span class=\"token number\">120000</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token key atrule\">validation-query</span><span class=\"token punctuation\">:</span> select 1;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">filter</span><span class=\"token punctuation\">:</span> stat<span class=\"token punctuation\">,</span>wall</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">mysql</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token key atrule\">jdbc-url</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>mysql<span class=\"token punctuation\">:</span>//ä½ çš„mysqlåœ°å€<span class=\"token punctuation\">:</span>3306/æ•°æ®åº“<span class=\"token punctuation\">?</span>characterEncoding=utf8<span class=\"token important\">&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">driver-class-name</span><span class=\"token punctuation\">:</span> com.mysql.cj.jdbc.Driver</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> root</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># ä½ çš„è¿æ¥å¯†ç </span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">clickhouse</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token key atrule\">driver-class-name</span><span class=\"token punctuation\">:</span> com.clickhouse.jdbc.ClickHouseDriver</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">jdbc-url</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>clickhouse<span class=\"token punctuation\">:</span>//ä½ çš„clickhouseåœ°å€<span class=\"token punctuation\">:</span><span class=\"token number\">8123</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è¿æ¥å é»˜è®¤ä¸º default</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># ä½ çš„è¿æ¥å¯†ç </span></pre></td></tr></table></figure><p>ä¸æ­¤åŒæ—¶ä¸ºäº†èƒ½å¤Ÿåœ¨æ§åˆ¶å°æ‰“å°å‡ºæˆ‘ä»¬æŸ¥è¯¢çš„è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠ sql æ‰“å°å‡ºæ¥ï¼Œè¿˜æ˜¯åœ¨ä½ çš„ yml æ–‡ä»¶ä¸­é…ç½®:</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">logging</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">com.pig4cloud.pig.tagchbi.dao</span><span class=\"token punctuation\">:</span> debug</pre></td></tr></table></figure><h1 id=\"ç¼–å†™é…ç½®ç±»\"><a class=\"anchor\" href=\"#ç¼–å†™é…ç½®ç±»\">#</a> ç¼–å†™é…ç½®ç±»</h1>\n<p>è¿™é‡Œä½ æœ‰å‡ ä¸ªæ•°æ®æºå°±è¦å†™å‡ ä¸ªé…ç½®ç±»ï¼Œæ¯”å¦‚æˆ‘é¡¹ç›®ä¸­æœ‰ mysql å’Œ clickhouse ä¸¤ä¸ªæ•°æ®æºï¼Œæ‰€ä»¥æˆ‘å°±å†™äº† <code>MysqlConfig</code>  å’Œ <code>ClickhouseConfig</code>  ä¸¤ä¸ªé…ç½®ç±»ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// MysqlConfig</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * @author difendDF</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * @date 2022/04/05 10:47 ä¸Šåˆ</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span>    <span class=\"token comment\">// æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// è¿™é‡Œé…ç½®ä½ çš„ DAO æ–‡ä»¶çš„ä½ç½®</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@MapperScan</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"com.pig4cloud.pig.tagchbi.dao.clickhouse\"</span><span class=\"token punctuation\">,</span>sqlSessionTemplateRef <span class=\"token operator\">=</span> <span class=\"token string\">\"ClickhouseSessionTemplate\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ClickhouseConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     * é…ç½®å¤šæ•°æ®æº å…³é”®å°±åœ¨è¿™é‡Œ è¿™é‡Œé…ç½®äº†ä¸åŒçš„æ•°æ®æºæ‰«æä¸åŒ mapper</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// è¿™é‡Œé…ç½®ä½ çš„ mapper.xml æ–‡ä»¶çš„ä½ç½®</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> MAPPER_LOCATION <span class=\"token operator\">=</span> <span class=\"token string\">\"classpath:mapper/clickhouse/*.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>     * @desc: sqlSession é…ç½®</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>     * @param: []</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>     * @return: org.apache.ibatis.session.Configuration</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>     **/</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"configurationClickhouse\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span> <span class=\"token function\">configurationClickhouse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯é©¼å³°æ˜ å°„</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        configuration<span class=\"token punctuation\">.</span><span class=\"token function\">setMapUnderscoreToCamelCase</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> configuration<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"clickhouseDataSource\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token annotation punctuation\">@ConfigurationProperties</span><span class=\"token punctuation\">(</span>prefix <span class=\"token operator\">=</span> <span class=\"token string\">\"spring.datasource.clickhouse\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// è®¾ç½®é…ç½®</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DataSource</span> <span class=\"token function\">clickhouseDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">DataSourceBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"clickhouseSessionFactory\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SqlSessionFactory</span> <span class=\"token function\">clickhouseSessionFactory</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clickhouseDataSource\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token class-name\">SqlSessionFactoryBean</span> bean <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token function\">configurationClickhouse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setTypeAliasesPackage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.pig4cloud.pig.tagchbi.dao.clickhouse\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setMapperLocations</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PathMatchingResourcePatternResolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResources</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClickhouseConfig</span><span class=\"token punctuation\">.</span>MAPPER_LOCATION<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token keyword\">return</span> bean<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"clickhouseTransactionManager\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DataSourceTransactionManager</span> <span class=\"token function\">clickhouseTransactionManager</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clickhouseDataSource\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSourceTransactionManager</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"ClickhouseSessionTemplate\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SqlSessionTemplate</span> <span class=\"token function\">clickhouseSqlSessionTemplate</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clickhouseSessionFactory\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">SqlSessionFactory</span> sqlSessionFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionTemplate</span><span class=\"token punctuation\">(</span>sqlSessionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span>    <span class=\"token comment\">// æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@MapperScan</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"com.pig4cloud.pig.tagchbi.dao.mysql\"</span><span class=\"token punctuation\">,</span>sqlSessionTemplateRef <span class=\"token operator\">=</span> <span class=\"token string\">\"MysqlSessionTemplate\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MysqlConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * é…ç½®å¤šæ•°æ®æº å…³é”®å°±åœ¨è¿™é‡Œ è¿™é‡Œé…ç½®äº†ä¸åŒçš„æ•°æ®æºæ‰«æä¸åŒ mapper</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> MAPPER_LOCATION <span class=\"token operator\">=</span> <span class=\"token string\">\"classpath:mapper/mysql/*.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     * @desc: sqlSession é…ç½®</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     * @param: []</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     * @return: org.apache.ibatis.session.Configuration</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>     **/</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"configurationMysql\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span> <span class=\"token function\">configurationMysql</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span>Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯é©¼å³°æ˜ å°„</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        configuration<span class=\"token punctuation\">.</span><span class=\"token function\">setMapUnderscoreToCamelCase</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> configuration<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MysqlDataSource\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@Primary</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token annotation punctuation\">@ConfigurationProperties</span><span class=\"token punctuation\">(</span>prefix <span class=\"token operator\">=</span> <span class=\"token string\">\"spring.datasource.mysql\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// è®¾ç½®é…ç½®</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DataSource</span> <span class=\"token function\">mysqlDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">DataSourceBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MysqlSessionFactory\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token annotation punctuation\">@Primary</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SqlSessionFactory</span> <span class=\"token function\">mysqlSessionFactory</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MysqlDataSource\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">SqlSessionFactoryBean</span> bean <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token function\">configurationMysql</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setTypeAliasesPackage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.pig4cloud.pig.tagchbi.dao.mysql\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        bean<span class=\"token punctuation\">.</span><span class=\"token function\">setMapperLocations</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PathMatchingResourcePatternResolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResources</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MysqlConfig</span><span class=\"token punctuation\">.</span>MAPPER_LOCATION<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">return</span> bean<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MysqlTransactionManager\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token annotation punctuation\">@Primary</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DataSourceTransactionManager</span> <span class=\"token function\">mysqlTransactionManager</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MysqlDataSource\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSourceTransactionManager</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MysqlSessionTemplate\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token annotation punctuation\">@Primary</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SqlSessionTemplate</span> <span class=\"token function\">mysqlSqlSessionTemplate</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MysqlSessionFactory\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">SqlSessionFactory</span> sqlSessionFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionTemplate</span><span class=\"token punctuation\">(</span>sqlSessionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>     * @desc: æ•°æ®æº 1 çš„äº‹åŠ¡ç®¡ç†</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>     * @param: [dataSource]</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>     * @return: org.springframework.jdbc.datasource.DataSourceTransactionManager</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>     **/</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"dataSourceTransactionManagerMysql\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token annotation punctuation\">@Primary</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DataSourceTransactionManager</span> <span class=\"token function\">dataSourceTransactionManagerMysql</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MysqlDataSource\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSourceTransactionManager</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é¡¹ç›®è·¯å¾„å¦‚å›¾æ‰€ç¤º<br />\n<img data-src=\"https://s1.ax1x.com/2022/04/14/LlbXqK.png\" alt=\"LlbXqK.png\" title=\"é¡¹ç›®ç»“æ„\" height=\"200px\" /></p>\n<h1 id=\"ä½¿ç”¨\"><a class=\"anchor\" href=\"#ä½¿ç”¨\">#</a> ä½¿ç”¨</h1>\n<p>åœ¨éœ€è¦ä½¿ç”¨çš„ä½ç½®ï¼Œç›´æ¥ Autowired ä½ å†™çš„ DAO æ¥å£ï¼Œç„¶ååœ¨ç›¸åº”çš„ xml æ–‡ä»¶ä¸­å†™ sql è¯­å¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>\n<h1 id=\"å°tips\"><a class=\"anchor\" href=\"#å°tips\">#</a> å° Tips</h1>\n<ol>\n<li>å› ä¸ºæˆ‘åœ¨é…ç½®å¤šæ•°æ®æºå‰å·²ç»ç”¨ Mybatis æ“ä½œäº† mysql æ•°æ®åº“ï¼Œåœ¨é…ç½®äº†å¤šæ•°æ®æºä¹‹åå‘ç°è¡¨å’Œå®ä½“ä¹‹é—´çš„æ˜ å°„å‡ºç°äº†é—®é¢˜ï¼Œåˆ¤æ–­æ˜¯é©¼å³°å‘½åå‡ºç°äº†é—®é¢˜ï¼Œè¿™æ—¶å€™æˆ‘åœ¨ yml é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ <code>type-aliases-package: com.pig4cloud.pig.tagchbi.dao\t#ä½¿ç”¨é©¼å³°æ³¨è§£æ˜ å°„</code> æ˜¯æ— æ•ˆçš„ã€‚è¿™æ˜¯å› ä¸ºä½ é¡¹ç›®ä¸­æœ‰å¤šä¸ªæ•°æ®æºï¼Œè€Œ mybatis ä¸çŸ¥é“ä½ è¿™ä¸ªé…ç½®è¦ç»™å“ªä¸ªæ•°æ®æºç”¨ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨æ¯ä¸ªæ•°æ®æºçš„é…ç½®æ–‡ä»¶ä¸­å•ç‹¬åŠ äº†ä¸€è¡Œä»£ç  <code>configuration.setMapUnderscoreToCamelCase(true);</code>  æ¥ä¿è¯é©¼å³°å‘½åå¼€å¯</li>\n<li>è™½ç„¶è€ƒè™‘åˆ° Druid çš„ç›‘æ§ï¼Œä½†æ˜¯ç°åœ¨é¡¹ç›®ä¸­æš‚æ—¶æ²¡æœ‰å¼€å¯ï¼Œå¦‚æœè¦å¼€å¯ï¼Œå¯ä»¥åœ¨ yml é…ç½®æ–‡ä»¶ä¸­å†™å…¥</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">druid</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">min-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token comment\"># æ± ä¸­ç»´æŠ¤çš„æœ€å°ç©ºé—²è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º 0 ä¸ªã€‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">max-active</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span> <span class=\"token comment\"># æ± ä¸­æœ€å¤§è¿æ¥æ•°ï¼ŒåŒ…æ‹¬é—²ç½®å’Œä½¿ç”¨ä¸­çš„è¿æ¥ï¼Œé»˜è®¤ä¸º 8 ä¸ªã€‚</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">filter</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">stat</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># é…ç½® StatFilter ï¼Œå¯¹åº”æ–‡æ¡£ https://github.com/alibaba/druid/wiki/% E9%85%8D% E7% BD% AE_StatFilter</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token key atrule\">log-slow-sql</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># å¼€å¯æ…¢æŸ¥è¯¢è®°å½•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">slow-sql-millis</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span> <span class=\"token comment\"># æ…¢ SQL çš„æ ‡å‡†ï¼Œå•ä½ï¼šæ¯«ç§’</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">stat-view-servlet</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># é…ç½® StatViewServlet ï¼Œå¯¹åº”æ–‡æ¡£ https://github.com/alibaba/druid/wiki/% E9%85%8D% E7% BD% AE_StatViewServlet% E9%85%8D% E7% BD% AE</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># æ˜¯å¦å¼€å¯ StatViewServlet</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">login-username</span><span class=\"token punctuation\">:</span> sprenedayf <span class=\"token comment\"># è´¦å·</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">login-password</span><span class=\"token punctuation\">:</span> theonly <span class=\"token comment\"># å¯†ç </span></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥é€šè¿‡ <code>localhost:8080/druid</code>  æ¥è®¿é—®åˆ°ç›‘æ§é¡µé¢</p>\n",
            "tags": [
                "Java",
                "æ¡†æ¶",
                "Spring Boot",
                "æ¡†æ¶"
            ]
        },
        {
            "id": "https://sprenedayf.com/2022/04/10/computer-science/linux%E5%AD%A6%E4%B9%A01/",
            "url": "https://sprenedayf.com/2022/04/10/computer-science/linux%E5%AD%A6%E4%B9%A01/",
            "title": "linuxå­¦ä¹ 1",
            "date_published": "2022-04-10T09:55:31.000Z",
            "content_html": "<h1 id=\"linuxå­¦ä¹ \"><a class=\"anchor\" href=\"#linuxå­¦ä¹ \">#</a> linux å­¦ä¹ </h1>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZG9uZ3llOTUvcC8xMjQzNDQ0OC5odG1s\">Linux å®æˆ˜ 100 è®²</span></p>\n</blockquote>\n<h2 id=\"æ–‡ä»¶åŸºæœ¬å±æ€§\"><a class=\"anchor\" href=\"#æ–‡ä»¶åŸºæœ¬å±æ€§\">#</a> æ–‡ä»¶åŸºæœ¬å±æ€§</h2>\n<p>åœ¨ Linux ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ç­‰ã€‚</p>\n<ul>\n<li>å½“ä¸º <strong>d</strong> åˆ™æ˜¯ç›®å½•</li>\n<li>å½“ä¸º <strong>-</strong> åˆ™æ˜¯æ–‡ä»¶ï¼›</li>\n<li>è‹¥æ˜¯ <strong>l</strong> åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£ (link file)ï¼›</li>\n<li>è‹¥æ˜¯ <strong>b</strong> åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡ (å¯éšæœºå­˜å–è£…ç½®)ï¼›</li>\n<li>è‹¥æ˜¯ <strong>c</strong> åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡ (ä¸€æ¬¡æ€§è¯»å–è£…ç½®)ã€‚</li>\n</ul>\n<p><img data-src=\"https://s1.ax1x.com/2022/04/10/LA4UhR.png\" alt=\"LA4UhR.png\" /></p>\n<p>æ–‡ä»¶çš„æƒé™å­—ç¬¦ä¸ºï¼š <strong>-rwxrwxrwx</strong> ï¼Œ è¿™ä¹ä¸ªæƒé™æ˜¯ä¸‰ä¸ªä¸‰ä¸ªä¸€ç»„çš„ï¼å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„æƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>r:4</li>\n<li>w:2</li>\n<li>x:1</li>\n</ul>\n<p>æ¯ç§èº«ä»½ (owner/group/others) å„è‡ªçš„ä¸‰ä¸ªæƒé™ (r/w/x) åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¾‹å¦‚å½“æƒé™ä¸ºï¼š <strong>-rwxrwx---</strong> åˆ†æ•°åˆ™æ˜¯ï¼š</p>\n<ul>\n<li>owner = rwx = 4+2+1 = 7</li>\n<li>group = rwx = 4+2+1 = 7</li>\n<li>others= --- = 0+0+0 = 0</li>\n</ul>\n<h2 id=\"å¤„ç†ç›®å½•æœ‰å…³å‘½ä»¤\"><a class=\"anchor\" href=\"#å¤„ç†ç›®å½•æœ‰å…³å‘½ä»¤\">#</a> å¤„ç†ç›®å½•æœ‰å…³å‘½ä»¤</h2>\n<ul>\n<li>lsï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlist filesï¼‰: åˆ—å‡ºç›®å½•åŠæ–‡ä»¶å</li>\n<li>cdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šchange directoryï¼‰ï¼šåˆ‡æ¢ç›®å½•</li>\n<li>pwdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šprint work directoryï¼‰ï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•</li>\n<li>mkdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmake directoryï¼‰ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</li>\n<li>rmdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremove directoryï¼‰ï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•</li>\n<li>cpï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šcopy fileï¼‰: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</li>\n<li>rmï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremoveï¼‰: åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</li>\n<li>mvï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmove fileï¼‰: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°</li>\n</ul>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># mkdir test1/test2/test3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mkdir: cannot create directory â€˜test1/test2/test3â€™: No such <span class=\"token function\">file</span> or directory</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># mkdir mkdir -p test1/test2/test3</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># tree</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>â”œâ”€â”€ <span class=\"token function\">mkdir</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>â””â”€â”€ test1</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    â””â”€â”€ test2</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        â””â”€â”€ test3</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token number\">4</span> directories, <span class=\"token number\">0</span> files</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># mkdir -m 711 testm</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># ll</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>total <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>drwxr-xr-x <span class=\"token number\">5</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">17</span> <span class=\"token number\">14</span>:15 ./</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>drwx------ <span class=\"token number\">6</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">17</span> <span class=\"token number\">14</span>:13 <span class=\"token punctuation\">..</span>/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>drwxr-xr-x <span class=\"token number\">2</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">17</span> <span class=\"token number\">14</span>:14 mkdir/</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>drwxr-xr-x <span class=\"token number\">3</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">17</span> <span class=\"token number\">14</span>:14 test1/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>drwx--x--x <span class=\"token number\">2</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">17</span> <span class=\"token number\">14</span>:15 testm/</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># rmdir: åˆ é™¤ç©ºçš„ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># tree</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>â”œâ”€â”€ test1</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>â”‚   â””â”€â”€ test2</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>â”‚       â””â”€â”€ test3</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>â””â”€â”€ testm</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token number\">4</span> directories, <span class=\"token number\">0</span> files</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># rmdir testm</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># tree</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>â””â”€â”€ test1</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    â””â”€â”€ test2</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        â””â”€â”€ test3</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token number\">3</span> directories, <span class=\"token number\">0</span> files</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>root@difend:~/test<span class=\"token comment\"># rmdir test1</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>rmdir: failed to remove <span class=\"token string\">'test1'</span><span class=\"token builtin class-name\">:</span> Directory not empty</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># cp [-adfilprsu] æ¥æºæ¡£ (source) ç›®æ ‡æ¡£ (destination)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>é€‰é¡¹ä¸å‚æ•°ï¼š</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>-aï¼šç›¸å½“æ–¼ -pdr çš„æ„æ€ï¼Œè‡³æ–¼ pdr è¯·å‚è€ƒä¸‹åˆ—è¯´æ˜ï¼›<span class=\"token punctuation\">(</span>å¸¸ç”¨<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>-dï¼šè‹¥æ¥æºæ¡£ä¸ºè¿ç»“æ¡£çš„å±æ€§<span class=\"token punctuation\">(</span>link <span class=\"token function\">file</span><span class=\"token punctuation\">)</span>ï¼Œåˆ™å¤åˆ¶è¿ç»“æ¡£å±æ€§è€Œéæ–‡ä»¶æœ¬èº«ï¼›</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>-fï¼šä¸ºå¼ºåˆ¶<span class=\"token punctuation\">(</span>force<span class=\"token punctuation\">)</span>çš„æ„æ€ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ä¸”æ— æ³•å¼€å¯ï¼Œåˆ™ç§»é™¤åå†å°è¯•ä¸€æ¬¡ï¼›</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>-iï¼šè‹¥ç›®æ ‡æ¡£<span class=\"token punctuation\">(</span>destination<span class=\"token punctuation\">)</span>å·²ç»å­˜åœ¨æ—¶ï¼Œåœ¨è¦†ç›–æ—¶ä¼šå…ˆè¯¢é—®åŠ¨ä½œçš„è¿›è¡Œ<span class=\"token punctuation\">(</span>å¸¸ç”¨<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>-lï¼šè¿›è¡Œç¡¬å¼è¿ç»“<span class=\"token punctuation\">(</span>hard <span class=\"token function\">link</span><span class=\"token punctuation\">)</span>çš„è¿ç»“æ¡£åˆ›å»ºï¼Œè€Œéå¤åˆ¶æ–‡ä»¶æœ¬èº«ï¼›</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>-pï¼šè¿åŒæ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶è¿‡å»ï¼Œè€Œéä½¿ç”¨é»˜è®¤å±æ€§<span class=\"token punctuation\">(</span>å¤‡ä»½å¸¸ç”¨<span class=\"token punctuation\">)</span>ï¼›</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>-rï¼šé€’å½’æŒç»­å¤åˆ¶ï¼Œç”¨æ–¼ç›®å½•çš„å¤åˆ¶è¡Œä¸ºï¼›<span class=\"token punctuation\">(</span>å¸¸ç”¨<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>-sï¼šå¤åˆ¶æˆä¸ºç¬¦å·è¿ç»“æ¡£ <span class=\"token punctuation\">(</span>symbolic <span class=\"token function\">link</span><span class=\"token punctuation\">)</span>ï¼Œäº¦å³ã€æ·å¾„ã€æ–‡ä»¶ï¼›</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>-uï¼šè‹¥ destination æ¯” <span class=\"token builtin class-name\">source</span> æ—§æ‰å‡çº§ destination ï¼</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># rm [-fir] æ–‡ä»¶æˆ–ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> é€‰é¡¹ä¸å‚æ•°ï¼š</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>-f ï¼šå°±æ˜¯ force çš„æ„æ€ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼›</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>-i ï¼šäº’åŠ¨æ¨¡å¼ï¼Œåœ¨åˆ é™¤å‰ä¼šè¯¢é—®ä½¿ç”¨è€…æ˜¯å¦åŠ¨ä½œ</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>-r ï¼šé€’å½’åˆ é™¤</pre></td></tr></table></figure><h2 id=\"linuxæ–‡ä»¶å†…å®¹æŸ¥çœ‹\"><a class=\"anchor\" href=\"#linuxæ–‡ä»¶å†…å®¹æŸ¥çœ‹\">#</a> Linux æ–‡ä»¶å†…å®¹æŸ¥çœ‹</h2>\n<p>Linux ç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼š</p>\n<ul>\n<li>cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li>\n<li>tac ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼</li>\n<li>nl  æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼</li>\n<li>more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li>\n<li>less ä¸ more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼</li>\n<li>head åªçœ‹å¤´å‡ è¡Œ</li>\n<li>tail åªçœ‹å°¾å·´å‡ è¡Œ</li>\n</ul>\n<h2 id=\"ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†\"><a class=\"anchor\" href=\"#ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†\">#</a> ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†</h2>\n<h3 id=\"æ·»åŠ æ–°ç”¨æˆ·\"><a class=\"anchor\" href=\"#æ·»åŠ æ–°ç”¨æˆ·\">#</a> æ·»åŠ æ–°ç”¨æˆ·</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">useradd</span> é€‰é¡¹ ç”¨æˆ·å</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># useradd â€“d  /home/sam -m sam</span></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p>\n<ul>\n<li>\n<p>é€‰é¡¹:</p>\n<ul>\n<li>-c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚</li>\n<li>-d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨ - m é€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚</li>\n<li>-g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</li>\n<li>-G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚</li>\n<li>-s Shell æ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½• Shellã€‚</li>\n<li>-u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰ - o é€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚</li>\n</ul>\n</li>\n<li>\n<p>ç”¨æˆ·å:</p>\n<p>æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚</p>\n</li>\n</ul>\n<h3 id=\"åˆ é™¤è´¦å·\"><a class=\"anchor\" href=\"#åˆ é™¤è´¦å·\">#</a> åˆ é™¤è´¦å·</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">userdel</span> é€‰é¡¹ ç”¨æˆ·å</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># userdel -r sam</span></pre></td></tr></table></figure><h3 id=\"ä¿®æ”¹è´¦å·\"><a class=\"anchor\" href=\"#ä¿®æ”¹è´¦å·\">#</a> ä¿®æ”¹è´¦å·</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">usermod</span> é€‰é¡¹ ç”¨æˆ·å</pre></td></tr></table></figure><h3 id=\"ç”¨æˆ·å£ä»¤\"><a class=\"anchor\" href=\"#ç”¨æˆ·å£ä»¤\">#</a> ç”¨æˆ·å£ä»¤</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">passwd</span> é€‰é¡¹ ç”¨æˆ·å</pre></td></tr></table></figure><p>ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å£ä»¤</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">passwd</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Old password:****** </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>New password:******* </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Re-enter new password:*******</pre></td></tr></table></figure><p>è¶…çº§ç”¨æˆ·ä¿®æ”¹æŸä¸ªç”¨æˆ·çš„å£ä»¤</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># passwd sam </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>New password:******* </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Re-enter new password:*******</pre></td></tr></table></figure><h2 id=\"å¸¸ç”¨å‘½ä»¤\"><a class=\"anchor\" href=\"#å¸¸ç”¨å‘½ä»¤\">#</a> å¸¸ç”¨å‘½ä»¤</h2>\n<h3 id=\"ç»™ç”¨æˆ·åˆ†é…ä½¿ç”¨æƒé™\"><a class=\"anchor\" href=\"#ç»™ç”¨æˆ·åˆ†é…ä½¿ç”¨æƒé™\">#</a> ç»™ç”¨æˆ·åˆ†é…ä½¿ç”¨æƒé™</h3>\n<p>1. æŸ¥çœ‹æŸåº”ç”¨çš„ç”¨æˆ·ç»„</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">cat</span> /etc/group <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> åº”ç”¨åç§°</pre></td></tr></table></figure><p>2. å°†ç”¨æˆ·æ·»åŠ åˆ°å¯¹åº”çš„ç”¨æˆ·ç»„</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>addgroup ç”¨æˆ·å åº”ç”¨ç»„å</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>eg:addgroup wxm <span class=\"token function\">docker</span></pre></td></tr></table></figure><p>3. æ›´æ–°ç”¨æˆ·ç»„</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>newgrp åº”ç”¨ç»„å</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>eg: newgrp <span class=\"token function\">docker</span></pre></td></tr></table></figure>",
            "tags": [
                "è®¡ç®—æœºåŸºç¡€",
                "Linux",
                "Linux"
            ]
        },
        {
            "id": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/special/",
            "url": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/special/",
            "title": "Step.4 ä¸»é¢˜ç‰¹æ®ŠåŠŸèƒ½",
            "date_published": "2020-08-13T13:45:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/2020/08/13/theme-shoka-doc/\">ğŸš€å¿«é€Ÿå¼€å§‹</a> - <a href=\"/2020/08/13/theme-shoka-doc/dependents/\">ğŸ’Œä¾èµ–æ’ä»¶</a> - <a href=\"/2020/08/13/theme-shoka-doc/config/\">ğŸ“ŒåŸºæœ¬é…ç½®</a> - <a href=\"/2020/08/13/theme-shoka-doc/display/\">ğŸŒˆç•Œé¢æ˜¾ç¤º</a> - <a href=\"/2020/08/13/theme-shoka-doc/special/\"><strong>ğŸ¦„ç‰¹æ®ŠåŠŸèƒ½</strong></a></p>\n</div>\n<div class=\"note info\">\n<p>ä»¥ä¸‹ä»‹ç»å¯ä»¥ä½¿ç”¨çš„ markdown æˆ–è€…æ ‡ç­¾ä»£ç ã€‚<br />\nåŠŸèƒ½å¤§éƒ¨åˆ†åŸºäº <code>hexo-renderer-multi-markdown-it</code>  æ¸²æŸ“å™¨ï¼Œå°¤å…¶æ˜¯ä»£ç å—çš„æ˜¾ç¤ºï¼Œä¸é»˜è®¤æ¸²æŸ“å™¨ä¸å…¼å®¹ã€‚</p>\n</div>\n<h1 id=\"links-é“¾æ¥å—\"><a class=\"anchor\" href=\"#links-é“¾æ¥å—\">#</a>  <code>links</code>  é“¾æ¥å—</h1>\n<p>æœ¬åŠŸèƒ½å‚è€ƒ NexTï¼ŒåŸºäº Hexo Tag åŠŸèƒ½ï¼Œç”¨æ¥å»ºç«‹å‹é“¾æˆ–å…¶ä»–ç½‘å€é“¾æ¥åŠŸèƒ½ã€‚</p>\n<p>æ–‡ç« ä¸­çš„ä½¿ç”¨æ ¼å¼ï¼š</p>\n<ol>\n<li>ä½¿ç”¨ <code>links</code>  æ ‡ç­¾å—ï¼ŒåŒ…å›´ <code>yml</code>  è¯­æ³•ä¹¦å†™çš„å†…å®¹ï¼Œå­—æ®µåŒ…æ‹¬</li>\n</ol>\n<table>\n<tbody>\n<tr>\n<td><code>site</code></td>\n<td>ç«™ç‚¹åç§°</td>\n<td>å¿…å¡«</td>\n</tr>\n<tr>\n<td><code>owner</code></td>\n<td>ç®¡ç†å‘˜åå­—</td>\n<td>å¯é€‰ï¼Œé»˜è®¤ä¸º <code>site</code>  çš„å€¼</td>\n</tr>\n<tr>\n<td><code>url</code></td>\n<td>ç«™ç‚¹é“¾æ¥</td>\n<td>å¿…å¡«</td>\n</tr>\n<tr>\n<td><code>desc</code></td>\n<td>ç«™ç‚¹æè¿°</td>\n<td>å¯é€‰ï¼Œé»˜è®¤ä¸º <code>url</code>  çš„å€¼</td>\n</tr>\n<tr>\n<td><code>image</code></td>\n<td>ç«™ç‚¹å›¾ç‰‡</td>\n<td>å¯é€‰ï¼Œé»˜è®¤ä¸º <code>images/404.png</code></td>\n</tr>\n<tr>\n<td><code>color</code></td>\n<td>æ–¹å—é¢œè‰²</td>\n<td>å¯é€‰ï¼Œé»˜è®¤ä¸º <code>#666</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- site: #ç«™ç‚¹åç§°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  owner: #ç®¡ç†å‘˜åå­—</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  url: #ç«™ç‚¹ç½‘å€</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  desc: #ç®€çŸ­æè¿°</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  image: #ä¸€å¼ å›¾ç‰‡</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  color: #é¢œè‰²ä»£ç </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr></table></figure><p>ä¸¾ä¸ªæ —å­ï¼š</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- site: å„ªèŒåˆè¯</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  owner: éœœæœˆç‰ç’ƒ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  desc: ç‰ç’ƒçš„åŒ»å­¦ &amp; ç¼–ç¨‹ç¬”è®°</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  image: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;amehime&#x2F;shoka@latest&#x2F;images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>- site: å„ªèŒåˆè¯</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  owner: éœœæœˆç‰ç’ƒ</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  image: images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>- site: å„ªèŒåˆè¯</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  desc: ç‰ç’ƒçš„åŒ»å­¦ &amp; ç¼–ç¨‹ç¬”è®°</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  color: &quot;#9d5b8b&quot;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr></table></figure><p><div class=\"links\"><div class=\"item\" title=\"éœœæœˆç‰ç’ƒ\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"https://cdn.jsdelivr.net/gh/amehime/shoka@latest/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å„ªèŒåˆè¯</span>\n          <p class=\"desc\">ç‰ç’ƒçš„åŒ»å­¦ & ç¼–ç¨‹ç¬”è®°</p>\n          </div></div><div class=\"item\" title=\"éœœæœˆç‰ç’ƒ\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å„ªèŒåˆè¯</span>\n          <p class=\"desc\">https://shoka.lostyu.me</p>\n          </div></div><div class=\"item\" title=\"å„ªèŒåˆè¯\" style=\"--block-color:#9d5b8b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"/images/404.png\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å„ªèŒåˆè¯</span>\n          <p class=\"desc\">ç‰ç’ƒçš„åŒ»å­¦ & ç¼–ç¨‹ç¬”è®°</p>\n          </div></div></div></p>\n<ol start=\"2\">\n<li>ä»¥ä¸Šæ ‡ç­¾å—é‡Œçš„å†…å®¹ï¼Œè¿˜å¯ä»¥ä¿å­˜åˆ°ä¸€ä¸ª <code>yml</code>  æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ <code>linksfile</code>  æ ‡ç­¾ã€‚<br />\nå…¶ä¸­ï¼Œ <code>path</code>  ä½äº <code>&lt;root&gt;/source</code>  ç›®å½•ä¸‹ã€‚</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% linksfile [path] %&#125;</pre></td></tr></table></figure><p>ä¸¾ä¸ªæ —å­ï¼š</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% linksfile friends&#x2F;_data.yml %&#125;</pre></td></tr></table></figure><h1 id=\"codeä»£ç å—\"><a class=\"anchor\" href=\"#codeä»£ç å—\">#</a>  <code>code</code>  ä»£ç å—</h1>\n<p>ä½¿ç”¨ <code>markdown-it-prism</code>  è¿›è¡Œä»£ç é«˜äº®ï¼Œæ”¯æŒæ˜¾ç¤ºè¡Œå·ã€è¡Œé«˜äº® <code>mark</code> ã€å‘½ä»¤è¡Œæç¤ºç¬¦ <code>command</code> ã€ä»£ç å—æ ‡é¢˜ã€‚</p>\n<p>åŸºæœ¬æ ¼å¼ï¼š <code>[language] [title] [url] [link text] [mark] [command]</code></p>\n<table>\n<thead>\n<tr>\n<th>é€‰é¡¹</th>\n<th>æè¿°</th>\n<th>é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>language</p>\n</td>\n<td>\n<ul>\n<li>æ”¯æŒçš„è¯­è¨€<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcmlzbWpzLmNvbS8jc3VwcG9ydGVkLWxhbmd1YWdlcw==\">æˆ³æ­¤</span></li>\n<li>å¦‚æœä¸éœ€è¦ä»£ç é«˜äº®ï¼Œä½†å¸Œæœ›æ˜¾ç¤ºä»£ç å—æ ·å¼ï¼Œåˆ™è®¾ä¸º <code>raw</code></li>\n<li>ç•™ç©ºæˆ–è®¾ä¸º <code>info</code> ï¼Œå°†ä¸æ˜¾ç¤ºä»£ç é«˜äº®å’Œä»£ç å—æ ·å¼</li>\n</ul>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n<tr>\n<td>title</td>\n<td>ä»£ç å—çš„æ ‡é¢˜æ–‡å­—</td>\n<td>null</td>\n</tr>\n<tr>\n<td>url</td>\n<td>ä»£ç å—æ ‡é¢˜å³ä¾§æ˜¾ç¤ºçš„é“¾æ¥</td>\n<td>null</td>\n</tr>\n<tr>\n<td>link text</td>\n<td>ä¸Šè¿°é“¾æ¥æ˜¾ç¤ºçš„æ ‡é¢˜</td>\n<td>link</td>\n</tr>\n<tr>\n<td>\n<p>mark</p>\n</td>\n<td>\n<p>è¡Œé«˜äº®æ˜¾ç¤ºï¼Œæ ¼å¼ä¸º <code>mark:è¡Œå·,è¡Œå·å¼€å§‹-è¡Œå·ç»“æŸ,å…¶ä»–è¡Œå·</code> ã€‚<br />\nä¾‹å¦‚ <code>mark:1,4-7,10</code> ï¼Œå°†é«˜äº®æ˜¾ç¤ºç¬¬ 1ã€4ã€5ã€6ã€7ã€10 è¡Œ</p>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>command</p>\n</td>\n<td>\n<p>å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œæ ¼å¼ä¸º <code>command:(&quot;æç¤ºå†…å®¹&quot;:è¡Œå·,è¡Œå·||&quot;æç¤ºå†…å®¹&quot;:è¡Œå·å¼€å§‹-è¡Œå·ç»“æŸ)</code> <br />\n ä¾‹å¦‚ <code>command:(&quot;[root@localhost] $&quot;:1,9-10||&quot;[admin@remotehost] #&quot;:4-6)</code></p>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#96;&#96;&#96;java è¡Œé«˜äº® https:&#x2F;&#x2F;shoka.lostyu.me å‚è€ƒé“¾æ¥ mark:1,6-7</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>import java.util.Scanner;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>...</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Scanner in &#x3D; new Scanner (System.in);</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&#x2F;&#x2F; è¾“å…¥ Scan ä¹‹åï¼ŒæŒ‰ä¸‹é”®ç›˜ Alt + â€œ&#x2F;â€ é”®ï¼ŒEclipse ä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>System.out.println (in.nextLine ());</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>System.out.println (&quot;Hello&quot; + &quot;world.&quot;);</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>&#96;&#96;&#96;bash å‘½ä»¤è¡Œæç¤ºç¬¦ command:(&quot;[root@localhost] $&quot;:1,9-10||&quot;[admin@remotehost] #&quot;:4-6)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>pwd</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#x2F;usr&#x2F;home&#x2F;chris&#x2F;bin</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>ls -la</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>total 2</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>drwxr-xr-x   2 chris  chris     11 Jan 10 16:48 .</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>drwxr--r-x  45 chris  chris     92 Feb 14 11:10 ..</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>-rwxr-xr-x   1 chris  chris    444 Aug 25  2013 backup</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>-rwxr-xr-x   1 chris  chris    642 Jan 17 14:42 deploy</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>git add -A</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>git commit -m &quot;update&quot;</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>git push</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>è¡Œé«˜äº®</span><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å‚è€ƒé“¾æ¥</span></figcaption><table><tr class=\"marked\"><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Scanner</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Scanner</span> in <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Scanner</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// è¾“å…¥ Scan ä¹‹åï¼ŒæŒ‰ä¸‹é”®ç›˜ Alt + â€œ/â€ é”®ï¼ŒEclipse ä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">.</span><span class=\"token function\">nextLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr class=\"marked\"><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" world.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token builtin class-name\">pwd</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>/usr/home/chris/bin</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token function\">ls</span> -la</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>total <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>drwxr-xr-x   <span class=\"token number\">2</span> chris  chris     <span class=\"token number\">11</span> Jan <span class=\"token number\">10</span> <span class=\"token number\">16</span>:48 <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>drwxr--r-x  <span class=\"token number\">45</span> chris  chris     <span class=\"token number\">92</span> Feb <span class=\"token number\">14</span> <span class=\"token number\">11</span>:10 <span class=\"token punctuation\">..</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>-rwxr-xr-x   <span class=\"token number\">1</span> chris  chris    <span class=\"token number\">444</span> Aug <span class=\"token number\">25</span>  <span class=\"token number\">2013</span> backup</pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre>-rwxr-xr-x   <span class=\"token number\">1</span> chris  chris    <span class=\"token number\">642</span> Jan <span class=\"token number\">17</span> <span class=\"token number\">14</span>:42 deploy</pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token function\">git</span> <span class=\"token function\">add</span> -A</pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"update\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"\"></td><td><pre><span class=\"token function\">git</span> push</pre></td></tr></table></figure><h1 id=\"quiz-ç»ƒä¹ é¢˜ä¸ç­”æ¡ˆ\"><a class=\"anchor\" href=\"#quiz-ç»ƒä¹ é¢˜ä¸ç­”æ¡ˆ\">#</a>  <code>quiz</code>  ç»ƒä¹ é¢˜ä¸ç­”æ¡ˆ</h1>\n<p>è¿™ä¸ªåŠŸèƒ½æ˜¯ç”¨æ¥æ˜¾ç¤ºç»ƒä¹ é¢˜çš„ã€‚<br />\néœ€è¦åœ¨ Front Matter ä¸­æ·»åŠ  <code>quiz: true</code> ï¼Œä»¥æ­£ç¡®æ˜¾ç¤ºé¢˜å‹æ ‡ç­¾ã€‚</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"><span>å‡ ä¸ªä¾‹å­</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: ç»ƒä¹ é¢˜ä¸ç­”æ¡ˆ</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>quiz: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>1. ç¼–è¯‘æ—¶å¤šæ€ä¸»è¦æŒ‡è¿ç®—ç¬¦é‡è½½ä¸å‡½æ•°é‡è½½ï¼Œè€Œè¿è¡Œæ—¶å¤šæ€ä¸»è¦æŒ‡è™šå‡½æ•°ã€‚ &#123;.quiz .true&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>2. æœ‰åŸºç±» &#96;SHAPE&#96;ï¼Œæ´¾ç”Ÿç±» &#96;CIRCLE&#96;ï¼Œå£°æ˜å¦‚ä¸‹å˜é‡ï¼š  &#123;.quiz .multi&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    &#96;&#96;&#96;cpp</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    SHAPE shape1,*p1;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    CIRCLE circle1,*q1;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    &#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    ä¸‹åˆ—å“ªäº›é¡¹æ˜¯ â€œæ´¾ç”Ÿç±»å¯¹è±¡æ›¿æ¢åŸºç±»å¯¹è±¡â€ã€‚</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    - &#96;p1&#x3D;&amp;circle1;&#96; &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    - &#96;q1&#x3D;&amp;shape1;&#96;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    - &#96;shape1&#x3D;circle1;&#96; &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    - &#96;circle1&#x3D;shape1;&#96;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>&#123;.options&#125;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    &gt; - :heavy_check_mark: ä»¤åŸºç±»å¯¹è±¡çš„æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    &gt; - :x: æ´¾ç”Ÿç±»æŒ‡é’ˆæŒ‡å‘åŸºç±»çš„å¼•ç”¨</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    &gt; - :heavy_check_mark: æ´¾ç”Ÿç±»å¯¹è±¡ç»™åŸºç±»å¯¹è±¡èµ‹å€¼</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    &gt; - :x: åŸºç±»å¯¹è±¡ç»™æ´¾ç”Ÿç±»å¯¹è±¡èµ‹å€¼</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    &gt; &#123;.options&#125;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>3. ä¸‹åˆ—å™è¿°æ­£ç¡®çš„æ˜¯ []&#123;.gap&#125; ã€‚ &#123;.quiz&#125;</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    - è™šå‡½æ•°åªèƒ½å®šä¹‰æˆæ— å‚å‡½æ•°</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    - è™šå‡½æ•°ä¸èƒ½æœ‰è¿”å›å€¼</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    - èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    - Aã€Bã€C éƒ½ä¸å¯¹ &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>&#123;.options&#125;</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>10. å¦‚æœå®šä¹‰ &#96;int e&#x3D;8; double f&#x3D;6.4, g&#x3D;8.9;&#96;ï¼Œåˆ™è¡¨è¾¾å¼ &#96;f+int (e&#x2F;3*int (f+g)&#x2F;2)%4&#96; çš„å€¼ä¸º [9.4]&#123;.gap&#125;ã€‚ &#123;.quiz .fill&#125;</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    &gt; æ³¨æ„è¿ç®—é¡ºåºå’Œæ•°æ®ç±»å‹</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    &gt; [8.4]&#123;.mistake&#125;</pre></td></tr></table></figure><p>ç‚¹å‡»é€‰é¡¹å¯ä»¥æ˜¾ç¤ºç­”æ¡ˆï¼Œä»¥åŠç­”æ¡ˆè§£æã€‚</p>\n<ol>\n<li class=\"quiz\">\n<p>ä¸‹åˆ—å™è¿°æ­£ç¡®çš„æ˜¯ <span class=\"gap\"></span> ã€‚</p>\n<ul class=\"options\">\n<li>è™šå‡½æ•°åªèƒ½å®šä¹‰æˆæ— å‚å‡½æ•°</li>\n<li>è™šå‡½æ•°ä¸èƒ½æœ‰è¿”å›å€¼</li>\n<li>èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°</li>\n<li class=\"correct\">Aã€Bã€C éƒ½ä¸å¯¹</li>\n</ul>\n</li>\n<li class=\"quiz multi\">\n<p>æœ‰åŸºç±» <code>SHAPE</code> ï¼Œæ´¾ç”Ÿç±» <code>CIRCLE</code> ï¼Œå£°æ˜å¦‚ä¸‹å˜é‡ï¼š </p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>SHAPE shape1<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>p1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>CIRCLE circle1<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>q1<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä¸‹åˆ—å“ªäº›é¡¹æ˜¯ â€œæ´¾ç”Ÿç±»å¯¹è±¡æ›¿æ¢åŸºç±»å¯¹è±¡â€ã€‚</p>\n<ul class=\"options\">\n<li class=\"correct\"><code>p1=&amp;circle1;</code> </li>\n<li><code>q1=&amp;shape1;</code></li>\n<li class=\"correct\"><code>shape1=circle1;</code> </li>\n<li><code>circle1=shape1;</code></li>\n</ul>\n<blockquote>\n<ul class=\"options\">\n<li>âœ”ï¸ ä»¤åŸºç±»å¯¹è±¡çš„æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</li>\n<li>âŒ æ´¾ç”Ÿç±»æŒ‡é’ˆæŒ‡å‘åŸºç±»çš„å¼•ç”¨</li>\n<li>âœ”ï¸ æ´¾ç”Ÿç±»å¯¹è±¡ç»™åŸºç±»å¯¹è±¡èµ‹å€¼</li>\n<li>âŒ åŸºç±»å¯¹è±¡ç»™æ´¾ç”Ÿç±»å¯¹è±¡èµ‹å€¼</li>\n</ul>\n</blockquote>\n</li>\n<li class=\"quiz true\">\n<p>ç¼–è¯‘æ—¶å¤šæ€ä¸»è¦æŒ‡è¿ç®—ç¬¦é‡è½½ä¸å‡½æ•°é‡è½½ï¼Œè€Œè¿è¡Œæ—¶å¤šæ€ä¸»è¦æŒ‡è™šå‡½æ•°ã€‚</p>\n</li>\n<li class=\"quiz fill\">\n<p>å¦‚æœå®šä¹‰ <code>int e=8; double f=6.4, g=8.9;</code> ï¼Œåˆ™è¡¨è¾¾å¼  <code>f+int(e/3*int(f+g)/2)%4</code>  çš„å€¼ä¸º <span class=\"gap\">9.4</span>ã€‚</p>\n<blockquote>\n<p>æ³¨æ„è¿ç®—é¡ºåºå’Œæ•°æ®ç±»å‹<br />\n<span class=\"mistake\"> 8.4</span></p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"ä½¿ç”¨è¯´æ˜\"><a class=\"anchor\" href=\"#ä½¿ç”¨è¯´æ˜\">#</a> ä½¿ç”¨è¯´æ˜</h2>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-bracketed-spans</code>  å’Œ <code>markdown-it-attrs</code></p>\n<table>\n<thead>\n<tr>\n<th>æ ‡ç­¾</th>\n<th>å«ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&#123;.quiz&#125;</code></td>\n<td>é€‰æ‹©é¢˜</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .multi&#125;</code></td>\n<td>å¤šé€‰é¢˜</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .true&#125;</code></td>\n<td>æ­£ç¡®çš„åˆ¤æ–­é¢˜</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .false&#125;</code></td>\n<td>é”™è¯¯çš„åˆ¤æ–­é¢˜</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .fill&#125;</code></td>\n<td>å¡«ç©ºé¢˜</td>\n</tr>\n<tr>\n<td><code>[]&#123;.gap&#125;</code></td>\n<td>ç©ºç™½ä¸‹åˆ’çº¿</td>\n</tr>\n<tr>\n<td><code>[ç­”æ¡ˆå†…å®¹]&#123;.gap&#125;</code></td>\n<td>ç­”æ¡ˆå†…å®¹å¸¦ä¸‹åˆ’çº¿</td>\n</tr>\n<tr>\n<td><code>&#123;.options&#125;</code></td>\n<td>ABCDE é€‰é¡¹</td>\n</tr>\n<tr>\n<td><code>&#123;.correct&#125;</code></td>\n<td>é€‰æ‹©é¢˜çš„æ­£ç¡®é€‰é¡¹</td>\n</tr>\n<tr>\n<td><code>&gt;</code></td>\n<td>ç­”æ¡ˆè§£æ</td>\n</tr>\n<tr>\n<td><code>[8.4]&#123;.mistake&#125;</code></td>\n<td>é”™é¢˜å¤‡æ³¨</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"emoji-ç»˜æ–‡å­—\"><a class=\"anchor\" href=\"#emoji-ç»˜æ–‡å­—\">#</a>  <code>emoji</code>  ç»˜æ–‡å­—</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-emoji</code> ï¼Œæ‰€æœ‰<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21hcmtkb3duLWl0L21hcmtkb3duLWl0LWVtb2ppL2Jsb2IvbWFzdGVyL2xpYi9kYXRhL2Z1bGwuanNvbg==\">æ ‡ç­¾å‚è€ƒæˆ³æ­¤</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>:kissing_heart:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>:ring:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>:notes:</pre></td></tr></table></figure><p>ğŸ˜˜ ğŸ’ ğŸ¶</p>\n<h1 id=\"effects-æ–‡å­—ç‰¹æ•ˆ\"><a class=\"anchor\" href=\"#effects-æ–‡å­—ç‰¹æ•ˆ\">#</a>  <code>effects</code>  æ–‡å­—ç‰¹æ•ˆ</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-ins</code> ã€  <code>markdown-it-bracketed-spans</code>  å’Œ <code>markdown-it-attrs</code></p>\n<blockquote>\n<p>æœ¬ä¸»é¢˜é£æ ¼é¢œè‰²é€šç”¨æ ·å¼ï¼šdefaultã€primaryã€successã€infoã€warningã€danger</p>\n</blockquote>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>++ ä¸‹åˆ’çº¿ ++</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>++ æ³¢æµªçº¿ ++&#123;.wavy&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>++ ç€é‡ç‚¹ ++&#123;.dot&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>++ ç´«è‰²ä¸‹åˆ’çº¿ ++&#123;.primary&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>++ ç»¿è‰²æ³¢æµªçº¿ ++&#123;.wavy .success&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>++ é»„è‰²ç€é‡ç‚¹ ++&#123;.dot .warning&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>~~ åˆ é™¤çº¿ï½ï½</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>~~ çº¢è‰²åˆ é™¤çº¿ï½ï½&#123;.danger&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#x3D;&#x3D; è§å…‰é«˜äº® &#x3D;&#x3D;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>[èµ¤æ©™é»„ç»¿é’è“ç´«]&#123;.rainbow&#125;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>[çº¢è‰²]&#123;.red&#125;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>[ç²‰è‰²]&#123;.pink&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>[æ©™è‰²]&#123;.orange&#125;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>[é»„è‰²]&#123;.yellow&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>[ç»¿è‰²]&#123;.green&#125;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>[é›é’]&#123;.aqua&#125;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>[è“è‰²]&#123;.blue&#125;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>[ç´«è‰²]&#123;.purple&#125;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>[ç°è‰²]&#123;.grey&#125;</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>å¿«æ·é”® [Ctrl]&#123;.kbd&#125; + [C]&#123;.kbd .red&#125;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>H~2~0</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>29^th^</pre></td></tr></table></figure><div class=\"note warning\">\n<p>è¿™æ®µä»£ç å› ä¸ºè‡ªåŠ¨è¢« pangu.js å¤„ç†äº†ä¸€ä¸‹ï¼ŒåŠ äº†å‡ ä¸ªç©ºæ ¼ï¼Œå¯¼è‡´ç›´æ¥å¤åˆ¶ä»£ç ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚<br />\næ­£ç¡®çš„ä»£ç æ˜¯ <code>++ä¸‹åˆ’çº¿++</code>   <code>~~åˆ é™¤çº¿~~</code>   <code>==è§å…‰é«˜äº®==</code> ï¼Œä¸èƒ½æœ‰ç©ºæ ¼å“¦ã€‚</p>\n</div>\n<p><ins>ä¸‹åˆ’çº¿</ins><br />\n<ins class=\"wavy\">æ³¢æµªçº¿</ins><br />\n<ins class=\"dot\">ç€é‡ç‚¹</ins><br />\n<ins class=\"primary\">ç´«è‰²ä¸‹åˆ’çº¿</ins><br />\n<ins class=\"wavy success\">ç»¿è‰²æ³¢æµªçº¿</ins><br />\n<ins class=\"dot warning\">é»„è‰²ç€é‡ç‚¹</ins><br />\n<s>åˆ é™¤çº¿</s><br />\n<s class=\"danger\">çº¢è‰²åˆ é™¤çº¿</s><br />\n<mark>è§å…‰é«˜äº®</mark><br />\n<span class=\"rainbow\">èµ¤æ©™é»„ç»¿é’è“ç´«</span><br />\n<span class=\"red\">çº¢è‰²</span><br />\n<span class=\"pink\">ç²‰è‰²</span><br />\n<span class=\"orange\">æ©™è‰²</span><br />\n<span class=\"yellow\">é»„è‰²</span><br />\n<span class=\"green\">ç»¿è‰²</span><br />\n<span class=\"aqua\">é›é’</span><br />\n<span class=\"blue\">è“è‰²</span><br />\n<span class=\"purple\">ç´«è‰²</span><br />\n<span class=\"grey\">ç°è‰²</span><br />\nå¿«æ·é”® <span class=\"kbd\">Ctrl</span> + <span class=\"kbd red\">C</span><br />\nH<sub>2</sub>0<br />\n29<sup>th</sup></p>\n<h1 id=\"spoileréšè—æ–‡å­—\"><a class=\"anchor\" href=\"#spoileréšè—æ–‡å­—\">#</a>  <code>spoiler</code>  éšè—æ–‡å­—</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-spoiler</code>  å’Œ <code>markdown-it-attrs</code></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>!! é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•ï¼ï¼ï¼š é¼ æ ‡æ»‘è¿‡æ˜¾ç¤ºå†…å®¹</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>!! æ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šï¼ï¼&#123;.bulr&#125; ï¼š é€‰ä¸­æ–‡å­—æ˜¾ç¤ºå†…å®¹</pre></td></tr></table></figure><p><span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•</span> ï¼š é¼ æ ‡æ»‘è¿‡æ˜¾ç¤ºå†…å®¹<br />\n<span class=\"spoiler bulr\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">æ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Š</span> ï¼š é€‰ä¸­æ–‡å­—æ˜¾ç¤ºå†…å®¹</p>\n<h1 id=\"label-æ ‡ç­¾å—\"><a class=\"anchor\" href=\"#label-æ ‡ç­¾å—\">#</a>  <code>label</code>  æ ‡ç­¾å—</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-bracketed-spans</code>  å’Œ <code>markdown-it-attrs</code> <br />\n æœ‰ä»¥ä¸‹é¢œè‰²å¯é€‰</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>[default]&#123;.label&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>[primary]&#123;.label .primary&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>[info]&#123;.label .info&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>[:heavy_check_mark:success]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>[warning]&#123;.label .warning&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>[:broken_heart:danger]&#123;.label .danger&#125;</pre></td></tr></table></figure><p><span class=\"label\">default</span><br />\n<span class=\"label primary\">primary</span><br />\n<span class=\"label info\">info</span><br />\n<span class=\"label success\">âœ”ï¸success</span><br />\n<span class=\"label warning\">warning</span><br />\n<span class=\"label danger\">ğŸ’”danger</span></p>\n<h1 id=\"note-æé†’å—\"><a class=\"anchor\" href=\"#note-æé†’å—\">#</a>  <code>note</code>  æé†’å—</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-container</code> <br />\n æ ‡ç­¾ä¸ºï¼š</p>\n<table>\n<tbody>\n<tr>\n<td>å¼€å§‹è¡Œ</td>\n<td><code>:::[é£æ ¼é¢œè‰²]</code></td>\n</tr>\n<tr>\n<td>ç»“æŸè¡Œ</td>\n<td><code>:::</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>:::default</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>é»˜è®¤é»˜è®¤</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>:::primary</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>åŸºæœ¬åŸºæœ¬</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>:::info</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>æç¤ºæç¤º</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>:::success</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>æˆåŠŸæˆåŠŸ</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>:::warning</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>è­¦å‘Šè­¦å‘Š</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>:::danger</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>å±é™©å±é™©</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>:::danger no-icon</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>å±é™©å±é™©</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>:::</pre></td></tr></table></figure><div class=\"note default\">\n<p>é»˜è®¤é»˜è®¤</p>\n</div>\n<div class=\"note primary\">\n<p>åŸºæœ¬åŸºæœ¬</p>\n</div>\n<div class=\"note info\">\n<p>æç¤ºæç¤º</p>\n</div>\n<div class=\"note success\">\n<p>æˆåŠŸæˆåŠŸ</p>\n</div>\n<div class=\"note warning\">\n<p>è­¦å‘Šè­¦å‘Š</p>\n</div>\n<div class=\"note danger\">\n<p>å±é™©å±é™©</p>\n</div>\n<div class=\"note danger no-icon\">\n<p>æ²¡æœ‰å›¾æ ‡</p>\n</div>\n<h1 id=\"tabæ ‡ç­¾å¡\"><a class=\"anchor\" href=\"#tabæ ‡ç­¾å¡\">#</a>  <code>tab</code>  æ ‡ç­¾å¡</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-container</code> <br />\n æ ‡ç­¾ä¸ºï¼š</p>\n<table>\n<tbody>\n<tr>\n<td>å¼€å§‹è¡Œ</td>\n<td><code>;;;[åŒä¸€ID] [æ ‡ç­¾åç§°]</code></td>\n</tr>\n<tr>\n<td>ç»“æŸè¡Œ</td>\n<td><code>;;;</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>;;;id1 å¡ç‰‡ 1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>** åŠ ç²— **</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>[success]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>- site: å„ªèŒåˆè¯</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  owner: éœœæœˆç‰ç’ƒ</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  desc: ç‰ç’ƒçš„åŒ»å­¦ &amp; ç¼–ç¨‹ç¬”è®°</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  image: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;amehime&#x2F;shoka@latest&#x2F;images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>;;;id1 å¡ç‰‡ 2</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>:::danger</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>å±é™©å±é™©</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>- ç¬¬ä¸€è¡Œ</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>- ç¬¬äºŒè¡Œ</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>;;;id2 â‘¡å·æ ‡ç­¾å¡ç‰‡ 1</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>;;;id2 â‘¡å·æ ‡ç­¾å¡ç‰‡ 2</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>;;;</pre></td></tr></table></figure><div class=\"tab\" data-id=\"id1\" data-title=\"å¡ç‰‡1\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹<br />\n<strong>åŠ ç²—</strong><br />\n<span class=\"label success\"> success</span></p>\n<p><div class=\"links\"><div class=\"item\" title=\"éœœæœˆç‰ç’ƒ\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"https://cdn.jsdelivr.net/gh/amehime/shoka@latest/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å„ªèŒåˆè¯</span>\n          <p class=\"desc\">ç‰ç’ƒçš„åŒ»å­¦ & ç¼–ç¨‹ç¬”è®°</p>\n          </div></div></div></p>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"å¡ç‰‡2\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</p>\n<div class=\"note danger\">\n<p>å±é™©å±é™©</p>\n</div>\n<ul>\n<li>ç¬¬ä¸€è¡Œ</li>\n<li>ç¬¬äºŒè¡Œ</li>\n</ul>\n</div>\n<div class=\"tab\" data-id=\"id2\" data-title=\"â‘¡å·æ ‡ç­¾å¡ç‰‡1\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹</p>\n</div>\n<div class=\"tab\" data-id=\"id2\" data-title=\"â‘¡å·æ ‡ç­¾å¡ç‰‡2\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</p>\n</div>\n<h1 id=\"collapse-æŠ˜å å—\"><a class=\"anchor\" href=\"#collapse-æŠ˜å å—\">#</a>  <code>collapse</code>  æŠ˜å å—</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-container</code> <br />\n æ ‡ç­¾ä¸ºï¼š</p>\n<table>\n<tbody>\n<tr>\n<td>å¼€å§‹è¡Œ</td>\n<td><code>+++[é£æ ¼é¢œè‰²] [æ ‡é¢˜æ–‡å­—]</code></td>\n</tr>\n<tr>\n<td>ç»“æŸè¡Œ</td>\n<td><code>+++</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>+++ é»˜è®¤é»˜è®¤ è¿™é‡Œæ˜¯ä¸€æ®µæ–‡å­—</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>++ ä¸‹åˆ’çº¿ ++</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>+++primary ç´«è‰²</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>:::info</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>å‚è€ƒä¿¡æ¯</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>- ç¬¬ä¸€è¡Œ</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>- ç¬¬äºŒè¡Œ</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>+++info  è“è‰²</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>;;;id3 å¡ç‰‡ 1</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>;;;id3 å¡ç‰‡ 2</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>+++success ç»¿è‰²</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>- site: å„ªèŒåˆè¯</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>+++warning é»„è‰²</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>!! è­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Šï¼ï¼&#123;.bulr&#125;</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>[label]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>+++danger çº¢è‰²</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>[danger]&#123;.label .danger&#125;</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>+++</pre></td></tr></table></figure><details><summary>é»˜è®¤é»˜è®¤ è¿™é‡Œæ˜¯ä¸€æ®µæ–‡å­—</summary><div>\n<p><ins>ä¸‹åˆ’çº¿</ins></p>\n</div></details>\n<details class=\"primary\"><summary>ç´«è‰²</summary><div>\n<div class=\"note info\">\n<p>å‚è€ƒä¿¡æ¯</p>\n</div>\n<ul>\n<li>ç¬¬ä¸€è¡Œ</li>\n<li>ç¬¬äºŒè¡Œ</li>\n</ul>\n</div></details>\n<details class=\"info\"><summary>è“è‰²</summary><div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"å¡ç‰‡1\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 1 çš„å†…å®¹<br />\n<ins class=\"wavy\">æ³¢æµªçº¿</ins></p>\n</div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"å¡ç‰‡2\">\n<p>è¿™é‡Œæ˜¯å¡ç‰‡ 2 çš„å†…å®¹</p>\n</div>\n</div></details>\n<details class=\"success\"><summary>ç»¿è‰²</summary><div>\n<p><div class=\"links\"><div class=\"item\" title=\"å„ªèŒåˆè¯\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"/images/404.png\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">å„ªèŒåˆè¯</span>\n          <p class=\"desc\">https://shoka.lostyu.me</p>\n          </div></div></div></p>\n</div></details>\n<details class=\"warning\"><summary>é»„è‰²</summary><div>\n<p><span class=\"spoiler bulr\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">è­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Š</span><br />\n<span class=\"label success\"> label</span></p>\n</div></details>\n<details class=\"danger\"><summary>çº¢è‰²</summary><div>\n<p><span class=\"label danger\">danger</span></p>\n</div></details>\n<h1 id=\"tasklist-å¾…åŠäº‹é¡¹\"><a class=\"anchor\" href=\"#tasklist-å¾…åŠäº‹é¡¹\">#</a>  <code>taskList</code>  å¾…åŠäº‹é¡¹</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-task-checkbox</code> ã€‚<br />\nå¯ä»¥åˆ©ç”¨ <code>markdown-it-attrs</code>  æ·»åŠ é£æ ¼é¢œè‰²ï¼Œåªå¯ä»¥ç»™ <code>ul</code>  æ ‡ç­¾æ·»åŠ ï¼Œéœ€è¦æ–°å»ºä¸¤è¡Œã€‚</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>- [ ] è¿™æ˜¯ä¸€ä¸ªå°å‰å‰</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- [x] è¿™æ˜¯ä¸€ä¸ªçº¢è‰²å‹¾å‹¾</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>&#123;.danger&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>- [ ] æœªå®Œæˆ</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>- [x] å®Œæˆ</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#123;.primary&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>- [ ] æœªå®Œæˆ</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>- [x] é»˜è®¤é¢œè‰²</pre></td></tr></table></figure><ul class=\"task-list danger\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> è¿™æ˜¯ä¸€ä¸ªå°å‰å‰</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> è¿™æ˜¯ä¸€ä¸ªçº¢è‰²å‹¾å‹¾</label></li>\n</ul>\n<ul class=\"task-list primary\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> æœªå®Œæˆ</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_3\"> å®Œæˆ</label></li>\n</ul>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> æœªå®Œæˆ</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_5\"> é»˜è®¤é¢œè‰²</label></li>\n</ul>\n<h1 id=\"furiganaæ–‡å­—æ³¨éŸ³\"><a class=\"anchor\" href=\"#furiganaæ–‡å­—æ³¨éŸ³\">#</a>  <code>furigana</code>  æ–‡å­—æ³¨éŸ³</h1>\n<p>åŸæœ¬ç”¨äºæ—¥è¯­æ±‰å­—å‡åæ³¨éŸ³ï¼Œä½†åˆ«çš„æ³¨éŸ³ä¹Ÿå¯ä»¥ã€‚<br />\nä¸ºäº†å…¼å®¹æ€§ï¼Œé‡‡ç”¨ <code>markdown-it-ruby</code>  çš„åŸºæœ¬æ ¼å¼ï¼š <code>&#123;æ–‡å­—^æ³¨éŸ³&#125;</code> ï¼Œå¹¶ä¸”ä¸ºäº†å…¼å®¹è¡¨æ ¼ï¼Œå°†åˆ†éš”ç¬¦ç”± <code>|</code>  æ¢æˆäº† <code>^</code> ã€‚<br />\næ³¨éŸ³åˆ†éš”åŸºäº <code>furigana-markdown-it</code> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZnVyaWdhbmEtbWFya2Rvd24taXQjcXVpY2stdXNhZ2U=\"> æ˜¾ç¤ºè¯´æ˜çœ‹è¿™é‡Œ</span></p>\n<table>\n<tbody>\n<tr>\n<td><code>&#123;å–ã‚Šè¿”ã™^ã¨ã‚Šã‹ãˆã™&#125;</code></td>\n<td><ruby>å–<rp> (</rp><rt>ã¨</rt><rp>)</rp> ã‚Š<rt></rt>è¿”<rp> (</rp><rt>ã‹ãˆ</rt><rp>)</rp> ã™<rt></rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;å¯æ„›ã„çŠ¬^ã‹+ã‚ã„ãƒ»ã„ãƒ»ã„ã¬&#125;</code></td>\n<td><ruby>å¯æ„›<rp> (</rp><rt>ã‹ã‚ã„</rt><rp>)</rp> ã„<rt></rt>çŠ¬<rp> (</rp><rt>ã„ã¬</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;å¯æ„›ã„çŠ¬^ã‹ãƒ»ã‚ã„ãƒ»ã„ã„ã¬&#125;</code></td>\n<td><ruby>å¯<rp> (</rp><rt>ã‹</rt><rp>)</rp> æ„›<rp> (</rp><rt>ã‚ã„</rt><rp>)</rp> ã„<rt></rt>çŠ¬<rp> (</rp><rt>ã„ã¬</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿^accelerator&#125;</code></td>\n<td><ruby>ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿<rp> (</rp><rt>accelerator</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;accelerator^ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿&#125;</code></td>\n<td><ruby>accelerator<rp>(</rp><rt>ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;é£Ÿã¹ã‚‹^ãŸã¹ã‚‹&#125;</code></td>\n<td><ruby>é£Ÿ<rp> (</rp><rt>ãŸ</rt><rp>)</rp> ã¹ã‚‹<rt></rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;é£Ÿã¹ã‚‹^=ãŸã¹ã‚‹&#125;</code></td>\n<td><ruby>é£Ÿã¹ã‚‹<rp> (</rp><rt>ãŸã¹ã‚‹</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;ã‚ã„ã†ãˆãŠ^*&#125;</code></td>\n<td><ruby>ã‚<rt>â—</rt>ã„<rt>â—</rt>ã†<rt>â—</rt>ãˆ<rt>â—</rt>ãŠ<rt>â—</rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;ã‚ã„ã†ãˆãŠ^*â¤&#125;</code></td>\n<td><ruby>ã‚<rt>â¤</rt>ã„<rt>â¤</rt>ã†<rt>â¤</rt>ãˆ<rt>â¤</rt>ãŠ<rt>â¤</rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;å¸¸ç”¨è´¦å·^contact&#125;</code></td>\n<td><ruby>å¸¸ç”¨è´¦å·<rp> (</rp><rt>contact</rt><rp>)</rp></ruby></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"mediaå¤šåª’ä½“\"><a class=\"anchor\" href=\"#mediaå¤šåª’ä½“\">#</a>  <code>media</code>  å¤šåª’ä½“</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº Hexo Tag åŠŸèƒ½ï¼Œä½¿ç”¨ <code>media</code>  æ ‡ç­¾ï¼Œç›®å‰å¯é€‰æ‹©ä¸¤ç§ç±»å‹ï¼Œå³ <code>audio</code>  å’Œ <code>video</code> ã€‚</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% media audio %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>... éŸ³é¢‘åˆ—è¡¨</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&#123;% media video %&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>... è§†é¢‘åˆ—è¡¨</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr></table></figure><p>æ ‡ç­¾åŒ…ç»•ä¸€æ®µ <code>yml</code>  æ ¼å¼çš„å†…å®¹ï¼Œæ ¼å¼ä¸<a href=\"../config/#%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90\">èƒŒæ™¯éŸ³ä¹</a>çš„é…ç½®ç±»ä¼¼ã€‚</p>\n<p>äº¦å¯ä»¥ç›´æ¥ä½¿ç”¨ç½‘æ˜“äº‘ã€è™¾ç±³ã€QQ éŸ³ä¹çš„æ’­æ”¾åˆ—è¡¨ã€å•æ›²ã€‚</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"><span>ä¸¾ä¸ªæ —å­</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% media audio %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- title: åˆ—è¡¨ 1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  list:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2943811283</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2297706586</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>- title: åˆ—è¡¨ 2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  list:</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2031842656</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#123;% media video %&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>- name: &quot;æµ‹è¯• 1&quot;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  url: https:&#x2F;&#x2F;cdn.kastatic.org&#x2F;ka-youtube-converted&#x2F;O_nY1TM2RZM.mp4&#x2F;O_nY1TM2RZM.mp4#t&#x3D;0</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>- name: &quot;æµ‹è¯• 2&quot;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  url: https:&#x2F;&#x2F;cdn.kastatic.org&#x2F;ka-youtube-converted&#x2F;O_nY1TM2RZM.mp4&#x2F;O_nY1TM2RZM.mp4#t&#x3D;0</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr></table></figure><p><div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"åˆ—è¡¨1\",\"list\":[\"https://music.163.com/#/playlist?id=2943811283\",\"https://music.163.com/#/playlist?id=2297706586\"]},{\"title\":\"åˆ—è¡¨2\",\"list\":[\"https://music.163.com/#/playlist?id=2031842656\"]}]'></div></div></p>\n<p><div class=\"media-container\"><div class=\"player\" data-type=\"video\" data-src='[{\"name\":\"æµ‹è¯•1\",\"url\":\"https://cdn.kastatic.org/ka-youtube-converted/O_nY1TM2RZM.mp4/O_nY1TM2RZM.mp4#t=0\"},{\"name\":\"æµ‹è¯•2\",\"url\":\"https://cdn.kastatic.org/ka-youtube-converted/O_nY1TM2RZM.mp4/O_nY1TM2RZM.mp4#t=0\"}]'></div></div></p>\n<h1 id=\"mathæ•°å­¦å…¬å¼\"><a class=\"anchor\" href=\"#mathæ•°å­¦å…¬å¼\">#</a>  <code>math</code>  æ•°å­¦å…¬å¼</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-katex</code> <br />\n åœ¨ Front Matter ä¸­æ·»åŠ  <code>math: true</code>  ä»¥æ”¯æŒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXRleC5vcmcv\"> KaTex</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: æ•°å­¦å…¬å¼æ˜¾ç¤º</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>math: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>è¡Œå†…å…¬å¼ï¼š$\\sqrt &#123;3x-1&#125;+(1+x)^2$</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ç‹¬ç«‹å—æ˜¾ç¤ºï¼š</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$$\\begin &#123;array&#125;&#123;c&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\\nabla \\times \\vec &#123;\\mathbf &#123;B&#125;&#125; -\\, \\frac1c\\, \\frac &#123;\\partial\\vec &#123;\\mathbf &#123;E&#125;&#125;&#125;&#123;\\partial t&#125; &amp;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#x3D; \\frac &#123;4\\pi&#125;&#123;c&#125;\\vec &#123;\\mathbf &#123;j&#125;&#125;    \\nabla \\cdot \\vec &#123;\\mathbf &#123;E&#125;&#125; &amp; &#x3D; 4 \\pi \\rho \\\\</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\\nabla \\times \\vec &#123;\\mathbf &#123;E&#125;&#125;\\, +\\, \\frac1c\\, \\frac &#123;\\partial\\vec &#123;\\mathbf &#123;B&#125;&#125;&#125;&#123;\\partial t&#125; &amp; &#x3D; \\vec &#123;\\mathbf &#123;0&#125;&#125; \\\\</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\\nabla \\cdot \\vec &#123;\\mathbf &#123;B&#125;&#125; &amp; &#x3D; 0</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\\end &#123;array&#125;$$</pre></td></tr></table></figure><p>è¡Œå†…å…¬å¼ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mrow><mn>3</mn><mi>x</mi><mo>âˆ’</mo><mn>1</mn></mrow></msqrt><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sqrt{3x-1}+(1+x)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.17444499999999996em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8655550000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\">3</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-2.825555em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17444499999999996em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>\n<p>ç‹¬ç«‹å—æ˜¾ç¤ºï¼š</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">âˆ‡</mi><mo>Ã—</mo><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>âƒ—</mo></mover><mo>âˆ’</mo><mtext>â€‰</mtext><mfrac><mn>1</mn><mi>c</mi></mfrac><mtext>â€‰</mtext><mfrac><mrow><mi mathvariant=\"normal\">âˆ‚</mi><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>âƒ—</mo></mover></mrow><mrow><mi mathvariant=\"normal\">âˆ‚</mi><mi>t</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mfrac><mrow><mn>4</mn><mi>Ï€</mi></mrow><mi>c</mi></mfrac><mover accent=\"true\"><mi mathvariant=\"bold\">j</mi><mo>âƒ—</mo></mover><mi mathvariant=\"normal\">âˆ‡</mi><mo>â‹…</mo><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>âƒ—</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mn>4</mn><mi>Ï€</mi><mi>Ï</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">âˆ‡</mi><mo>Ã—</mo><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>âƒ—</mo></mover><mtext>â€‰</mtext><mo>+</mo><mtext>â€‰</mtext><mfrac><mn>1</mn><mi>c</mi></mfrac><mtext>â€‰</mtext><mfrac><mrow><mi mathvariant=\"normal\">âˆ‚</mi><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>âƒ—</mo></mover></mrow><mrow><mi mathvariant=\"normal\">âˆ‚</mi><mi>t</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mover accent=\"true\"><mn mathvariant=\"bold\">0</mn><mo>âƒ—</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">âˆ‡</mi><mo>â‹…</mo><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>âƒ—</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{array}{c}\n\n\\nabla \\times \\vec{\\mathbf{B}} -\\, \\frac1c\\, \\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} &amp;\n= \\frac{4\\pi}{c}\\vec{\\mathbf{j}}    \\nabla \\cdot \\vec{\\mathbf{E}} &amp; = 4 \\pi \\rho \\\\\n\n\\nabla \\times \\vec{\\mathbf{E}}\\, +\\, \\frac1c\\, \\frac{\\partial\\vec{\\mathbf{B}}}{\\partial t} &amp; = \\vec{\\mathbf{0}} \\\\\n\n\\nabla \\cdot \\vec{\\mathbf{B}} &amp; = 0\n\n\\end{array}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.1938640000000005em;vertical-align:-1.846932em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">âˆ‡</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">Ã—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">B</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.072377em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">âˆ‚</span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">âˆ‚</span><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-2.714em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\">E</span></span></span></span><span style=\"top:-2.96911em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay mtight\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.9145549999999996em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">âˆ‡</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">Ã—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">E</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.072377em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">âˆ‚</span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">âˆ‚</span><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-2.714em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\">B</span></span></span></span><span style=\"top:-2.96911em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay mtight\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-1.585445em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">âˆ‡</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">B</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.846932em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">Ï€</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9774399999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">j</span></span></span></span><span style=\"top:-3.26344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"mord\">âˆ‡</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">E</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span><span style=\"top:-2.9145549999999996em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.92744em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">0</span></span></span></span><span style=\"top:-3.21344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span><span style=\"top:-1.585445em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.846932em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">4</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï€</span><span class=\"mord mathnormal\">Ï</span></span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span></span></span></span></span></p>\n<h1 id=\"mermaidæµç¨‹å›¾\"><a class=\"anchor\" href=\"#mermaidæµç¨‹å›¾\">#</a>  <code>mermaid</code>  æµç¨‹å›¾</h1>\n<p>æœ¬åŠŸèƒ½åŸºäº <code>markdown-it-mermaid</code> <br />\n åœ¨ Front Matter ä¸­æ·»åŠ  <code>mermaid: true</code>  ä»¥æ”¯æŒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZXJtYWlkLWpzLmdpdGh1Yi5pby9tZXJtYWlkLyMv\"> Mermaid</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: æµç¨‹å›¾æ˜¾ç¤º</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mermaid: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#96;&#96;&#96;mermaid</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>graph LR</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    A [Square Rect] -- Link text --&gt; B ((Circle))</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    A --&gt; C (Round Rect)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    B --&gt; D &#123;Rhombus&#125;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    C --&gt; D</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>&#96;&#96;&#96;mermaid</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>sequenceDiagram</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    loop Daily query</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        Alice-&gt;&gt;Bob: Hello Bob, how are you?</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        alt is sick</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            Bob-&gt;&gt;Alice: Not so good :(</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        else is well</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            Bob-&gt;&gt;Alice: Feeling fresh like a daisy</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        end</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        opt Extra response</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            Bob-&gt;&gt;Alice: Thanks for asking</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        end</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    end</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr></table></figure><figure class=\"highlight mermaid\"><figcaption data-lang=\"mermaid\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">graph</span> LR</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    A<span class=\"token text string\">[Square Rect]</span> <span class=\"token inter-arrow-label\"><span class=\"token arrow-head arrow operator\">--</span> <span class=\"token label property\">Link text</span> <span class=\"token arrow operator\">--></span></span> B<span class=\"token text string\">((Circle))</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    A <span class=\"token arrow operator\">--></span> C<span class=\"token text string\">(Round Rect)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    B <span class=\"token arrow operator\">--></span> D<span class=\"token text string\">&#123;Rhombus&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    C <span class=\"token arrow operator\">--></span> D</pre></td></tr></table></figure><figure class=\"highlight mermaid\"><figcaption data-lang=\"mermaid\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">sequenceDiagram</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">loop</span> Daily query</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        Alice<span class=\"token arrow operator\">->></span>Bob<span class=\"token operator\">:</span> Hello Bob, how are you?</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">alt</span> is sick</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Not so good <span class=\"token operator\">:</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">else</span> is well</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Feeling fresh like a daisy</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">opt</span> Extra response</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Thanks for asking</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr></table></figure>",
            "tags": [
                "Hexo",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/display/",
            "url": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/display/",
            "title": "Step.3 ç•Œé¢æ˜¾ç¤º",
            "date_published": "2020-08-13T13:12:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/2020/08/13/theme-shoka-doc/\">ğŸš€å¿«é€Ÿå¼€å§‹</a> - <a href=\"/2020/08/13/theme-shoka-doc/dependents/\">ğŸ’Œä¾èµ–æ’ä»¶</a> - <a href=\"/2020/08/13/theme-shoka-doc/config/\">ğŸ“ŒåŸºæœ¬é…ç½®</a> - <a href=\"/2020/08/13/theme-shoka-doc/display/\">ğŸŒˆç•Œé¢æ˜¾ç¤º</a> - <a href=\"/2020/08/13/theme-shoka-doc/special/\"><strong>ğŸ¦„ç‰¹æ®ŠåŠŸèƒ½</strong></a></p>\n</div>\n<h1 id=\"é¦–é¡µç½®é¡¶æ–‡ç« \"><a class=\"anchor\" href=\"#é¦–é¡µç½®é¡¶æ–‡ç« \">#</a> é¦–é¡µç½®é¡¶æ–‡ç« </h1>\n<p>åœ¨æ–‡ç« çš„ Front Matter è®¾ç½® <code>sticky: true</code> ï¼Œåˆ™è¯¥æ–‡ç« å°†æ˜¾ç¤ºåœ¨é¦–é¡µæœ€ä¸Šæ–¹çš„ <code>ç½®é¡¶æ–‡ç« </code> åˆ—ã€‚<br />\nå¤šç¯‡æ–‡ç« æŒ‰ç…§å‘å¸ƒæ—¶é—´å€’åºæ’åˆ—ï¼Œä¸åˆ†é¡µã€‚</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: ç½®é¡¶æ–‡ç« </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>sticky: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr></table></figure><h1 id=\"é¦–é¡µç²¾é€‰åˆ†ç±»\"><a class=\"anchor\" href=\"#é¦–é¡µç²¾é€‰åˆ†ç±»\">#</a> é¦–é¡µç²¾é€‰åˆ†ç±»</h1>\n<p>æƒ³è¦åœ¨é¦–é¡µæ˜¾ç¤ºåˆ†ç±»ç¿»è½¬å—ï¼Œéœ€è¦æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹çš„æ–¹å¼ï¼Œç»™éœ€è¦æ˜¾ç¤ºçš„åˆ†ç±»åŠ ä¸Šå°é¢å›¾ã€‚</p>\n<ol>\n<li>\n<p>é¦–å…ˆï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®ï¼š<br />\næ‰¾åˆ° <code>category_map:</code> ï¼Œé…ç½®æ¯ä¸ªåˆ†ç±»å¯¹åº”çš„è‹±æ–‡æ˜ å°„ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">category_map</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">è®¡ç®—æœºç§‘å­¦</span><span class=\"token punctuation\">:</span> computer<span class=\"token punctuation\">-</span>science</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">Java</span><span class=\"token punctuation\">:</span> java</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">C++</span><span class=\"token punctuation\">:</span> cpp</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">äºŒè¿›åˆ¶æ‚è°ˆ</span><span class=\"token punctuation\">:</span> note</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">è®¡ç®—æœºç¨‹åºè®¾è®¡ï¼ˆC++ï¼‰-è¥¿å®‰äº¤é€šå¤§å­¦</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">é›¶åŸºç¡€å­¦Javaè¯­è¨€-æµ™æ±Ÿå¤§å­¦-ç¿æº</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡-Javaè¯­è¨€-æµ™æ±Ÿå¤§å­¦-ç¿æº</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">2</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šhexo ä¼šè‡ªåŠ¨å¤„ç†è·¯å¾„ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œ~`!@#$%<span></span>^&amp;*()-_+=<span></span>{}|\\;:&quot;'&lt;&gt;,.? ä»¥åŠç©ºæ ¼ï¼Œè¿™äº›å…¨éƒ¨ä¼šè¢«æ›¿æ¢æˆ <code>-</code> <br />\n æ‰€ä»¥é¿å…åœ¨è®¾ç½®ä¸­ä½¿ç”¨ä¸Šè¿°å­—ç¬¦ï¼Œå¦åˆ™å¯å¯¼è‡´æ— æ³•æŠ“å–åˆ°ç›®å½•ä¸‹çš„ <code>cover.jpg</code></p>\n</blockquote>\n</li>\n<li>\n<p>åœ¨ <code>&lt;root&gt;/source/_posts</code>  æ–‡ä»¶å¤¹ç›¸åº”çš„ç›®å½•é‡Œï¼Œå­˜æ”¾å°é¢å›¾<br />\nä¾‹å­ï¼šå¦‚ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9qYXZhL2NvdXJzZS0xL3dlZWstMS8=\">ç¬¬ 1 å‘¨ è®¡ç®—</span> è¿™ç¯‡æ–‡ç« ã€‚<br />\næ‰€å¤„çš„åˆ†ç±»æ˜¯</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">categories</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">-</span> <span class=\"token punctuation\">[</span>è®¡ç®—æœºç§‘å­¦<span class=\"token punctuation\">,</span> Java<span class=\"token punctuation\">,</span> é›¶åŸºç¡€å­¦Javaè¯­è¨€<span class=\"token punctuation\">-</span>æµ™æ±Ÿå¤§å­¦<span class=\"token punctuation\">-</span>ç¿æº<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>ç°åœ¨éœ€è¦åœ¨é¦–é¡µæ˜¾ç¤º <code>é›¶åŸºç¡€å­¦Javaè¯­è¨€-æµ™æ±Ÿå¤§å­¦-ç¿æº</code> è¿™ä¸ªåˆ†ç±»ï¼Œç¿»è½¬å¡ç‰‡åï¼Œæ˜¾ç¤ºè¿™ä¸ªåˆ†ç±»ä¸‹çš„æ–‡ç« ä»¬ã€‚<br />\nè€Œè¯¥åˆ†ç±»ç»è¿‡è‹±æ–‡æ˜ å°„ï¼Œå®ƒçš„è·¯å¾„å°†æ˜¯ <code>/computer-science/java/course-1/</code> ã€‚</p>\n<p>é‚£ä¹ˆï¼Œè¯·åœ¨ <code>&lt;root&gt;/source/_posts/computer-science/java/course-1/</code>  çš„ç›®å½•ä¸‹æ”¾ç½® <code>cover.jpg</code>  æ–‡ä»¶ã€‚<br />\nåªè¦ <code>åˆ†ç±»è·¯å¾„</code> å¯¹åº”çš„ç›®å½•ä¸‹<strong>å­˜åœ¨</strong> <code>cover.jpg</code>  æ–‡ä»¶ï¼Œè¿™ä¸ªåˆ†ç±»å°±ä¼šåœ¨é¦–é¡µæ˜¾ç¤ºã€‚<br />\nåœ¨è¿›è¡Œ <code>hexo g</code>  æ—¶ï¼Œæœ¬åˆ†ç±»çš„å°é¢å›¾ä¼šè‡ªåŠ¨è¢«å¤åˆ¶åˆ° public ç›®å½•é‡Œç›¸åº”çš„ä½ç½®ã€‚</p>\n</li>\n<li>\n<p>äº‹å®ä¸Šï¼Œä¸ºäº†æ–¹ä¾¿æ–‡ç« ç®¡ç†ï¼Œè¿™ä¸ªåˆ†ç±»ä¸‹æ‰€æœ‰æ–‡ç« çš„ md æ–‡ä»¶ï¼Œæˆ‘éƒ½ä¼šæ”¾åœ¨ <code>&lt;root&gt;/source/_posts/computer-science/java/course-1/</code>  è¿™ä¸ªç›®å½•ä¸‹ã€‚</p>\n<p>ä¸”ç«™ç‚¹é…ç½®æ–‡ä»¶é‡Œï¼Œæ°¸ä¹…é“¾æ¥è®¾ç½®å¦‚ä¸‹</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">permalink</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">:</span>title/</pre></td></tr></table></figure><p><code>hexo g</code>  åï¼Œæ–‡ç« çš„ html æ–‡ä»¶ä»¬å°†å…¨éƒ¨ç”Ÿæˆåˆ° <code>&lt;root&gt;/public/computer-science/java/course-1/</code>  ç›®å½•ã€‚<br />\nå…·ä½“å¯ä»¥æŸ¥çœ‹<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvc2hva2E=\">æœ¬åšå®¢çš„ github ä»“åº“</span>ã€‚</p>\n</li>\n<li>\n<p>æ–‡ç« è¯¦æƒ…ç•Œé¢ä¸­çš„ <code>ç³»åˆ—æ–‡ç« </code> ï¼Œæ˜¾ç¤ºçš„æ˜¯ä¸å½“å‰æ–‡ç« åŒä¸€åˆ†ç±»çš„å…¶ä»–æ–‡ç« ï¼Œå¹¶æŒ‰ç…§æ–‡ç« åæ­£åºæ’åºã€‚</p>\n</li>\n</ol>\n<blockquote>\n<p>o (*ï¿£â–½ï¿£*) ã‚<br />\nå…¶å®ï¼Œä¸è®¾ç½® <code>category_map</code>  ä¹Ÿå¯ä»¥ï¼Œåªè¦åœ¨åˆ†ç±»è·¯å¾„å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨ <code>cover.jpg</code>  æ–‡ä»¶å°±è¡Œã€‚<br />\nç°åœ¨ï¼Œè¿™é¡¹åŠŸèƒ½ä¸ <code>category_dir</code>  çš„é…ç½®ä¹Ÿæ— å…³ï¼Œ <code>hexo g</code>  ç”Ÿæˆåï¼Œå›¾ç‰‡ä¼šè‡ªåŠ¨è¢«è½¬ç§»åˆ° <code>category_dir</code>  çš„ç›¸å…³å­ç›®å½•ä¸‹ã€‚</p>\n</blockquote>\n<h1 id=\"æ–‡ç« å°é¢å›¾\"><a class=\"anchor\" href=\"#æ–‡ç« å°é¢å›¾\">#</a> æ–‡ç« å°é¢å›¾</h1>\n<ul>\n<li>\n<p>å¦‚æœæ–‡ç« çš„ Front Matter è®¾ç½®äº† <code>cover: image path</code> ï¼Œåˆ™å°é¢ä¼šæ˜¾ç¤ºè¿™å¼ å›¾ç‰‡ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>ä¸¾ä¸ªæ —å­</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Images</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> assets/wallpaper<span class=\"token punctuation\">-</span>2572384.jpg</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æˆ–è€…å†™æˆ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//placehold.it/350x150.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>è¿™é‡Œ <code>cover</code>  çš„å€¼å¯ä»¥æ˜¯ä½äº <code>source</code>  ç›®å½•é‡Œçš„å›¾ç‰‡æ–‡ä»¶ï¼Œæ­¤å¤„æ˜¯ <code>&lt;root&gt;/source/assets/wallpaper-2572384.jpg</code>  æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŸç½‘å€ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœæ–‡ç« æ˜¯ä¸€ä¸ª <code>gallery post</code> ï¼Œå³ Front Matter è®¾ç½®äº† <code>photos</code> ï¼Œåˆ™ä¼šå°é¢ä¼šæ˜¾ç¤ºè®¾ç½®çš„ç¬¬ä¸€å¼ å›¾ç‰‡ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>ä¸¾ä¸ªæ —å­</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Gallery Post</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">photos</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>2572384.jpg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>2311325.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>878514.jpg</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">-</span> http<span class=\"token punctuation\">:</span>//placehold.it/350x150.jpg</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>æ­¤æ—¶é»˜è®¤ä¼šæ˜¾ç¤ºç¬¬ä¸€ä¸ªå›¾ç‰‡ï¼Œå³ä½äº <code>&lt;root&gt;/source/assets/</code>  ç›®å½•é‡Œçš„ <code>wallpaper-2572384.jpg</code> ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœç«™ç‚¹é…ç½®ä¸­è®¾ç½®äº† <code>post_asset_folder: true</code> ï¼Œé‚£ä¹ˆä¸Šè¿°æœ¬åœ°å›¾ç‰‡è·¯å¾„åº”ä¸º <code>&lt;root&gt;/source/_posts/æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹/assets/wallpaper-2572384.jpg</code> ï¼Œå½“ç„¶æ­¤æ—¶ <code>assets</code>  ç›®å½•å¯ä»¥çœæ‰ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœä»¥ä¸Šè®¾ç½®å‡ä¸å­˜åœ¨ï¼Œå°†æ˜¾ç¤ºä¸€å¼ éšæœºå›¾ç‰‡ï¼Œ<a href=\"../config/#%E9%9A%8F%E6%9C%BA%E5%9B%BE%E5%BA%93\">éšæœºå›¾åº“é…ç½®æˆ³æ­¤</a>ã€‚</p>\n</li>\n</ul>\n<h1 id=\"å›¾ç‰‡å±•ç¤ºä¸ç›¸å†Œ\"><a class=\"anchor\" href=\"#å›¾ç‰‡å±•ç¤ºä¸ç›¸å†Œ\">#</a> å›¾ç‰‡å±•ç¤ºä¸ç›¸å†Œ</h1>\n<p>åœ¨æ–‡ç« çš„ Front Matter è®¾ç½® <code>fancybox: false</code> ï¼Œå¯ä»¥å…³é—­æ–‡ç« é¡µçš„å›¾ç‰‡å±•ç¤ºåŠŸèƒ½ã€‚<br />\nä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cDovL21pcm9tYW5uaW5vLmdpdGh1Yi5pby9KdXN0aWZpZWQtR2FsbGVyeS8=\"> Justified-Gallery</span> å¯¹ Gallery Post å†…å›¾æ¡ˆè¿›è¡Œæ’åˆ—ã€‚</p>\n<p>ä¸‹é¢ä»‹ç»ä¸€äº›å°æŠ€å·§ï¼š</p>\n<ol>\n<li>è®©å›¾æ¡ˆä¸‹æ–¹æ˜¾ç¤º <code>title</code>  çš„ markdown ä»£ç </li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>![è¿™é‡Œæ˜¯ alt](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;è¿™é‡Œæ˜¯ title&quot;)</pre></td></tr></table></figure><p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"è¿™é‡Œæ˜¯alt\" title=\"è¿™é‡Œæ˜¯title\" /></p>\n<ol start=\"2\">\n<li>è®¾ç½®å›¾ç‰‡çš„å¤§å°</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;å®šä¹‰å›¾ç‰‡å¤§å° - å›ºå®šå®½åº¦å’Œé«˜åº¦&quot;)&#123;height&#x3D;&quot;100px&quot; width&#x3D;&quot;400px&quot;&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;å®šä¹‰å›¾ç‰‡å¤§å° - å›ºå®šå®½åº¦&quot;)&#123;width&#x3D;&quot;400px&quot;&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;å®šä¹‰å›¾ç‰‡å¤§å° - å›ºå®šé«˜åº¦&quot;)&#123;height&#x3D;&quot;100px&quot;&#125;</pre></td></tr></table></figure><p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"å®šä¹‰å›¾ç‰‡å¤§å°-å›ºå®šå®½åº¦å’Œé«˜åº¦\" height=\"100px\" width=\"400px\" /></p>\n<p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"å®šä¹‰å›¾ç‰‡å¤§å°-å›ºå®šå®½åº¦\" width=\"400px\" /></p>\n<p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"å®šä¹‰å›¾ç‰‡å¤§å°-å›ºå®šé«˜åº¦\" height=\"100px\" /></p>\n<ol start=\"3\">\n<li>é™¤äº†åœ¨ Front Matter é‡Œé…ç½® <code>photos</code>  å¯ä»¥æ˜¾ç¤ºç›¸å†Œå›¾æ¡ˆåˆ—è¡¨å¤–ï¼Œè¿˜å¯ä»¥è¿™æ ·å†™</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>## å›¾æ¡ˆåˆ—è¡¨ No.1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclfdu6exj20zk0m87hw.jpg &quot;è¿™é‡Œæ˜¯ title&quot;)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclflwv2aj20zk0m84qp.jpg)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclg5ms2rj20zk0m8u0x.jpg)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclhnx9glj20zk0m8npd.jpg)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;.gallery&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>## å›¾æ¡ˆåˆ—è¡¨ No.2</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicitht3xtj20zk0m8k5v.jpg)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclil3m4ej20zk0m8tn8.jpg)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicljgocqbj20zk0m8e81.jpg)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gipetfk5zwj20zk0m8e81.jpg)</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#123;.gallery data-height&#x3D;&quot;120&quot;&#125;</pre></td></tr></table></figure><p><code>data-height</code>  ç”¨æ¥è®¾ç½®æ¯è¡Œçš„é«˜åº¦ï¼Œé»˜è®¤ä¸º <code>220</code></p>\n<h2 id=\"å›¾æ¡ˆåˆ—è¡¨no1\"><a class=\"anchor\" href=\"#å›¾æ¡ˆåˆ—è¡¨no1\">#</a> å›¾æ¡ˆåˆ—è¡¨ No.1</h2>\n<p class=\"gallery\"><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclfdu6exj20zk0m87hw.jpg\" alt=\"\" title=\"è¿™é‡Œæ˜¯title\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclflwv2aj20zk0m84qp.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclg5ms2rj20zk0m8u0x.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclhnx9glj20zk0m8npd.jpg\" alt=\"\" /></p>\n<h2 id=\"å›¾æ¡ˆåˆ—è¡¨no2\"><a class=\"anchor\" href=\"#å›¾æ¡ˆåˆ—è¡¨no2\">#</a> å›¾æ¡ˆåˆ—è¡¨ No.2</h2>\n<p class=\"gallery\" data-height=\"120\"><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicitht3xtj20zk0m8k5v.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclil3m4ej20zk0m8tn8.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicljgocqbj20zk0m8e81.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gipetfk5zwj20zk0m8e81.jpg\" alt=\"\" /></p>\n<h1 id=\"è‡ªå®šä¹‰é¡µé¢é…è‰²\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰é¡µé¢é…è‰²\">#</a> è‡ªå®šä¹‰é¡µé¢é…è‰²</h1>\n<p>ä¸»é¢˜é…è‰²å…¨éƒ¨åœ¨ <code>&lt;root&gt;/themes/shoka/source/css/_colors.styl</code>  æ–‡ä»¶ä¸­ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p>\n<p>åœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•æ–°å»ºæ–‡ä»¶ <code>colors.styl</code> ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸­æ·»æ”¹æ ·å¼ã€‚</p>\n<blockquote>\n<p>è‡ªå®šä¹‰ <code>colors.styl</code>  æ–‡ä»¶å°†è¦†ç›–ä¸»é¢˜é»˜è®¤æ ·å¼ï¼Œä¸ºäº†é¿å…å‡ºé”™ï¼Œè¯·ä¿è¯åŸæœ‰æ ·å¼åå‡å­˜åœ¨ï¼Œåœ¨åŸæœ‰æ ·å¼åŸºç¡€ä¸Šè¿›è¡Œå¢åˆ æ”¹ã€‚</p>\n</blockquote>\n<p>ä¸»é¢˜æ”¯æŒåœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•å»ºç«‹ä¸‰ä¸ªè‡ªå®šä¹‰ <code>styl</code>  æ–‡ä»¶ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>è‡ªå®šä¹‰æ–‡ä»¶å</th>\n<th>å¯¹åº”é»˜è®¤æ ·å¼æ–‡ä»¶</th>\n<th>æ ·å¼åŠŸèƒ½</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>colors.styl</code></td>\n<td><code>_colors.styl</code></td>\n<td>é¡µé¢é…è‰²</td>\n</tr>\n<tr>\n<td><code>iconfont.styl</code></td>\n<td><code>_iconfont.styl</code></td>\n<td><a href=\"../config/#iconfont%E5%9B%BE%E6%A0%87\">å›¾æ ‡æ ·å¼</a></td>\n</tr>\n<tr>\n<td><code>custom.styl</code></td>\n<td>-</td>\n<td>ä»»æ„è‡ªå®šä¹‰æ ·å¼</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"è‡ªå®šä¹‰ä¸»é¢˜å›¾ç‰‡\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰ä¸»é¢˜å›¾ç‰‡\">#</a> è‡ªå®šä¹‰ä¸»é¢˜å›¾ç‰‡</h1>\n<p>å¦‚æœæƒ³è¦ä¿®æ”¹ä¸»é¢˜çš„ <code>&lt;root&gt;/themes/shoka/source/images/</code>  ç›®å½•å†…çš„æŸå¼ å›¾ç‰‡ï¼Œè¯·åœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•æ–°å»ºç›®å½• <code>images</code> ï¼Œå¹¶åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ·»åŠ <ins>åŒå</ins>æ–‡ä»¶ï¼Œéƒ¨ç½²æ—¶å°†è‡ªåŠ¨è¦†ç›–ä¸»é¢˜å†…çš„é»˜è®¤å›¾ç‰‡ã€‚</p>\n<p>å¯ä»¥ç”¨æ­¤æ–¹æ³•è‡ªå®šä¹‰å¤´åƒã€æ‰“èµäºŒç»´ç ç­‰å›¾ç‰‡ï¼Œå¹¶ä¸”é¿å…è¦†ç›–æ›´æ–°ä¸»é¢˜æ—¶é—å¤±è‡ªå®šä¹‰æ–‡ä»¶ã€‚</p>\n<h1 id=\"è‡ªå®šä¹‰è¯­è¨€åŒ…\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰è¯­è¨€åŒ…\">#</a> è‡ªå®šä¹‰è¯­è¨€åŒ…</h1>\n<p>æœ¬åŠŸèƒ½å‚è€ƒ NexTï¼Œä¸»è¦å¯ä»¥ç”¨æ¥å®šä¹‰èœå•ç­‰å¤„æ˜¾ç¤ºçš„æ–‡å­—ï¼Œä¸”å¯ä»¥æ–¹ä¾¿ä¸»é¢˜æ— è„‘è¦†ç›–å‡çº§ã€‚</p>\n<p>åœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•æ–°å»ºæ–‡ä»¶ <code>languages.yml</code> ã€‚</p>\n<p>æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æ·»åŠ é…ç½®é¡¹ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># language</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">zh-CN</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\"># items</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">post</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">copyright</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token comment\"># the translation you perfer</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">author</span><span class=\"token punctuation\">:</span> æœ¬æ–‡åšä¸»</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">en</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">menu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">travellings</span><span class=\"token punctuation\">:</span> Travellings</pre></td></tr></table></figure><p>å¯ä»¥å‚è€ƒä¸»é¢˜ç›®å½•ä¸‹çš„ <code>example/source/_data</code>  æ–‡ä»¶å¤¹ã€‚</p>\n<blockquote>\n<p>ç«™ç‚¹é…ç½®åŠæ–‡ä»¶çš„ Front Matter ä¸­ï¼Œ <code>language</code>  é¡¹åªæ”¯æŒ <code>zh-CN</code> ã€ <code>zh-HK</code> ã€ <code>zh-TW</code> ã€ <code>ja</code> ã€ <code>en</code> ã€‚<br />\nç±»ä¼¼å†™æˆ <code>zh_CN</code>  è¿™æ ·æ˜¯ä¸å¯ä»¥çš„ã€‚</p>\n</blockquote>\n",
            "tags": [
                "Hexo",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/config/",
            "url": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/config/",
            "title": "Step.2 åŸºæœ¬é…ç½®",
            "date_published": "2020-08-13T12:56:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/2020/08/13/theme-shoka-doc/\">ğŸš€å¿«é€Ÿå¼€å§‹</a> - <a href=\"/2020/08/13/theme-shoka-doc/dependents/\">ğŸ’Œä¾èµ–æ’ä»¶</a> - <a href=\"/2020/08/13/theme-shoka-doc/config/\">ğŸ“ŒåŸºæœ¬é…ç½®</a> - <a href=\"/2020/08/13/theme-shoka-doc/display/\">ğŸŒˆç•Œé¢æ˜¾ç¤º</a> - <a href=\"/2020/08/13/theme-shoka-doc/special/\"><strong>ğŸ¦„ç‰¹æ®ŠåŠŸèƒ½</strong></a></p>\n</div>\n<h1 id=\"ç«™ç‚¹åˆ«ç§°\"><a class=\"anchor\" href=\"#ç«™ç‚¹åˆ«ç§°\">#</a> ç«™ç‚¹åˆ«ç§°</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">alternate</span><span class=\"token punctuation\">:</span> Yume Shoka</pre></td></tr></table></figure><p>è¿™é‡Œè®¾ç½®çš„åç§°ä»£æ›¿ Logoï¼Œæ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨ï¼Œä»¥åŠé¡µå°¾Â©ï¸å¤„</p>\n<h1 id=\"é™æ€æ–‡ä»¶ç›®å½•\"><a class=\"anchor\" href=\"#é™æ€æ–‡ä»¶ç›®å½•\">#</a> é™æ€æ–‡ä»¶ç›®å½•</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">statics</span><span class=\"token punctuation\">:</span> / <span class=\"token comment\">#//cdn.jsdelivr.net/gh/amehime/shoka@latest/</span></pre></td></tr></table></figure><p>é»˜è®¤å€¼æ˜¯ <code>/</code> ï¼ŒæŒ‡ä½¿ç”¨æœ¬åœ°é™æ€æ–‡ä»¶<br />\nå¯ä»¥ä¿®æ”¹æˆ <code>//cdn.jsdelivr.net/gh/æ‚¨çš„githubç”¨æˆ·å/æ‚¨çš„é¡¹ç›®å@latest/</code>  è¿™ç§å½¢å¼ï¼Œä»¥ä½¿ç”¨ jsDelivr è¿›è¡ŒåŠ é€Ÿã€‚<br />\nPSï¼šjsDelivr å¹¶ä¸æ˜¯å®æ—¶æ›´æ–°ï¼Œé‡æ–°ç”Ÿæˆæ–‡ä»¶åéœ€è¦è€å¿ƒç­‰å¾…</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span> css</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span> js</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">images</span><span class=\"token punctuation\">:</span> images</pre></td></tr></table></figure><p>é™æ€æ–‡ä»¶æ‰€å¤„ç›®å½•çš„å®é™…ç›®å½•åï¼Œè¿™äº›ä¸€èˆ¬ä¸æ”¹ã€‚</p>\n<h1 id=\"å¤œé—´æ¨¡å¼\"><a class=\"anchor\" href=\"#å¤œé—´æ¨¡å¼\">#</a> å¤œé—´æ¨¡å¼</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">darkmode</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># true</span></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯å¦å¼€å¯å¤œé—´æ¨¡å¼å–å†³äºï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š</p>\n<ol>\n<li>è®¿å®¢ç‚¹å‡»é¡µé¢å¤´éƒ¨åˆ‡æ¢æŒ‰é’®çš„è‡ªè¡Œé€‰æ‹©</li>\n<li>è®¿å®¢åˆ‡æ¢äº†æµè§ˆè®¾å¤‡çš„ä¸»é¢˜è‰²è°ƒ</li>\n<li>æ‚¨çš„ <code>darkmode</code>  é…ç½®é¡¹</li>\n</ol>\n<h1 id=\"è‡ªåŠ¨å®šä½\"><a class=\"anchor\" href=\"#è‡ªåŠ¨å®šä½\">#</a> è‡ªåŠ¨å®šä½</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">auto_scroll</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># false</span></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå†æ¬¡æ‰“å¼€é¡µé¢æ—¶ï¼Œä¼šè‡ªåŠ¨æ»šåŠ¨åˆ°ä¸Šæ¬¡æµè§ˆçš„ä½ç½®ã€‚<br />\nè¿™ä¸ªé€‰é¡¹è®¾ä¸º <code>false</code>  æ—¶å°†åœç”¨æ­¤åŠŸèƒ½ã€‚</p>\n<h1 id=\"åŠ è½½åŠ¨ç”»\"><a class=\"anchor\" href=\"#åŠ è½½åŠ¨ç”»\">#</a> åŠ è½½åŠ¨ç”»</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ˜¯å¦æ˜¾ç¤ºé¡µé¢åŠ è½½åŠ¨ç”» loading-cat</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">loader</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">start</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># å½“åˆæ¬¡æ‰“å¼€é¡µé¢æ—¶ï¼Œæ˜¾ç¤ºåŠ è½½åŠ¨ç”»</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">switch</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># tab åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œæ˜¾ç¤ºåŠ è½½åŠ¨ç”»</span></pre></td></tr></table></figure><p>tab åˆ‡æ¢ååªæ˜¯æ˜¾ç¤º loading åŠ¨ç”»ï¼Œå®é™…å¹¶æœªé‡æ–°åŠ è½½é¡µé¢</p>\n<h1 id=\"é¡µé¢ç‰¹æ•ˆ\"><a class=\"anchor\" href=\"#é¡µé¢ç‰¹æ•ˆ\">#</a> é¡µé¢ç‰¹æ•ˆ</h1>\n<p>å•å‡»é¡µé¢çš„çƒŸèŠ±æ•ˆæœé…ç½®å¦‚ä¸‹</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">fireworks</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># æ˜¯å¦å¯ç”¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">color</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># çƒŸèŠ±é¢œè‰²</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(255,182,185,.9)\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(250,227,217,.9)\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(187,222,214,.9)\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(138,198,209,.9)\"</span></pre></td></tr></table></figure><h1 id=\"åŠ è½½è°·æ­Œå­—ä½“\"><a class=\"anchor\" href=\"#åŠ è½½è°·æ­Œå­—ä½“\">#</a> åŠ è½½è°·æ­Œå­—ä½“</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">font</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\"># Font options:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\"># `external: true` will load this font family from `host` above.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\"># `family: Times New Roman`. Without any quotes.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\"># Global font settings used for all elements inside &lt;body>.</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">global</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Mulish</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\"># Font settings for alternate title.</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">logo</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Fredericka the Great</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3.5</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\"># Font settings for site title.</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Noto Serif JP</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2.5</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\"># Font settings for headlines (&lt;h1> to &lt;h6>).</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token key atrule\">headings</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Noto Serif SC</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token comment\"># Font settings for posts.</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token key atrule\">posts</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\"># Font settings for &lt;code> and code blocks.</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token key atrule\">codes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Inconsolata</pre></td></tr></table></figure><p>æ­¤åŠŸèƒ½åŸºæœ¬å‚è€ƒ NexTã€‚<br />\nåŠ ç²—æ ‡é¢˜çš„å­—ä½“æ€»æ˜¯ä½¿ç”¨ <code>Noto Serif</code> ï¼Œä¸ºäº†æ­£ç¡®å‹å¥½çš„æ˜¾ç¤ºæ—¥æ–‡ä¸­çš„æ±‰å­—ï¼Œä¼šå…ˆååŠ è½½ <code>headings</code>  å’Œ <code>title</code>  çš„å­—ä½“è®¾ç½®ã€‚</p>\n<h1 id=\"iconfontå›¾æ ‡\"><a class=\"anchor\" href=\"#iconfontå›¾æ ‡\">#</a>  <code>iconfont</code>  å›¾æ ‡</h1>\n<p>ä¸»é¢˜æ²¡æœ‰ç›´æ¥ä½¿ç”¨ Font Awesomeï¼Œæ˜¯å› ä¸ºç”¨ä¸åˆ°é‚£ä¹ˆå¤š icon æ„Ÿè§‰éå¸¸æµªè´¹ï¼Œå› æ­¤åœ¨ Iconfont ä¸Šé‡æ–°å»ºç«‹äº†ä¸€ä¸ªé¡¹ç›®ã€‚<br />\n <code>font-family</code>  è®¾ä¸º <code>ic</code> ï¼Œæ‰€æœ‰å­—ä½“æ ·å¼å‰ç¼€ä¸º <code>i-</code> ï¼Œå…·ä½“å‚è§ <code>&lt;root&gt;/themes/shoka/source/css/_iconfont.styl</code> ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># project of https://www.iconfont.cn/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># //at.alicdn.com/t/font_1832207_c8i9n1ulxlt.css => 1832207_c8i9n1ulxlt</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">iconfont</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1832207_c8i9n1ulxlt\"</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ·»åŠ æˆ–ä¿®æ”¹ï¼Œè¯·ç•™è¨€å‘Šè¯‰æˆ‘æ‚¨çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24v\"> Iconfont</span> ç”¨æˆ·åï¼Œæˆ‘å°†æŠŠæ‚¨æ·»åŠ åˆ°ç›®å‰çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24vbWFuYWdlL2luZGV4P21hbmFnZV90eXBlPW15cHJvamVjdHMmYW1wO3Byb2plY3RJZD0xODMyMjA3\">é¡¹ç›®</span>ä¸­ã€‚</p>\n<p>æ·»åŠ æƒé™ä¸º <code>åªè¯»</code> ï¼Œæ­¤åæ‚¨å¯ä»¥ä»»æ„å…¨é€‰ï¼Œæ‰¹é‡ä¿å­˜åˆ°è´­ç‰©è½¦ä¸­ï¼Œæ·»åŠ è‡³æ‚¨è‡ªå·±çš„é¡¹ç›®é‡Œï¼Œå¹¶å°†ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„ <code>iconfont</code>  å€¼æ”¹ä¸ºæ‚¨çš„é¡¹ç›®ã€‚</p>\n<p>æ³¨æ„ï¼Œæ‚¨çš„é¡¹ç›®åº”è®¾ç½® <code>FontClass/Symbol å‰ç¼€</code> ä¸º <code>i-</code> ã€‚</p>\n<p>åœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•æ–°å»ºæ–‡ä»¶ <code>iconfont.styl</code> ï¼ŒæŠŠæ–°å¢æˆ–ä¿®æ”¹çš„å›¾æ ‡æ ·å¼å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</p>\n<blockquote>\n<p>è‡ªå®šä¹‰ <code>iconfont.styl</code>  æ–‡ä»¶å°†è¦†ç›–ä¸»é¢˜é»˜è®¤æ ·å¼ï¼Œä¸ºäº†é¿å…å‡ºé”™ï¼Œè¯·ä¿è¯åŸæœ‰æ ·å¼åå‡å­˜åœ¨ï¼Œåœ¨åŸæœ‰æ ·å¼åŸºç¡€ä¸Šè¿›è¡Œå¢åˆ æ”¹ã€‚</p>\n</blockquote>\n<h1 id=\"èœå•ä¸ç¤¾äº¤æŒ‰é’®\"><a class=\"anchor\" href=\"#èœå•ä¸ç¤¾äº¤æŒ‰é’®\">#</a> èœå•ä¸ç¤¾äº¤æŒ‰é’®</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">menu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">home</span><span class=\"token punctuation\">:</span> / <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> home</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">about</span><span class=\"token punctuation\">:</span> /about/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> user</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">posts</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span> / <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> feather</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">archives</span><span class=\"token punctuation\">:</span> /archives/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> list<span class=\"token punctuation\">-</span>alt</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">categories</span><span class=\"token punctuation\">:</span> /categories/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> th</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> /tags/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> tags</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\"># friends: /friends/ || heart</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\"># links: /links/ || magic</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token key atrule\">social</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> github <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#191717\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">#google: https://plus.google.com/yourname || google</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">twitter</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//twitter.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> twitter <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#00aff0\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">zhihu</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//www.zhihu.com/people/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> zhihu <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#1e88e5\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">music</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/user/home?id=yourid || cloud-music || \"#e60026\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token key atrule\">weibo</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//weibo.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> weibo <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#ea716e\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token key atrule\">about</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//about.me/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> address<span class=\"token punctuation\">-</span>card <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#3b5998\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">#email: mailto:yourname@mail.com || envelope || \"#55acd5\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">#facebook: https://www.facebook.com/yourname || facebook</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">#stackoverflow: https://stackoverflow.com/yourname || stack-overflow</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">#youtube: https://youtube.com/yourname || youtube</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">#instagram: https://instagram.com/yourname || instagram</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">#skype: skype:yourname?call|chat || skype</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">#douban: https://www.douban.com/people/yourname/ || douban</span></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œä½¿ç”¨ <code>||</code>  ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä¾æ¬¡ä¸º  <code>é“¾æ¥ || å›¾æ ‡ || é¢œè‰²</code> ã€‚<br />\næ³¨æ„ï¼Œåªéœ€è¦å†™å›¾æ ‡åç§°ï¼Œå¦‚ <code>github</code> ï¼Œåˆ™ä¼šè‡ªåŠ¨è½¬æ¢ä¸º <code>ic i-github</code> ã€‚<br />\nåå…­è¿›åˆ¶é¢œè‰²ç éœ€è¦ <code>&quot;&quot;</code>  åŒ…ç»•ã€‚</p>\n<p><code>menu</code>  æ”¯æŒä¸€çº§å­ç›®å½•ï¼Œå­ç›®å½•è®¾ç½®ä¸­çš„ç¬¬ä¸€é¡¹å¿…é¡»ä¸º <code>default</code> ï¼Œç”¨æ¥å®šä¹‰çˆ¶çº§æŒ‰é’®çš„æ ·å¼ã€‚</p>\n<p>èœå•æ˜¾ç¤ºæ–‡å­—å¯ä»¥åœ¨è¯­è¨€åŒ…ä¸­å®šä¹‰ï¼Œ<a href=\"../display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E5%8C%85\">å…·ä½“è¯·æˆ³è¿™é‡Œ</a></p>\n<h1 id=\"è¾¹æ é…ç½®\"><a class=\"anchor\" href=\"#è¾¹æ é…ç½®\">#</a> è¾¹æ é…ç½®</h1>\n<p>è¾¹æ å¯ä»¥é€‰æ‹©åœ¨å·¦ä¾§ï¼Œæˆ–å³ä¾§<br />\nä¿®æ”¹å¤´åƒæ–‡ä»¶çš„åœ°å€ï¼Œç›¸å¯¹äºé™æ€æ–‡ä»¶ç›®å½• <code>images</code>  ä¸­é…ç½®çš„è·¯å¾„ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">sidebar</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\"># Sidebar Position.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">position</span><span class=\"token punctuation\">:</span> left</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">#position: right</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\"># Replace the default avatar image and set the url here.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">avatar</span><span class=\"token punctuation\">:</span> avatar.jpg</pre></td></tr></table></figure><p>å¯ä»¥å°†è‡ªå·±çš„å›¾ç‰‡æ”¾åœ¨ <code>&lt;root&gt;/source/_data/images/</code>  ç›®å½•ï¼Œç”šè‡³ä»¥åŒåè¦†ç›–ä¸»é¢˜å†…é»˜è®¤çš„å¤´åƒå›¾ç‰‡ï¼Œ<a href=\"../display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E5%9B%BE%E7%89%87\">å…·ä½“è¯·æˆ³è¿™é‡Œ</a></p>\n<h1 id=\"åº•éƒ¨widgets\"><a class=\"anchor\" href=\"#åº•éƒ¨widgets\">#</a> åº•éƒ¨ widgets</h1>\n<p>ç›®å‰é¡µé¢åº•éƒ¨å¯ä»¥æ˜¾ç¤ºä¸¤ä¸ªå°éƒ¨ä»¶ï¼Œå³ <code>éšæœºæ–‡ç« </code> å’Œ <code>æœ€è¿‘è¯„è®º</code> ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">widgets</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">random_posts</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># æ˜¾ç¤ºéšæœºæ–‡ç« </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">recent_comments</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># æ˜¾ç¤ºæœ€è¿‘è¯„è®º</span></pre></td></tr></table></figure><h1 id=\"å­—æ•°åŠé˜…è¯»æ—¶é—´ç»Ÿè®¡\"><a class=\"anchor\" href=\"#å­—æ•°åŠé˜…è¯»æ—¶é—´ç»Ÿè®¡\">#</a> å­—æ•°åŠé˜…è¯»æ—¶é—´ç»Ÿè®¡</h1>\n<p>å®‰è£…å¥½ <code>hexo-symbols-count-time</code>  æ’ä»¶åï¼Œä¸éœ€è¦ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨æ’ä»¶é»˜è®¤é…ç½®å°±è¡Œã€‚</p>\n<p>éœ€è¦ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸¤å¤„ <code>cout</code> ï¼Œä¿®æ”¹ä¸º <code>true</code> ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># é¡µå°¾å…¨ç«™ç»Ÿè®¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">footer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">since</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2010</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æ–‡ç« ç•Œé¢ç»Ÿè®¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">post</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr></table></figure><h1 id=\"æ–‡ç« è¯„è®º\"><a class=\"anchor\" href=\"#æ–‡ç« è¯„è®º\">#</a> æ–‡ç« è¯„è®º</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly92YWxpbmUuanMub3JnL3F1aWNrc3RhcnQuaHRtbA==\">å¦‚ä½•è·å– LeanCloud çš„ appId å’Œ appKey</span>ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">valine</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your_appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">appKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your_appkey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">placeholder</span><span class=\"token punctuation\">:</span> ãƒ½(â—‹Â´âˆ€`)ï¾‰â™ª <span class=\"token comment\"># Comment box placeholder</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">avatar</span><span class=\"token punctuation\">:</span> mp <span class=\"token comment\"># Gravatar style : mp, identicon, monsterid, wavatar, robohash, retro</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">pageSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token comment\"># Pagination size</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">lang</span><span class=\"token punctuation\">:</span> zh<span class=\"token punctuation\">-</span>CN</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># æ–‡ç« è®¿é—®é‡ç»Ÿè®¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">NoRecordIP</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># ä¸è®°å½• IP</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">serverURLs</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">powerMode</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># é»˜è®¤æ‰“å¼€è¯„è®ºæ¡†è¾“å…¥ç‰¹æ•ˆ</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">tagMeta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> æ–°æœ‹å‹</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span> ä¸»äºº</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span> å°ä¼™ä¼´</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span> é‡‘ä¸»ç²‘ç²‘</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">tagColor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-orange)\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-aqua)\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-pink)\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token key atrule\">tagMember</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token comment\"># - hash of master@email.com</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token comment\"># - hash of master2@email.com</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token comment\"># - hash of friend@email.com</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token comment\"># - hash of friend2@email.com</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token comment\"># - hash of investor1@email.com</span></pre></td></tr></table></figure><p>tag æ ‡ç­¾æ˜¾ç¤ºåœ¨è¯„è®ºè€…åå­—çš„åé¢ï¼Œé»˜è®¤æ˜¯ <code>tagMeta.visitor</code>  å¯¹åº”çš„å€¼ã€‚<br />\nåœ¨ <code>tagMeta</code>  å’Œ <code>tagColor</code>  ä¸­ï¼Œé™¤äº† <code>visitor</code>  è¿™ä¸ª key ä¸èƒ½ä¿®æ”¹å¤–ï¼Œå…¶ä»– key éƒ½å¯ä»¥æ¢ä¸€æ¢ï¼Œä½†éœ€è¦ä¿è¯ä¸€è‡´æ€§ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>ä¸¾ä¸ªæ —å­</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">tagMeta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> æ¸¸å®¢</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span> ç®¡ç†å‘˜</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span> æˆ‘è€å©†</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">tagColor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#855194\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#a77c59\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ed6ea0\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">tagMember</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\"># - hash of admin@email.com</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token comment\"># - hash of waifu@email.com</span></pre></td></tr></table></figure><p>åœ¨æ–‡ç«  Front Matter ä¸­ä¹Ÿå¯ä»¥é…ç½®ä¸Šè¿°å‚æ•°ï¼Œè®¿é—®è¯¥æ–‡ç« é¡µé¢æ—¶ï¼Œå°†è¦†ç›–å…¨å±€é…ç½®ã€‚<br />\nå°¤å…¶å¯ä»¥ç”¨æ¥é…ç½®ä¸€ä¸ªç‰¹æ®Šçš„ placeholderã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">valine</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">placeholder</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1. æé—®å‰è¯·å…ˆä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£âš¡\\n2. é¡µé¢æ˜¾ç¤ºé—®é¢˜ğŸ’¥ï¼Œè¯·æä¾›æ§åˆ¶å°æˆªå›¾ğŸ“¸æˆ–è€…æ‚¨çš„æµ‹è¯•ç½‘å€\\n3. å…¶ä»–ä»»ä½•æŠ¥é”™ğŸ’£ï¼Œè¯·æä¾›è¯¦ç»†æè¿°å’Œæˆªå›¾ğŸ“¸ï¼Œç¥é£Ÿç”¨æ„‰å¿«ğŸ’ª\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>è¯„è®ºé€šçŸ¥ä¸ç®¡ç†å·¥å…·å»ºè®®ä½¿ç”¨è¿™ä¸ª<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0Rlc2VydHNQL1ZhbGluZS1BZG1pbg==\"> Valine-Admin</span>ã€‚<br />\næ³¨æ„ <code>SITE_URL</code>  éœ€è¦ä»¥ <code>/</code>  ç»“å°¾ã€‚</p>\n<p>å¦‚æœæŸä¸€ç¯‡æ–‡ç« éœ€è¦å…³é—­è¯„è®ºåŠŸèƒ½ï¼Œåˆ™åœ¨æ–‡ç«  Front Matter ä¸­é…ç½®ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> å…³é—­è¯„è®º</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">comment</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><h1 id=\"èƒŒæ™¯éŸ³ä¹\"><a class=\"anchor\" href=\"#èƒŒæ™¯éŸ³ä¹\">#</a> èƒŒæ™¯éŸ³ä¹</h1>\n<p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å…¨å±€æ’­æ”¾åˆ—è¡¨ã€‚<br />\nåœ¨æ–‡ç« çš„ Front Matter ä¸­ï¼Œè®¾ç½®æ–‡ç« ä¸“æœ‰æ’­æ”¾åˆ—è¡¨ï¼Œè®¿é—®è¯¥æ–‡ç« é¡µé¢æ—¶ï¼Œå°†è¦†ç›–å…¨å±€é…ç½®ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>å•åˆ—è¡¨</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/song<span class=\"token punctuation\">?</span>id=1387098940</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2088001742</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//www.xiami.com/collect/250830668</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//y.qq.com/n/yqq/playsquare/3535982902.html</pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç½‘æ˜“äº‘ã€è™¾ç±³ã€QQ éŸ³ä¹çš„æ’­æ”¾åˆ—è¡¨ã€å•æ›²ï¼Œå¯ä»¥åŒæ—¶å¡«å†™å¤šä¸ªã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>å¤šåˆ—è¡¨</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> åˆ—è¡¨1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2943811283</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2297706586</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> åˆ—è¡¨2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2031842656</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰åª’ä½“æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ ¼å¼å¡«å†™ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>å•åˆ—è¡¨</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ›²ç›®1\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ’­æ”¾åœ°å€\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è‰ºæœ¯å®¶\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"å°é¢\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ­Œè¯\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ›²ç›®2\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ’­æ”¾åœ°å€\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è‰ºæœ¯å®¶\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"å°é¢\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ­Œè¯\"</span></pre></td></tr></table></figure><figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>å¤šåˆ—è¡¨</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> åˆ—è¡¨1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ›²ç›®1\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>          <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ’­æ”¾åœ°å€\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>          <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è‰ºæœ¯å®¶\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>          <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"å°é¢\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ­Œè¯\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ›²ç›®2\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ’­æ”¾åœ°å€\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è‰ºæœ¯å®¶\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"å°é¢\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"æ­Œè¯\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> åˆ—è¡¨2</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2031842656</span></pre></td></tr></table></figure><p>å¦‚æœè¦å…³é—­å½“å‰é¡µé¢çš„èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨ï¼Œåˆ™åœ¨æ–‡ç«  Front Matter ä¸­é…ç½®ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> å…³é—­èƒŒæ™¯éŸ³ä¹</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><h1 id=\"éšæœºå›¾åº“\"><a class=\"anchor\" href=\"#éšæœºå›¾åº“\">#</a> éšæœºå›¾åº“</h1>\n<ul>\n<li>\n<p>é»˜è®¤çš„å›¾ç‰‡åˆ—è¡¨ä½äº <code>&lt;root&gt;/themes/shoka/_images.yml</code>  ä¸­ã€‚<br />\nä½¿ç”¨äº†æ¸£æµªå›¾åº“ï¼Œä½¿ç”¨ä¸€äº›ä¸Šä¼ å·¥å…·ï¼Œæ¯”å¦‚<span class=\"exturl\" data-url=\"aHR0cHM6Ly9waWMuZ2ltaG95LmNvbS8=\">è¿™é‡Œ</span><br />\nä¸Šä¼ åå›¾ç‰‡çš„é“¾æ¥æ˜¯ <code>http://wx4.sinaimg.cn/large/6833939bly1gicmnywqgpj20zk0m8dwx.jpg</code> ã€‚<br />\nåªéœ€è¦æ–°ä¸€è¡Œå†™ä¸Š <code>- 6833939bly1gicmnywqgpj20zk0m8dwx.jpg</code> ã€‚</p>\n<p>å¦‚æœæƒ³è¦è‡ªå®šä¹‰ï¼Œåˆ™åœ¨ <code>&lt;root&gt;/source/_data/</code>  ç›®å½•æ–°å»ºä¸€ä¸ª <code>images.yml</code>  æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„å›¾ç‰‡è‡³å°‘ 6 æšï¼Œå°†å®Œå…¨è¦†ç›–é»˜è®¤çš„å›¾ç‰‡åˆ—è¡¨ã€‚</p>\n</li>\n<li>\n<p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å›¾ç‰‡åˆ—è¡¨ yml æ–‡ä»¶ä¸­ï¼Œå†™ä¸Šä»»æ„å¤–é“¾å›¾ç‰‡åœ°å€</p>\n</li>\n</ul>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/qAMYEFXxJcKRsiG.gif</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/rjdhcSgEN8COBPA.jpg</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/HKyzSd7NI3mlBpt.jpg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/Y1CBXqgeokEs457.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/Z5W6r2BSoiThHG1.jpg</pre></td></tr></table></figure><ul>\n<li>ä¹Ÿå¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å›¾åºŠ APIï¼š</li>\n</ul>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>æ¯”å¦‚</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">image_server</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://acg.xydwz.cn/api/api.php\"</span></pre></td></tr></table></figure><h1 id=\"åŠ è½½ç¬¬ä¸‰æ–¹ç»„ä»¶\"><a class=\"anchor\" href=\"#åŠ è½½ç¬¬ä¸‰æ–¹ç»„ä»¶\">#</a> åŠ è½½ç¬¬ä¸‰æ–¹ç»„ä»¶</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">vendors</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\"># ç•¥ç•¥ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># ç•¥ç•¥ç•¥</span></pre></td></tr></table></figure><p>åŒ…æ‹¬</p>\n<table>\n<tbody>\n<tr>\n<td><code>pace</code></td>\n<td>åŠ è½½è¿›åº¦æ¡</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>pjax</code></td>\n<td>é¡µé¢æ— åˆ·æ–°åŠ è½½</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>anime</code></td>\n<td>js åŠ¨ç”»æ•ˆæœ</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>algolia</code>   <code>instantsearch</code></td>\n<td>åŸºäº algolia çš„ç«™å†…æœç´¢</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>lazyload</code></td>\n<td>å›¾ç‰‡æ‡’åŠ è½½</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>quicklink</code></td>\n<td>é“¾æ¥èµ„æºé¢„åŠ è½½</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>fetch</code></td>\n<td>è·å–æ’­æ”¾åˆ—è¡¨</td>\n<td>å…¨å±€</td>\n</tr>\n<tr>\n<td><code>katex</code>   <code>copy_tex</code></td>\n<td>æ•°å­¦å…¬å¼æ˜¾ç¤ºåŠå¤åˆ¶</td>\n<td>æŒ‰éœ€</td>\n</tr>\n<tr>\n<td><code>fancybox</code></td>\n<td>å›¾ç‰‡æ”¾å¤§æ˜¾ç¤ºåŠæ’åˆ—</td>\n<td>æŒ‰éœ€</td>\n</tr>\n<tr>\n<td><code>valine</code></td>\n<td>åŸºäº LeanCloud çš„è¯„è®ºç³»ç»ŸåŠæ–‡ç« é˜…è¯»æ¬¡æ•°ç»Ÿè®¡</td>\n<td>æŒ‰éœ€</td>\n</tr>\n<tr>\n<td><code>chart</code></td>\n<td>å›¾è¡¨æ˜¾ç¤º</td>\n<td>æŒ‰éœ€</td>\n</tr>\n</tbody>\n</table>\n<p>ä»¥ä¸Šæ–‡ä»¶åŠ è½½å…¨éƒ¨åŸºäº jsDelivrï¼Œå¹¶å¯¹å…¨å±€åŠ è½½çš„ç»„ä»¶è¿›è¡Œäº†æ–‡ä»¶åˆå¹¶ã€‚<br />\nå¦‚æœä¸æ˜ç™½å•¥æ„æ€ï¼Œåˆ™ä¸è¦è½»æ˜“ä¿®æ”¹ã€‚</p>\n<div class=\"note danger\">\n<p>ä¸»é¢˜ç‰ˆæœ¬å‡çº§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šä¿®æ”¹è¿™é‡Œã€‚<br />\nå¦‚æœä¿®æ”¹è¿‡ä¸»é¢˜é»˜è®¤ <code>_config.yml</code> ï¼Œè®°å¾—æ›´æ–°ä¸»é¢˜æ—¶ï¼Œæœ«å°¾çš„ <code>vendors</code>  ä¹Ÿè¦åŠæ—¶ä¿®æ”¹ã€‚</p>\n</div>\n",
            "tags": [
                "Hexo",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/dependents/",
            "url": "https://sprenedayf.com/2020/08/13/theme-shoka-doc/dependents/",
            "title": "Step.1 ä¾èµ–æ’ä»¶",
            "date_published": "2020-08-13T12:46:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/2020/08/13/theme-shoka-doc/\">ğŸš€å¿«é€Ÿå¼€å§‹</a> - <a href=\"/2020/08/13/theme-shoka-doc/dependents/\">ğŸ’Œä¾èµ–æ’ä»¶</a> - <a href=\"/2020/08/13/theme-shoka-doc/config/\">ğŸ“ŒåŸºæœ¬é…ç½®</a> - <a href=\"/2020/08/13/theme-shoka-doc/display/\">ğŸŒˆç•Œé¢æ˜¾ç¤º</a> - <a href=\"/2020/08/13/theme-shoka-doc/special/\"><strong>ğŸ¦„ç‰¹æ®ŠåŠŸèƒ½</strong></a></p>\n</div>\n<div class=\"note warning\">\n<p>è¯·åŠ¡å¿…å°† hexo-renderer-multi-markdown-it å‡çº§åˆ°æœ€æ–°ç‰ˆï¼Œç›®å‰ä¸º 0.1.5</p>\n</div>\n<p>Theme Shoka ä¾èµ–ä»¥ä¸‹ Hexo æ’ä»¶</p>\n<table>\n<thead>\n<tr>\n<th>æ’ä»¶åç§°</th>\n<th>npm åœ°å€</th>\n<th>åŠŸèƒ½</th>\n<th>ä¾èµ–ç¨‹åº¦</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hexo-renderer-multi-markdown-it</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1yZW5kZXJlci1tdWx0aS1tYXJrZG93bi1pdA==\">é“¾æ¥</span></td>\n<td>md æ–‡ä»¶æ¸²æŸ“å™¨ï¼Œå‹ç¼© css/js/html</td>\n<td>å¿…éœ€</td>\n</tr>\n<tr>\n<td>hexo-autoprefixer</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1hdXRvcHJlZml4ZXI=\">é“¾æ¥</span></td>\n<td>ç»™ç”Ÿæˆçš„ css æ–‡ä»¶ä»¬æ·»åŠ æµè§ˆå™¨å‰ç¼€</td>\n<td>å¿…éœ€</td>\n</tr>\n<tr>\n<td>hexo-algoliasearch</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1hbGdvbGlhc2VhcmNo\">é“¾æ¥</span></td>\n<td>ç«™å†…æœç´¢åŠŸèƒ½</td>\n<td>æœç´¢æŒ‰é’®å¤±çµ</td>\n</tr>\n<tr>\n<td>hexo-symbols-count-time</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1zeW1ib2xzLWNvdW50LXRpbWU=\">é“¾æ¥</span></td>\n<td>æ–‡ç« æˆ–ç«™ç‚¹å­—æ•°åŠé˜…è¯»æ—¶é—´ç»Ÿè®¡</td>\n<td>ç»Ÿè®¡æ²¡æœ‰</td>\n</tr>\n<tr>\n<td>hexo-feed</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1mZWVk\">é“¾æ¥</span></td>\n<td>ç”Ÿæˆ Feed æ–‡ä»¶</td>\n<td>Feed æ–‡ä»¶æ²¡æœ‰</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>æ²¡æœ‰æ­£ç¡®å®‰è£…ä»¥ä¸Šæ’ä»¶çš„è¯ï¼Œæœ¬ä¸»é¢˜ä¼šæŠ¥é”™ or æ— æ³•æ­£ç¡®æ˜¾ç¤º or éƒ¨åˆ†åŠŸèƒ½å¤±æ•ˆã€‚<br />\n <code>hexo-renderer-multi-markdown-it</code>  è¯·æ³¨æ„å‡çº§åˆ°æœ€æ–°ç‰ˆ</p>\n</blockquote>\n<p>å®‰è£…å®Œä»¥ä¸Šæ’ä»¶åï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼ŒåŠ å…¥ç›¸å…³é…ç½®ã€‚</p>\n<h1 id=\"multi-markdown-itå®‰è£…ä¸é…ç½®\"><a class=\"anchor\" href=\"#multi-markdown-itå®‰è£…ä¸é…ç½®\">#</a> multi-markdown-it å®‰è£…ä¸é…ç½®</h1>\n<h2 id=\"å®‰è£…\"><a class=\"anchor\" href=\"#å®‰è£…\">#</a> å®‰è£…</h2>\n<ol>\n<li>\n<p>å®‰è£…å‰ï¼Œè®°å¾—åŠ¡å¿…å¸è½½æ‰é»˜è®¤çš„ <code>hexo-renderer-marked</code> ï¼Œä»¥åŠåˆ«çš„ markdown æ–‡ä»¶æ¸²æŸ“å™¨ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> un hexo-renderer-marked --save</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># æˆ–è€…</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> remove hexo-renderer-marked</pre></td></tr></table></figure></li>\n<li>\n<p>å®‰è£…</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> i hexo-renderer-multi-markdown-it --save</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># æˆ–è€…</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-renderer-multi-markdown-it</pre></td></tr></table></figure></li>\n<li>\n<p>å¦‚æœå®‰è£…ç¼“æ…¢ï¼Œæˆ–è€…å¤±è´¥<br />\nå¦‚æŠ¥é”™</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ERROR: Failed to download Chromium r515411<span class=\"token operator\">!</span> Set <span class=\"token string\">\"PUPPETEER_SKIP_CHROMIUM_DOWNLOAD\"</span> <span class=\"token function\">env</span> variable to skip download.</pre></td></tr></table></figure><p>å› ä¸ºæœ‰ä¸€æ­¥éœ€è¦ä¸‹è½½ puppeteer é‡Œçš„ Chromium å†…æ ¸ï¼ŒåŸºäºå¤©æœå†…éƒ¨ç½‘ç»œç°çŠ¶ï¼Œè¿™ä¸€æ­¥èƒ½ä¸èƒ½æˆåŠŸè¦é ç§‘å­¦å’Œè¿æ°”ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…å®‰è£…å¤±è´¥ï¼Œéœ€è¦åŠ ä¸Š <code>--ignore-scripts</code>  è·³è¿‡ Chromium å†…æ ¸çš„ä¸‹è½½ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> i hexo-renderer-multi-markdown-it --save --ignore-scripts</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># æˆ–è€…</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-renderer-multi-markdown-it --ignore-scripts</pre></td></tr></table></figure><p>puppeteer ä¸»è¦æ˜¯ç”¨æ¥æ¸²æŸ“ mermaid æµç¨‹å›¾ï¼Œåªè¦æ–‡ç« ä¸­ä¸ä½¿ç”¨ mermaid å°±æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå¦‚æœè¦ä½¿ç”¨ mermaid å»ºè®®è¿˜æ˜¯æƒ³åŠæ³•å®Œå…¨å®‰è£…ã€‚</p>\n</li>\n</ol>\n<h2 id=\"é…ç½®\"><a class=\"anchor\" href=\"#é…ç½®\">#</a> é…ç½®</h2>\n<ol>\n<li>åŠ å…¥ <code>markdown</code>  é…ç½®ï¼Œç”¨æ¥æ¸²æŸ“ md æ–‡ä»¶</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">markdown</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">render</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æ¸²æŸ“å™¨è®¾ç½®</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># è¿‡æ»¤ HTML æ ‡ç­¾</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">xhtmlOut</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># ä½¿ç”¨ '/' æ¥é—­åˆå•æ ‡ç­¾ ï¼ˆæ¯”å¦‚ &lt;br />ï¼‰ã€‚</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">breaks</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># è½¬æ¢æ®µè½é‡Œçš„ '\\n' åˆ° &lt;br>ã€‚</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">linkify</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># å°†ç±»ä¼¼ URL çš„æ–‡æœ¬è‡ªåŠ¨è½¬æ¢ä¸ºé“¾æ¥ã€‚</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">typographer</span><span class=\"token punctuation\">:</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">quotes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'â€œâ€â€˜â€™'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># markdown-it æ’ä»¶è®¾ç½®</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>toc<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>anchor</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æ–‡ç« ç›®å½•ä»¥åŠé”šç‚¹åº”ç”¨çš„ class åç§°ï¼Œshoka ä¸»é¢˜å¿…é¡»è®¾ç½®æˆè¿™æ ·</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token key atrule\">tocClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'toc'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">anchorClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'anchor'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>multimd<span class=\"token punctuation\">-</span>table</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">multiline</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token key atrule\">rowspan</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token key atrule\">headerless</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>furigana</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token key atrule\">fallbackParens</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"()\"</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>spoiler</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\"</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>åŠ å…¥ <code>minify</code>  é…ç½®ï¼Œå‹ç¼© css/js/html</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">minify</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># æ’é™¤ hexo-feed ç”¨åˆ°çš„æ¨¡æ¿æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/json.ejs'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/atom.ejs'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/rss.ejs'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.css'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">mangle</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">toplevel</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">compress</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.js'</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>åœç”¨é»˜è®¤ä»£ç é«˜äº®åŠŸèƒ½ï¼Œå¦åˆ™ä»£ç å—çš„ mac æ ·å¼ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚<br />\næ‰¾åˆ° <code>highlight</code>  å’Œ <code>prismjs</code> ï¼ŒæŠŠ <code>enable</code>  æ”¹æˆ <code>false</code> ã€‚</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">highlight</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">prismjs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr></table></figure><h1 id=\"autoprefixeré…ç½®å»ºè®®\"><a class=\"anchor\" href=\"#autoprefixeré…ç½®å»ºè®®\">#</a> autoprefixer é…ç½®å»ºè®®</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">autoprefixer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">'*.min.css'</span></pre></td></tr></table></figure><p>ç¼ºå°‘è¿™ä¸ªæ’ä»¶ï¼Œé¦–é¡µå¡ç‰‡ç¿»è½¬æ•ˆæœåœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­æ— æ³•æ­£ç¡®æ˜¾ç¤ºã€‚</p>\n<h1 id=\"algoliaé…ç½®å»ºè®®\"><a class=\"anchor\" href=\"#algoliaé…ç½®å»ºè®®\">#</a> algolia é…ç½®å»ºè®®</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your apiKey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your adminApiKey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">chunkSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#\"shoka\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">fields</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> title <span class=\"token comment\">#å¿…é¡»é…ç½®</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> path <span class=\"token comment\">#å¿…é¡»é…ç½®</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> categories <span class=\"token comment\">#æ¨èé…ç½®</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">:</span>strip<span class=\"token punctuation\">:</span>truncate<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">-</span> gallery</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> photos</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> tags</pre></td></tr></table></figure><h1 id=\"feedé…ç½®å»ºè®®\"><a class=\"anchor\" href=\"#feedé…ç½®å»ºè®®\">#</a> feed é…ç½®å»ºè®®</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">keywords</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#ç«™ç‚¹å…³é”®è¯ï¼Œç”¨ â€œ,â€ åˆ†éš”</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">feed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">order_by</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"-date\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">category_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">rss</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/rss.ejs\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rss.xml\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">atom</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/atom.ejs\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"atom.xml\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">jsonFeed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/json.ejs\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"feed.json\"</span></pre></td></tr></table></figure>",
            "tags": [
                "Hexo",
                "æ•™ç¨‹"
            ]
        }
    ]
}